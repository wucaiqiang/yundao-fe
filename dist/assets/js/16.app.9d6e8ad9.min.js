webpackJsonp([16],{1684:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(1),d=n(c),f=a(9),p=(n(f),a(42)),v=a(84),h=n(v),y=a(358),m=n(y),b=a(731),g=n(b),k=a(1700),_=n(k),w=a(95),E=n(w),C=a(242),O=(n(C),a(1807)),D=n(O),S=a(1738),F=n(S),j=a(1795),P=n(j),x=a(2578),M=n(x),I=a(1729),N=n(I),R=a(1732),U=n(R),T=a(1774),A=n(T),B=a(1698),V=n(B),Y=a(1753),L=n(Y),W=a(2095),G=(n(W),"/assets/images/icon/问号"),K=_.default.GridManager,q=_.default.GridInputFilter,z=_.default.FilterBar,H=_.default.GridSortFilter,J=_.default.GridDateFilter,Z=_.default.GridCheckboxFilter,$=_.default.GridRangeFilter,Q=D.default.EnumAppointmentStatus,X=function(e){function t(e,a){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.getColumns=function(){var e=n.state.filters.dic_reservation_status;return[{title:"预约编号",dataIndex:"number",fixed:"left",width:100,filterDropdown:s.default.createElement("div",{className:"filter_dropdown"},s.default.createElement(q,{filterKey:"number",mod:n})),render:function(e,t){var a=t.status===Q.enum.REJECT;return s.default.createElement("a",{title:t.title,onClick:function(){return n.editAppointmentModal.show(t,a)}},t.number)}},{title:"客户名称",dataIndex:"customerName",filterDropdown:s.default.createElement("div",{className:"filter_dropdown"},s.default.createElement(q,{filterKey:"customerName",mod:n})),render:function(e,t){return s.default.createElement("a",{role:"floatPane",title:t.customerName,onClick:function(){return n.customerDetailFloat.show({id:t.customerId})}},t.customerName)}},{title:"产品名称",dataIndex:"productName",width:200,className:"ant-table-col",filterDropdown:s.default.createElement("div",{className:"filter_dropdown"},s.default.createElement(q,{filterKey:"productName",mod:n})),render:function(e,t){return s.default.createElement("a",{role:"floatPane",title:t.productName,onClick:function(){return n.productDetailFloat.show({id:t.productId})}},t.productName)}},{title:"预约金额",dataIndex:"reservationAmount",sorter:!0,filterDropdown:s.default.createElement("div",{className:"filter_dropdown"},s.default.createElement(H,{filterKey:"reservationAmount",mod:n}),s.default.createElement($,{filterKey:"reservationAmount",mod:n})),render:function(e,t){return t.reservationAmount+"万"}},{title:"预计打款日期",dataIndex:"estimatePayDate",width:130,sorter:!0,filterDropdown:s.default.createElement("div",{className:"filter_dropdown"},s.default.createElement(H,{filterKey:"estimatePayDate",mod:n}),s.default.createElement(J,{filterKey:"estimatePayDate",mod:n})),render:function(e,t){return E.default.formatDate(e,"YYYY-MM-DD")}},{title:"预约时间",dataIndex:"reservationDate",width:140,sorter:!0,filterDropdown:s.default.createElement("div",{className:"filter_dropdown"},s.default.createElement(H,{filterKey:"reservationDate",mod:n}),s.default.createElement(J,{filterKey:"reservationDate",mod:n})),render:function(e,t){return E.default.formatDate(e,"YYYY-MM-DD HH:mm")}},{title:"状态",dataIndex:"statuss",filters:e,filterDropdown:s.default.createElement("div",{className:"filter_dropdown"},s.default.createElement(Z,{filterKey:"statuss",mod:n})),render:function(e,t){var a=null,n=function(e){return s.default.createElement(p.Popover,{placement:"topLeft",content:e,arrowPointAtCenter:!0},s.default.createElement("img",{src:G+"@1x.png",srcSet:G+"@2x.png 2x"}))};return t.status===Q.enum.PENDING?a=s.default.createElement("div",null,s.default.createElement("span",null,t.statusText),n("预约待审批")):t.status===Q.enum.PASS?a=s.default.createElement("span",{className:"green"},t.statusText):t.status===Q.enum.REJECT?a=s.default.createElement("div",null,s.default.createElement("span",{className:"red"},t.statusText),n("预约已驳回，原因："+t.reason)):t.status===Q.enum.UNDO?a=s.default.createElement("div",null,s.default.createElement("span",null,t.statusText),n("预约已取消，原因："+t.reason)):t.status===Q.enum.INVALID&&(a=s.default.createElement("div",null,s.default.createElement("span",null,t.statusText),n("预约已作废，原因："+t.reason))),a}},{title:"操作",width:150,fixed:"right",render:function(e,t){var a=null;return t.hasDeclaration?a="已报单":t.status===Q.enum.PENDING?a=s.default.createElement("a",{onClick:function(){return n.handleCancelModal(t)}},"取消预约"):t.status===Q.enum.REJECT?a=s.default.createElement("div",null,s.default.createElement("a",{onClick:function(){return n.editAppointmentModal.show(t,!0,!0)}},"重新提交"),s.default.createElement("a",{onClick:function(){return n.handleCancelModal(t)}},"取消预约")):t.status===Q.enum.PASS&&!1===t.discard&&(a=s.default.createElement("a",{onClick:function(){t.from="appointment.my",n.editDeclarationModal.show(t)}},"转报单")),s.default.createElement("div",{className:"operation"},a)}}]},n.reloadGrid=function(){n.gridManager.grid.reload()},n.handleCancel=function(e,t){e.id=n.cancelId,n.appoint.cancel(e).then(function(e){t.commit(!1),e.success&&(t.hide(),n.reloadGrid())})},n.handleCancelModal=function(e){n.cancelId=e.id,n.auditModal.show()},n.showFloat=function(e,t){var a=n.state.currentFloat;a&&a!=e&&n[a].hide(),n.setState({currentFloat:e}),n[e].show(t)},a.data[t.NAME]&&(n.context=a),n.state={loading:!0,filters:{dic_reservation_status:[]}},n}return o(t,e),i(t,null,[{key:"NAME",get:function(){return"SaleAppointmentIndex"}},{key:"contextTypes",get:function(){return{data:d.default.object}}}]),i(t,[{key:"componentWillMount",value:function(){this.dictionary=new V.default,this.appoint=new L.default,this.getDictionary()}},{key:"componentDidMount",value:function(){this.gridManager&&this.refs.filterBar&&this.gridManager.setFilterBar(this.refs.filterBar)}},{key:"getDictionary",value:function(){var e=this;this.dictionary.gets("dic_reservation_status").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e.selections}),e.setState({filters:a})}})}},{key:"beforeLoad",value:function(e){return this.gridManager.makeFilterMapData(),this.resetFilterByKey(e,"number"),this.resetFilterByKey(e,"customerName"),this.resetFilterByKey(e,"productName"),this.resetFilterByKey(e,"reservationAmount"),this.resetFilterByKey(e,"estimatePayDate"),this.resetFilterByKey(e,"reservationDate"),this.resetFilterByKey(e,"statuss"),e.reservationAmount&&e.reservationAmount.length&&(e.reservationStartAmount=e.reservationAmount[0],e.reservationEndAmount=e.reservationAmount[1],delete e.reservationAmount),e.estimatePayDate&&e.estimatePayDate.length&&(e.estimatePayStartDate=e.estimatePayDate[0],e.estimatePayEndDate=e.estimatePayDate[1],delete e.estimatePayDate),e.reservationDate&&e.reservationDate.length&&(e.reservationStartDate=e.reservationDate[0],e.reservationEndDate=e.reservationDate[1],delete e.reservationDate),"sortField"in e&&(e.sortField&&(e.orderColumn=e.sortField),delete e.sortField),"sortOrder"in e&&(e.sortOrder&&(e.sort=e.sortOrder),delete e.sortOrder),e.sort&&(e.sort=e.sort.replace("end","")),e}},{key:"resetFilterByKey",value:function(e,t,a){return e[t]&&(e[t]instanceof Array&&(1===e[t].length&&["dateRange","numberRange"].indexOf(e[t][0].filterType)>-1?e[t]=e[t][0].values:e[t]=e[t].join(",")),""!=e[t]&&a&&(e[a]=e[t],delete e[t])),e}},{key:"render",value:function(){var e=this,t=(0,g.default)(s.default.createElement(p.Button,{className:"btn_add",onClick:function(){return e.editAppointmentModal.show(null,!1)}},s.default.createElement("img",{src:"/assets/images/icon/新增@1x.png",srcSet:"/assets/images/icon/新增@2x.png 2x"}),"新增预约"));return s.default.createElement(m.default,this.props,s.default.createElement(p.Breadcrumb,{className:"page-breadcrumb"},s.default.createElement(p.Breadcrumb.Item,null,"销售管理"),s.default.createElement(p.Breadcrumb.Item,null,"我的预约")),s.default.createElement("div",{className:"page-content"},s.default.createElement(K,{noRowSelection:!0,columns:this.getColumns(),url:"/reservation/gets/my",beforeLoad:function(t){return e.beforeLoad(t)},gridWrapClassName:"grid-panel auto-width-grid",mod:this,scroll:{x:"120%"},ref:function(t){t&&(e.gridManager=t)}},s.default.createElement("div",{className:"vant-filter-bar clearfix"},s.default.createElement("div",{className:"fl"},s.default.createElement(z,{gridManager:this.gridManager,ref:"filterBar"})),s.default.createElement("div",{className:"vant-filter-bar-action fr"},s.default.createElement(t,{auth:"sale.appointment.add"})))),s.default.createElement(P.default,{reload:this.reloadGrid,ref:function(t){return e.editAppointmentModal=t}}),s.default.createElement(M.default,{initFields:"productName,customerName",reload:this.reloadGrid,parent:this,ref:function(t){return e.editDeclarationModal=t},history:this.props.history}),s.default.createElement(F.default,{title:"取消预约",labelName:"取消原因",ref:function(t){return e.auditModal=t},callback:this.handleCancel})),s.default.createElement(U.default,{reload:this.reloadGrid,ref:function(t){return e.customerDetailFloat=t}}),s.default.createElement(A.default,{ref:function(t){return e.declarationDetailFloat=t}}),s.default.createElement(N.default,{ref:function(t){return e.productDetailFloat=t}}))}}]),t}(h.default);t.default=X},1696:function(e,t,a){"use strict";function n(){}function l(e){try{return e.then}catch(e){return m=e,b}}function r(e,t){try{return e(t)}catch(e){return m=e,b}}function o(e,t,a){try{e(t,a)}catch(e){return m=e,b}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==n&&h(e,this)}function u(e,t,a){return new e.constructor(function(l,r){var o=new i(n);o.then(l,r),s(e,new v(t,a,o))})}function s(e,t){for(;3===e._65;)e=e._55;if(i._37&&i._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);c(e,t)}function c(e,t){y(function(){var a=1===e._65?t.onFulfilled:t.onRejected;if(null===a)return void(1===e._65?d(t.promise,e._55):f(t.promise,e._55));var n=r(a,e._55);n===b?f(t.promise,m):d(t.promise,n)})}function d(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var a=l(t);if(a===b)return f(e,m);if(a===e.then&&t instanceof i)return e._65=3,e._55=t,void p(e);if("function"==typeof a)return void h(a.bind(t),e)}e._65=1,e._55=t,p(e)}function f(e,t){e._65=2,e._55=t,i._87&&i._87(e,t),p(e)}function p(e){if(1===e._40&&(s(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)s(e,e._72[t]);e._72=null}}function v(e,t,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=a}function h(e,t){var a=!1,n=o(e,function(e){a||(a=!0,d(t,e))},function(e){a||(a=!0,f(t,e))});a||n!==b||(a=!0,f(t,m))}var y=a(1699),m=null,b={};e.exports=i,i._37=null,i._87=null,i._61=n,i.prototype.then=function(e,t){if(this.constructor!==i)return u(this,e,t);var a=new i(n);return s(this,new v(e,t,a)),a}},1698:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"gets",value:function(e){return o.default.get("/dictionary/gets",{codes:e})}}]),e}();t.default=i},1699:function(e,t,a){"use strict";(function(t){function a(e){o.length||(r(),i=!0),o[o.length]=e}function n(){for(;u<o.length;){var e=u;if(u+=1,o[e].call(),u>s){for(var t=0,a=o.length-u;t<a;t++)o[t]=o[t+u];o.length-=u,u=0}}o.length=0,u=0,i=!1}function l(e){return function(){function t(){clearTimeout(a),clearInterval(n),e()}var a=setTimeout(t,0),n=setInterval(t,50)}}e.exports=a;var r,o=[],i=!1,u=0,s=1024,c=void 0!==t?t:self,d=c.MutationObserver||c.WebKitMutationObserver;r="function"==typeof d?function(e){var t=1,a=new d(e),n=document.createTextNode("");return a.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(n):l(n),a.requestFlush=r,a.makeRequestCallFromTimer=l}).call(t,a(36))},1700:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function e(t,a,n){null===t&&(t=Function.prototype);var l=Object.getOwnPropertyDescriptor(t,a);if(void 0===l){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if("value"in l)return l.value;var o=l.get;if(void 0!==o)return o.call(n)},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),v=a(12),h=(n(v),a(42)),y=a(9),m=n(y),b=a(1703),g=n(b),k=a(1707),_=n(k),w=a(357),E=n(w),C=a(1708),O=n(C),D=h.DatePicker.RangePicker,S=h.Checkbox.Group,F="/assets/images/icon/升序",j="/assets/images/icon/降序",P={DATE_RANGE:"dateRange",Month_RANGE:"monthRange",NUMBER_RANGE:"numberRange",CITYS:"citys"},x=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"handleConfirm",value:function(e){console.log("value",e),e?(e instanceof Array||e instanceof Object||(e=[e]),this.setDropDownInvisible(),this.getGrid().handleFilter({dataIndex:this.props.filterKey},e)):this.handleRest()}},{key:"handleRest",value:function(){this.setDropDownInvisible(),this.getGrid().handleFilter({dataIndex:this.props.filterKey},[])}},{key:"setDropDownInvisible",value:function(){var e=this.props.mod.gridManager||this.props.mod.refs.gridManager,t=e.state.filterDropdownVisible;t[this.props.filterKey]=!1,e.setState({filterDropdownVisible:t},function(){console.log("girdManager",e)})}},{key:"getGrid",value:function(){return this.props.grid?this.props.grid:this.props.mod.grid||(this.props.mod.gridManager||this.props.mod.refs.gridManager).grid.refs.grid}}]),t}(f.Component),M=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"ant-table-filter-dropdown"},p.default.createElement("ul",{className:"ant-dropdown-menu ant-dropdown-menu-vertical ant-dropdown-menu-root",role:"menu","aria-activedescendant":"",tabIndex:"0"},p.default.createElement("li",{className:"ant-dropdown-menu-item"},this.props.children)),p.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},p.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){return e.props.onReset()}},"重置"),p.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){return e.props.onConfirm(e.value)}},"确定")))}}]),t}(f.Component),I=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"componentWillMount",value:function(){this.props.formUtils.setForm(this.props.form)}},{key:"handleChange",value:function(e){this.props.onChange.apply(this,[e])}},{key:"render",value:function(){var e,t=this;return p.default.createElement(h.Form,{onSubmit:(e=this.props).onSubmit.bind(e)},this.props.formUtils.getFieldDecorator("input",{onChange:function(e){return t.handleChange(e)}})(p.default.createElement(h.Input,{placeholder:this.props.placeholder||"请输入关键字",style:{width:184}})))}}]),t}(f.Component);I=h.Form.create({})(I);var N=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.formUtils=new E.default("gridInputFilter"),e}return u(t,e),d(t,[{key:"handleRest",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleRest",this).call(this),this.formUtils.resetFields(),this.value=null}},{key:"handleChange",value:function(e){this.value=e.target.value}},{key:"render",value:function(){var e=this;return p.default.createElement(M,{onConfirm:function(){return e.handleConfirm(e.value)},onReset:function(){return e.handleRest()}},p.default.createElement(I,{placeholder:this.props.placeholder,onSubmit:function(t){t.preventDefault(),e.handleConfirm(e.value)},formUtils:this.formUtils,onChange:function(t){return e.handleChange(t)}}))}}]),t}(x),R=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"componentWillMount",value:function(){this.props.formUtils.setForm(this.props.form)}},{key:"handleChange",value:function(e){this.props.onChange.apply(this,[e])}},{key:"render",value:function(){var e,t=this,a=this.props.filters.map(function(e){return{label:e.label||e.text,value:e.value}});return p.default.createElement(h.Form,{onSubmit:(e=this.props).onSubmit.bind(e)},this.props.formUtils.getFieldDecorator("checkbox",{onChange:function(e){return t.handleChange(e)}})(p.default.createElement(S,{options:a})))}}]),t}(f.Component);R=h.Form.create({})(R);var U=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.formUtils=new E.default("gridCheckboxFilter"),e}return u(t,e),d(t,[{key:"handleRest",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleRest",this).call(this),this.formUtils.resetFields()}},{key:"handleChange",value:function(e){this.value=e}},{key:"getColumn",value:function(e){var t=null,a=this.props.mod.gridManager;return a&&(t=a.props.columns.filter(function(t){return t.dataIndex==e})),t.length?t[0]:t}},{key:"render",value:function(){var e=this,t=this.props,a=(t.mod,t.filterKey),n=this.getColumn(a);return p.default.createElement(M,{onConfirm:function(){return e.handleConfirm(e.value)},onReset:function(){return e.handleRest()}},p.default.createElement(R,{onSubmit:function(t){t.preventDefault(),e.handleConfirm(e.value)},filters:n.filters,formUtils:this.formUtils,onChange:function(t){return e.handleChange(t)}}))}}]),t}(x),T=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"getColumn",value:function(e){var t=null,a=this.props.mod.gridManager;return a&&(t=a.props.columns.filter(function(t){return t.dataIndex==e})),t.length?t[0]:t}},{key:"render",value:function(){var e=this.props,t=e.mod,a=e.filterKey,n=t.gridManager,l=this.getColumn(a);return p.default.createElement("div",{className:O.default.grid_sort_filter},p.default.createElement("a",{onClick:function(){n&&n.toggleSortOrder("ascend",l)}},p.default.createElement("img",{src:F+".png",srcSet:F+"@2x.png"}),"升序A-Z"),p.default.createElement("a",{onClick:function(){n&&n.toggleSortOrder("descend",l)}},p.default.createElement("img",{src:j+".png",srcSet:j+"@2x.png"}),"降序Z-A"))}}]),t}(x),A=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"componentWillMount",value:function(){this.props.formUtils.setForm(this.props.form)}},{key:"componentDidMount",value:function(){this.el=(0,v.findDOMNode)(this)}},{key:"handleChange",value:function(e,t){this.props.onChange.apply(this,[e,t])}},{key:"getContainer",value:function(){return this.el}},{key:"render",value:function(){var e=this;return p.default.createElement(h.Form,null,this.props.formUtils.getFieldDecorator("dateRange",{onChange:function(t,a){return e.handleChange(t,a)}})(p.default.createElement(D,{getCalendarContainer:this.getContainer.bind(this),style:{width:240}})))}}]),t}(f.Component);A=h.Form.create({})(A);var B=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.formUtils=new E.default("gridDateFilter"),e}return u(t,e),d(t,[{key:"handleChange",value:function(e,t){var a=void 0;a={filterType:P.DATE_RANGE,values:t},this.handleConfirm([a])}},{key:"handleRest",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleRest",this).call(this),this.formUtils.resetFields()}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"ant-table-filter-dropdown ant-table-date-filter"},p.default.createElement("ul",{className:"ant-dropdown-menu ant-dropdown-menu-vertical ant-dropdown-menu-root",role:"menu","aria-activedescendant":""},p.default.createElement("li",{className:"ant-dropdown-menu-item"},p.default.createElement(A,{formUtils:this.formUtils,onChange:function(t,a){return e.handleChange(t,a)}}))),p.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},p.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){return e.handleRest()}},"重置")))}}]),t}(x),V=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"componentWillMount",value:function(){this.props.formUtils.setForm(this.props.form)}},{key:"render",value:function(){return p.default.createElement(h.Form,null,p.default.createElement("span",{className:"ant-calendar-picker",style:{width:240}},p.default.createElement("span",{className:"ant-calendar-range-picker ant-input"},this.props.formUtils.getFieldDecorator("start")(p.default.createElement(h.Input,{type:"number",className:"ant-calendar-range-picker-input",style:{marginRight:"5%"}})),p.default.createElement("span",{className:"ant-calendar-range-picker-separator"},"~"),this.props.formUtils.getFieldDecorator("end")(p.default.createElement(h.Input,{type:"number",className:"ant-calendar-range-picker-input",style:{marginLeft:"8%"}})))))}}]),t}(f.Component);V=h.Form.create({})(V);var Y=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.formUtils=new E.default("gridRangeFilter"),e}return u(t,e),d(t,[{key:"handleConfirm",value:function(){var e=void 0;e=this.formUtils.getFieldsValue(),null==e.start&&null==e.end||c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleConfirm",this).call(this,[{filterType:P.NUMBER_RANGE,values:[e.start,e.end]}])}},{key:"handleRest",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleRest",this).call(this),this.formUtils.resetFields()}},{key:"render",value:function(){var e=this;return p.default.createElement(M,{onConfirm:function(){return e.handleConfirm(e.value)},onReset:function(){return e.handleRest()}},p.default.createElement(V,{formUtils:this.formUtils}))}}]),t}(x),L=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),d(t,[{key:"componentWillMount",value:function(){this.props.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this)}},{key:"setCitys",value:function(e){this.citys=e}},{key:"render",value:function(){var e=this;return p.default.createElement(h.Form,null,this.props.formUtils.getFieldDecorator("citys")(p.default.createElement(_.default,{setCitys:function(t){return e.setCitys(t)}})))}}]),t}(f.Component);L=h.Form.create({})(L);var W=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.formUtils=new E.default("gridCitysFilter"),e}return u(t,e),d(t,[{key:"handleConfirm",value:function(){var e=void 0;e=this.formUtils.getFieldsValue(),this.form.citys.clear(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleConfirm",this).call(this,[{filterType:P.CITYS,values:e.citys}])}},{key:"handleRest",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleRest",this).call(this),this.formUtils.resetFields()}},{key:"setForm",value:function(e){this.form=e}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"citys-filter"},p.default.createElement(M,{onConfirm:function(){return e.handleConfirm(e.value)},onReset:function(){return e.handleRest()}},p.default.createElement(L,{formUtils:this.formUtils,setForm:function(t){return e.setForm(t)}})))}}]),t}(x),G=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.filterDropdownVisible={},e.resizeTableAndColumnWidth=function(t){return function(){var a=t.gridBox.getBoundingClientRect().width,n=t.props.gridWidth||0,l=t.props.columns;0===n&&e.columnsBaseWidth.map(function(e,t){n+=e.width||140});var r=0;a>n&&(r=(a-n)/l.length),l=l.map(function(t,a){return t.width&&(t.width=e.columnsBaseWidth[a].width+r),t}),t.setState({columns:l,gridWidth:n/a*100+"%"})}},e.clearRowSelect=function(){e.setState({selectedRowKeys:[]}),e.grid.setState({selectIds:"",selectRowsData:[],selectedRowKeys:[],selectRowsCount:0}),e.props.onSelect&&e.props.onSelect.call(e,{selectIds:"",selectRowsData:[],selectRowsCount:0})},e.onSearch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.grid.refs.grid;a.setState({search:t},function(){a.handleFilter({}),e.filterBar.handleCollapse()})},e.state={loading:!0,data:[],filterList:[],gridHeight:400,fields:[],isMounted:!1,filterDropdownVisible:{}},e.gridId="grid_"+ +new Date,e}return u(t,e),d(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({fields:this.props.fields}),this.columnsBaseWidth=[],this.props.columns.map(function(t){e.columnsBaseWidth.push({dataIndex:t.dataIndex,width:t.width})})}},{key:"componentWillUnmount",value:function(){this.Interval&&window.clearInterval(this.Interval),window.removeEventListener("resize",this.resizeEvent,!1)}},{key:"componentDidMount",value:function(){function e(e){var t=e.gridBox.getBoundingClientRect();e.width=t.width,e.height=t.height,e.setState({gridHeight:e.height})}var t=this;this.gridBox=document.querySelector("#"+this.gridId),this.resizeEvent=this.resizeTableAndColumnWidth(this),window.addEventListener("resize",this.resizeEvent,!1),this.resizeEvent(),this.props.disableAutoHeight?this.Interval=setInterval(function(){t.resizeEvent()},500):(this.Interval=setInterval(function(){var a=t.gridBox.getBoundingClientRect();t.width==a.width&&t.height==a.height||(t.resizeEvent(),e(t))},500),e(this))}},{key:"initRowSelection",value:function(){var e=this;return{selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){console.log(t,a);var n=void 0,l=void 0,r=void 0;for(n=e.state.selectRowsCount,a.length&&(n=a.length),t=[],l=0;l<a.length;l++)r=a[l],t.push(r.id);e.setState({selectedRowKeys:t}),e.props.onSelect&&e.props.onSelect.call(e,{selectIds:t,selectRowsData:a,selectRowsCount:n})}}}},{key:"makeFilterMapData",value:function(){var e=void 0,t=void 0,a=void 0,n=void 0,l=void 0,r=void 0;for(e={},n=this.getColumns(),t=0;t<n.length;t++)if(l=n[t],l.dataIndex&&(e[l.dataIndex]={title:l.text||l.title,filter:{}},l.filters))for(e[l.dataIndex].filterCount=l.filters.length,a=0;a<l.filters.length;a++)r=l.filters[a],e[l.dataIndex].filter[r.value]=r.label||r.text;this.filterMapData=Object.assign(this.filterMapData||{},e)}},{key:"beforeLoad",value:function(e){return this.props.beforeLoad&&(e=this.props.beforeLoad.apply(this,[e])),this.setState({loading:!0,selectedRowIndex:-1}),this.clearRowSelect(),this.resizeEvent(),e.orderColumn?(this.grid.state.sortField=e.orderColumn,this.grid.state.sortOrder=e.sort):(delete this.grid.state.sortField,delete this.grid.state.sortOrder),e}},{key:"setFilterBar",value:function(e){this.filterBar=e}},{key:"handleChange",value:function(e,t,a){var n=[],l=void 0,r=void 0,o=this.grid.refs.grid;if(this.props.onChange&&this.props.onChange.apply(this,[e,t,a]),o&&o.state.search){var i=o.state.search;Object.keys(i).map(function(e){n.push({name:e,value:i[e]})})}for(l in t)r=t[l],n.push({name:l,value:r});this.filterBar&&this.filterBar.setState({filterList:n}),this.grid.load(void 0,e,t,a)}},{key:"setFilters",value:function(e,t){if(t&&0!==t.length){var a=void 0,n=[];for(a=0;a<t.length;a++)n.push({text:t[a].name,value:t[a].code});this.state[e+"Filters"]=n,this.setState(this.state),this.makeFilterMapData()}}},{key:"showGridColumnsSetting",value:function(){this.refs.gridColumnsSetting.show(this.state.fields)}},{key:"getColumns",value:function(){var e=this,t=this.props.columns;return t&&t.map(function(t){t.hasOwnProperty("filterDropdown")&&(t.filterDropdownVisible=e.state.filterDropdownVisible[t.dataIndex],t.onFilterDropdownVisibleChange=function(a){var n=e.state,l=n.filterDropdownVisible,r=n.columns;l[t.dataIndex]=a,r.map(function(e){return e.dataIndex==t.dataIndex?e.filterDropdownVisible=a:e.filterDropdownVisible=void 0,e}),e.setState({columns:r,filterDropdownVisible:l})})}),this.setState({columns:t}),t}},{key:"toggleSortOrder",value:function(e,t){this.grid.toggleSortOrder(e,t)}},{key:"render",value:function(){var e=this,t=this.props,a=(t.fields,t.url),n=(t.beforeLoad,t.gridWrapClassName),l=t.dataSource,o=t.children,i=t.noRowSelection,u=t.rowKey,c=t.disabledAutoLoad,d=t.scroll,f=t.loadSuccess,v=t.columns,h=r(t,["fields","url","beforeLoad","gridWrapClassName","dataSource","children","noRowSelection","rowKey","disabledAutoLoad","scroll","loadSuccess","columns"]);return v=this.state.columns||this.getColumns(),this.scrollValue=this.state.gridWidth?{x:this.state.gridWidth||1720,y:d?d.y:null}:d||{x:"100%"},p.default.createElement("div",{className:n||"grid-panel"},o,p.default.createElement("div",{className:"grid",id:this.gridId},p.default.createElement(g.default,s({columns:v,url:a,beforeLoad:function(t){return e.beforeLoad(t)},rowSelection:i?null:this.initRowSelection(),dataSource:l,rowKey:u||"id",onRowClick:function(t,a,n){a!==e.state.selectedRowIndex&&e.setState({selectedRowIndex:a})},rowClassName:function(t,a){return e.state.selectedRowIndex===a?"ant-table-row-selected":""},disabledAutoLoad:c,onChange:function(t,a,n){e.handleChange(t,a,n)},scroll:this.scrollValue,loadSuccess:f||function(){},ref:function(t){t&&(e.grid=t)}},h))))}}]),t}(f.Component),K=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.clearAllFilter=function(){var t=e.props.gridManager.grid.refs.grid;t.setState({search:{},filters:{},sortOrder:null,sortColumn:null,sorter:{}},function(){t.handleFilter({})})},e.handleCollapse=function(){e.setState({collapse:!e.state.collapse})},e.state={collapse:!1,filterList:[]},e}return u(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("grid-fitler-form")&&document.addEventListener("click",function(t){e.handleClick(t)},!1)}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("click",function(t){e.handleClick(t)},!1)}},{key:"handleClick",value:function(e){var t=this.state.collapse,a=document.getElementById("grid-fitler-form"),n=e.target.className;if(!(O.default.more===n||n.indexOf("anticon")>-1||!1===t||null===a)){var l=a.getBoundingClientRect();console.log("目标区域",l);var r=e.clientX,o=e.clientY,i=l.left,u=l.top,s=i+l.width,c=l.top+l.height;(r<i||r>s||o<u||o>c)&&this.setState({collapse:!1})}}},{key:"loadFilterTags",value:function(){var e=this,t=void 0,a=void 0,n=void 0;a=this.state.filterList,n=[];for(t=0;t<a.length;t++)!function(){var l=void 0;if(l=a[t],l.value instanceof Array&&l.value.length||!(l.value instanceof Array)&&l.value){var r=e.getFilterText(l);r&&n.push(p.default.createElement(h.Tag,{closable:!0,key:l.name,onClose:function(t){e.delFilter(l)},ref:function(e){e&&e.setState({closed:!1})}},r))}}();return n}},{key:"getFilterText",value:function(e){var t=void 0,a=void 0,n=void 0,l=void 0,r=void 0,o=void 0,i=this.props.gridManager;if(!i||!i.filterMapData)return null;if(n=i.filterMapData,!n[e.name])return null;if(t=n[e.name].title,r=n[e.name].filter,l=e.value[0],a=[],l&&l.filterType)switch(l.filterType){case P.DATE_RANGE:case P.Month_RANGE:a=l.values[0]+" 至 "+l.values[1];break;case P.NUMBER_RANGE:a=null==l.values[0]?"最大 "+l.values[1]:null==l.values[1]?"最小 "+l.values[0]:l.values[0]+" - "+l.values[1];break;case P.CITYS:var u=void 0,s=void 0;e&&(u=l.values.text,u.length>3?(s=u.slice(0,3),a=s.join(",")+" 等"+u.length+"个城市"):a=u.join(","))}else if(e.value instanceof Array){for(o=0;o<e.value.length;o++)l=e.value[o],a.push(r[l]||l);a=a.join(",")}else a=e.value;return p.default.createElement("span",null,t,"：",p.default.createElement("span",{className:"tag_value"},a))}},{key:"loadSortTags",value:function(){var e=this,t=void 0,a=void 0,n=void 0,l=void 0,r=void 0;if((l=this.props.gridManager)&&l.filterMapData&&l.grid&&(n=l.grid.state,(t=l.filterMapData[n.sortField||n.sorter&&n.sorter.field])&&(t=t.title,r=l.grid.state.sortOrder,r&&(r=r.replace("end","")),"asc"==r?(a=F,t+="A-Z"):"desc"==r&&(a=j,t+="Z-A"),a)))return p.default.createElement(h.Tag,{closable:!0,onClose:function(){return e.props.gridManager.grid.toggleSortOrder()},ref:function(e){e&&e.setState({closed:!1})}},p.default.createElement("img",{src:a+".png",srcSet:a+"@2x.png"}),"排序：",p.default.createElement("span",{className:"tag_value"},t))}},{key:"delFilter",value:function(e){var t=this,a=this.props.gridManager.grid.refs.grid,n=a.state.search;for(var l in n)if(n.hasOwnProperty(l)&&l===e.name){delete n[l];break}a.setState({search:n},function(){return t.props.gridManager.grid.refs.grid.handleFilter({dataIndex:e.name},[])})}},{key:"render",value:function(){var e=this.loadFilterTags(),t=this.loadSortTags(),a=this.state.collapse;return p.default.createElement("div",{className:(0,m.default)("vant-filter-bar-list",l({},O.default.advancedsearch,this.props.children))},p.default.createElement("div",null,this.props.children?p.default.createElement("a",{className:O.default.more,onClick:this.handleCollapse},"更多筛选 ",a?p.default.createElement(h.Icon,{type:"up"}):p.default.createElement(h.Icon,{type:"down"})):null,e,t,e.length>0||t?p.default.createElement("a",{onClick:this.clearAllFilter},"清空"):null,this.props.children?p.default.createElement("div",{className:(0,m.default)(O.default.filterForm,l({},O.default.show,a)),id:"grid-fitler-form"},this.props.children):null))}}]),t}(f.Component),q={FILTER_TYPE:P,GridInputFilter:N,GridSortFilter:T,GridDateFilter:B,GridRangeFilter:Y,GridCheckboxFilter:U,GridCitysFilter:W,GridManager:G,FilterBar:K};t.default=q},1701:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{label:"河北省",value:"130000",key:"130000",children:[{label:"石家庄市",value:"130100",key:"130100"},{label:"廊坊市",value:"131000",key:"131000"},{label:"沧州市",value:"130900",key:"130900"},{label:"承德市",value:"130800",key:"130800"},{label:"张家口市",value:"130700",key:"130700"},{label:"保定市",value:"130600",key:"130600"},{label:"邢台市",value:"130500",key:"130500"},{label:"邯郸市",value:"130400",key:"130400"},{label:"秦皇岛市",value:"130300",key:"130300"},{label:"唐山市",value:"130200",key:"130200"},{label:"衡水市",value:"131100",key:"131100"}]},{label:"四川省",value:"510000",key:"510000",children:[{label:"成都市",value:"510100",key:"510100"},{label:"宜宾市",value:"511500",key:"511500"},{label:"广安市",value:"511600",key:"511600"},{label:"达州市",value:"511700",key:"511700"},{label:"雅安市",value:"511800",key:"511800"},{label:"巴中市",value:"511900",key:"511900"},{label:"资阳市",value:"512000",key:"512000"},{label:"阿坝藏族羌族自治州",value:"513200",key:"513200"},{label:"甘孜藏族自治州",value:"513300",key:"513300"},{label:"眉山市",value:"511400",key:"511400"},{label:"南充市",value:"511300",key:"511300"},{label:"乐山市",value:"511100",key:"511100"},{label:"自贡市",value:"510300",key:"510300"},{label:"攀枝花市",value:"510400",key:"510400"},{label:"泸州市",value:"510500",key:"510500"},{label:"德阳市",value:"510600",key:"510600"},{label:"绵阳市",value:"510700",key:"510700"},{label:"广元市",value:"510800",key:"510800"},{label:"遂宁市",value:"510900",key:"510900"},{label:"内江市",value:"511000",key:"511000"},{label:"凉山彝族自治州",value:"513400",key:"513400"}]},{label:"贵州省",value:"520000",key:"520000",children:[{label:"贵阳市",value:"520100",key:"520100"},{label:"六盘水市",value:"520200",key:"520200"},{label:"遵义市",value:"520300",key:"520300"},{label:"安顺市",value:"520400",key:"520400"},{label:"铜仁地区",value:"522200",key:"522200"},{label:"黔西南布依族苗族自治州",value:"522300",key:"522300"},{label:"毕节地区",value:"522400",key:"522400"},{label:"黔东南苗族侗族自治州",value:"522600",key:"522600"},{label:"黔南布依族苗族自治州",value:"522700",key:"522700"}]},{label:"云南省",value:"530000",key:"530000",children:[{label:"昆明市",value:"530100",key:"530100"},{label:"怒江傈僳族自治州",value:"533300",key:"533300"},{label:"德宏傣族景颇族自治州",value:"533100",key:"533100"},{label:"大理白族自治州",value:"532900",key:"532900"},{label:"西双版纳傣族自治州",value:"532800",key:"532800"},{label:"文山壮族苗族自治州",value:"532600",key:"532600"},{label:"红河哈尼族彝族自治州",value:"532500",key:"532500"},{label:"楚雄彝族自治州",value:"532300",key:"532300"},{label:"临沧市",value:"530900",key:"530900"},{label:"普洱市",value:"530800",key:"530800"},{label:"丽江市",value:"530700",key:"530700"},{label:"昭通市",value:"530600",key:"530600"},{label:"保山市",value:"530500",key:"530500"},{label:"玉溪市",value:"530400",key:"530400"},{label:"曲靖市",value:"530300",key:"530300"},{label:"迪庆藏族自治州",value:"533400",key:"533400"}]},{label:"西藏自治区",value:"540000",key:"540000",children:[{label:"拉萨市",value:"540100",key:"540100"},{label:"昌都地区",value:"542100",key:"542100"},{label:"山南地区",value:"542200",key:"542200"},{label:"日喀则地区",value:"542300",key:"542300"},{label:"那曲地区",value:"542400",key:"542400"},{label:"阿里地区",value:"542500",key:"542500"},{label:"林芝地区",value:"542600",key:"542600"}]},{label:"陕西省",value:"610000",key:"610000",children:[{label:"西安市",value:"610100",key:"610100"},{label:"安康市",value:"610900",key:"610900"},{label:"榆林市",value:"610800",key:"610800"},{label:"汉中市",value:"610700",key:"610700"},{label:"延安市",value:"610600",key:"610600"},{label:"渭南市",value:"610500",key:"610500"},{label:"咸阳市",value:"610400",key:"610400"},{label:"宝鸡市",value:"610300",key:"610300"},{label:"铜川市",value:"610200",key:"610200"},{label:"商洛市",value:"611000",key:"611000"}]},{label:"甘肃省",value:"620000",key:"620000",children:[{label:"兰州市",value:"620100",key:"620100"},{label:"临夏回族自治州",value:"622900",key:"622900"},{label:"陇南市",value:"621200",key:"621200"},{label:"定西市",value:"621100",key:"621100"},{label:"庆阳市",value:"621000",key:"621000"},{label:"酒泉市",value:"620900",key:"620900"},{label:"平凉市",value:"620800",key:"620800"},{label:"张掖市",value:"620700",key:"620700"},{label:"武威市",value:"620600",key:"620600"},{label:"天水市",value:"620500",key:"620500"},{label:"白银市",value:"620400",key:"620400"},{label:"金昌市",value:"620300",key:"620300"},{label:"嘉峪关市",value:"620200",key:"620200"},{label:"甘南藏族自治州",value:"623000",key:"623000"}]},{label:"青海省",value:"630000",key:"630000",children:[{label:"西宁市",value:"630100",key:"630100"},{label:"海东地区",value:"632100",key:"632100"},{label:"海北藏族自治州",value:"632200",key:"632200"},{label:"黄南藏族自治州",value:"632300",key:"632300"},{label:"海南藏族自治州",value:"632500",key:"632500"},{label:"果洛藏族自治州",value:"632600",key:"632600"},{label:"玉树藏族自治州",value:"632700",key:"632700"},{label:"海西蒙古族藏族自治州",value:"632800",key:"632800"}]},{label:"宁夏回族自治区",value:"640000",key:"640000",children:[{label:"银川市",value:"640100",key:"640100"},{label:"石嘴山市",value:"640200",key:"640200"},{label:"吴忠市",value:"640300",key:"640300"},{label:"固原市",value:"640400",key:"640400"},{label:"中卫市",value:"640500",key:"640500"}]},{label:"新疆维吾尔自治区",value:"650000",key:"650000",children:[{label:"乌鲁木齐市",value:"650100",key:"650100"},{label:"阿勒泰地区",value:"654300",key:"654300"},{label:"塔城地区",value:"654200",key:"654200"},{label:"伊犁哈萨克自治州",value:"654000",key:"654000"},{label:"和田地区",value:"653200",key:"653200"},{label:"喀什地区",value:"653100",key:"653100"},{label:"克孜勒苏柯尔克孜自治州",value:"653000",key:"653000"},{label:"阿克苏地区",value:"652900",key:"652900"},{label:"巴音郭楞蒙古自治州",value:"652800",key:"652800"},{label:"博尔塔拉蒙古自治州",value:"652700",key:"652700"},{label:"昌吉回族自治州",value:"652300",key:"652300"},{label:"哈密地区",value:"652200",key:"652200"},{label:"吐鲁番地区",value:"652100",key:"652100"},{label:"克拉玛依市",value:"650200",key:"650200"},{label:"（自治区直辖县级行政区）",value:"659000",key:"659000"}]},{label:"台湾省",value:"710000",key:"710000",children:[{label:"台北市",value:"710001",key:"710001"},{label:"彰化县",value:"710014",key:"710014"},{label:"南投县",value:"710015",key:"710015"},{label:"云林县",value:"710016",key:"710016"},{label:"嘉义县",value:"710017",key:"710017"},{label:"台南县",value:"710018",key:"710018"},{label:"高雄县",value:"710019",key:"710019"},{label:"屏东县",value:"710020",key:"710020"},{label:"台东县",value:"710021",key:"710021"},{label:"花莲县",value:"710022",key:"710022"},{label:"台中县",value:"710013",key:"710013"},{label:"苗栗县",value:"710012",key:"710012"},{label:"新竹县",value:"710011",key:"710011"},{label:"高雄市",value:"710002",key:"710002"},{label:"基隆市",value:"710003",key:"710003"},{label:"新竹市",value:"710004",key:"710004"},{label:"台中市",value:"710005",key:"710005"},{label:"嘉义市",value:"710006",key:"710006"},{label:"台南市",value:"710007",key:"710007"},{label:"台北县",value:"710008",key:"710008"},{label:"宜兰县",value:"710009",key:"710009"},{label:"桃园县",value:"710010",key:"710010"},{label:"澎湖县",value:"710023",key:"710023"}]},{label:"北京市",value:"110000",key:"110000",children:[{label:"北京市",value:"110100",key:"110100"}]},{label:"天津市",value:"120000",key:"120000",children:[{label:"天津市",value:"120100",key:"120100"}]},{label:"重庆市",value:"500000",key:"500000",children:[{label:"重庆市",value:"500100",key:"500100"}]},{label:"上海市",value:"310000",key:"310000",children:[{label:"上海市",value:"310100",key:"310100"}]},{label:"香港特别行政区",value:"810000",key:"810000",children:[{label:"香港特别行政区",value:"810100",key:"810100"}]},{label:"海南省",value:"460000",key:"460000",children:[{label:"海口市",value:"460100",key:"460100"},{label:"三亚市",value:"460200",key:"460200"},{label:"三沙市\n",value:"460300",key:"460300"},{label:"（省直辖县级行政区划）",value:"469000",key:"469000"}]},{label:"广西壮族自治区",value:"450000",key:"450000",children:[{label:"南宁市",value:"450100",key:"450100"},{label:"来宾市",value:"451300",key:"451300"},{label:"河池市",value:"451200",key:"451200"},{label:"贺州市",value:"451100",key:"451100"},{label:"百色市",value:"451000",key:"451000"},{label:"玉林市",value:"450900",key:"450900"},{label:"贵港市",value:"450800",key:"450800"},{label:"钦州市",value:"450700",key:"450700"},{label:"防城港市",value:"450600",key:"450600"},{label:"北海市",value:"450500",key:"450500"},{label:"梧州市",value:"450400",key:"450400"},{label:"桂林市",value:"450300",key:"450300"},{label:"柳州市",value:"450200",key:"450200"},{label:"崇左市",value:"451400",key:"451400"}]},{label:"山西省",value:"140000",key:"140000",children:[{label:"太原市",value:"140100",key:"140100"},{label:"临汾市",value:"141000",key:"141000"},{label:"忻州市",value:"140900",key:"140900"},{label:"运城市",value:"140800",key:"140800"},{label:"晋中市",value:"140700",key:"140700"},{label:"朔州市",value:"140600",key:"140600"},{label:"晋城市",value:"140500",key:"140500"},{label:"长治市",value:"140400",key:"140400"},{label:"阳泉市",value:"140300",key:"140300"},{label:"大同市",value:"140200",key:"140200"},{label:"吕梁市",value:"141100",key:"141100"}]},{label:"内蒙古自治区",value:"150000",key:"150000",children:[{label:"呼和浩特市",value:"150100",key:"150100"},{label:"锡林郭勒盟",value:"152500",key:"152500"},{label:"兴安盟",value:"152200",key:"152200"},{label:"乌兰察布市",value:"150900",key:"150900"},{label:"巴彦淖尔市",value:"150800",key:"150800"},{label:"呼伦贝尔市",value:"150700",key:"150700"},{label:"鄂尔多斯市",value:"150600",key:"150600"},{label:"通辽市",value:"150500",key:"150500"},{label:"赤峰市",value:"150400",key:"150400"},{label:"乌海市",value:"150300",key:"150300"},{label:"包头市",value:"150200",key:"150200"},{label:"阿拉善盟",value:"152900",key:"152900"}]},{label:"辽宁省",value:"210000",key:"210000",children:[{label:"沈阳市",value:"210100",key:"210100"},{label:"朝阳市",value:"211300",key:"211300"},{label:"铁岭市",value:"211200",key:"211200"},{label:"盘锦市",value:"211100",key:"211100"},{label:"辽阳市",value:"211000",key:"211000"},{label:"阜新市",value:"210900",key:"210900"},{label:"营口市",value:"210800",key:"210800"},{label:"锦州市",value:"210700",key:"210700"},{label:"丹东市",value:"210600",key:"210600"},{label:"本溪市",value:"210500",key:"210500"},{label:"抚顺市",value:"210400",key:"210400"},{label:"鞍山市",value:"210300",key:"210300"},{label:"大连市",value:"210200",key:"210200"},{label:"葫芦岛市",value:"211400",key:"211400"}]},{label:"吉林省",value:"220000",key:"220000",children:[{label:"长春市",value:"220100",key:"220100"},{label:"吉林市",value:"220200",key:"220200"},{label:"四平市",value:"220300",key:"220300"},{label:"辽源市",value:"220400",key:"220400"},{label:"通化市",value:"220500",key:"220500"},{label:"白山市",value:"220600",key:"220600"},{label:"松原市",value:"220700",key:"220700"},{label:"白城市",value:"220800",key:"220800"},{label:"延边朝鲜族自治州",value:"222400",key:"222400"}]},{label:"黑龙江省",value:"230000",key:"230000",children:[{label:"哈尔滨市",value:"230100",key:"230100"},{label:"绥化市",value:"231200",key:"231200"},{label:"黑河市",value:"231100",key:"231100"},{label:"牡丹江市",value:"231000",key:"231000"},{label:"七台河市",value:"230900",key:"230900"},{label:"佳木斯市",value:"230800",key:"230800"},{label:"伊春市",value:"230700",key:"230700"},{label:"大庆市",value:"230600",key:"230600"},{label:"双鸭山市",value:"230500",key:"230500"},{label:"鹤岗市",value:"230400",key:"230400"},{label:"鸡西市",value:"230300",key:"230300"},{label:"齐齐哈尔市",value:"230200",key:"230200"},{label:"大兴安岭地区",value:"232700",key:"232700"}]},{label:"江苏省",value:"320000",key:"320000",children:[{label:"南京市",value:"320100",key:"320100"},{label:"泰州市",value:"321200",key:"321200"},{label:"镇江市",value:"321100",key:"321100"},{label:"扬州市",value:"321000",key:"321000"},{label:"盐城市",value:"320900",key:"320900"},{label:"淮安市",value:"320800",key:"320800"},{label:"连云港市",value:"320700",key:"320700"},{label:"南通市",value:"320600",key:"320600"},{label:"苏州市",value:"320500",key:"320500"},{label:"常州市",value:"320400",key:"320400"},{label:"徐州市",value:"320300",key:"320300"},{label:"无锡市",value:"320200",key:"320200"},{label:"宿迁市",value:"321300",key:"321300"}]},{label:"浙江省",value:"330000",key:"330000",children:[{label:"杭州市",value:"330100",key:"330100"},{label:"台州市",value:"331000",key:"331000"},{label:"舟山市",value:"330900",key:"330900"},{label:"衢州市",value:"330800",key:"330800"},{label:"金华市",value:"330700",key:"330700"},{label:"绍兴市",value:"330600",key:"330600"},{label:"湖州市",value:"330500",key:"330500"},{label:"嘉兴市",value:"330400",key:"330400"},{label:"温州市",value:"330300",key:"330300"},{label:"宁波市",value:"330200",key:"330200"},{label:"丽水市",value:"331100",key:"331100"}]},{label:"安徽省",value:"340000",key:"340000",children:[{label:"合肥市",value:"340100",key:"340100"},{label:"池州市",value:"341700",key:"341700"},{label:"亳州市",value:"341600",key:"341600"},{label:"六安市",value:"341500",key:"341500"},{label:"巢湖市",value:"341400",key:"341400"},{label:"宿州市",value:"341300",key:"341300"},{label:"阜阳市",value:"341200",key:"341200"},{label:"滁州市",value:"341100",key:"341100"},{label:"黄山市",value:"341000",key:"341000"},{label:"安庆市",value:"340800",key:"340800"},{label:"铜陵市",value:"340700",key:"340700"},{label:"淮北市",value:"340600",key:"340600"},{label:"马鞍山市",value:"340500",key:"340500"},{label:"淮南市",value:"340400",key:"340400"},{label:"蚌埠市",value:"340300",key:"340300"},{label:"芜湖市",value:"340200",key:"340200"},{label:"宣城市",value:"341800",key:"341800"}]},{label:"福建省",value:"350000",key:"350000",children:[{label:"福州市",value:"350100",key:"350100"},{label:"厦门市",value:"350200",key:"350200"},{label:"莆田市",value:"350300",key:"350300"},{label:"三明市",value:"350400",key:"350400"},{label:"泉州市",value:"350500",key:"350500"},{label:"漳州市",value:"350600",key:"350600"},{label:"南平市",value:"350700",key:"350700"},{label:"龙岩市",value:"350800",key:"350800"},{label:"宁德市",value:"350900",key:"350900"}]},{label:"江西省",value:"360000",key:"360000",children:[{label:"南昌市",value:"360100",key:"360100"},{label:"抚州市",value:"361000",key:"361000"},{label:"宜春市",value:"360900",key:"360900"},{label:"吉安市",value:"360800",key:"360800"},{label:"赣州市",value:"360700",key:"360700"},{label:"鹰潭市",value:"360600",key:"360600"},{label:"新余市",value:"360500",key:"360500"},{label:"九江市",value:"360400",key:"360400"},{label:"萍乡市",value:"360300",key:"360300"},{label:"景德镇市",value:"360200",key:"360200"},{label:"上饶市",value:"361100",key:"361100"}]},{label:"山东省",value:"370000",key:"370000",children:[{label:"济南市",value:"370100",key:"370100"},{label:"滨州市",value:"371600",key:"371600"},{label:"聊城市",value:"371500",key:"371500"},{label:"德州市",value:"371400",key:"371400"},{label:"临沂市",value:"371300",key:"371300"},{label:"莱芜市",value:"371200",key:"371200"},{label:"日照市",value:"371100",key:"371100"},{label:"威海市",value:"371000",key:"371000"},{label:"泰安市",value:"370900",key:"370900"},{label:"济宁市",value:"370800",key:"370800"},{label:"潍坊市",value:"370700",key:"370700"},{label:"烟台市",value:"370600",key:"370600"},{label:"东营市",value:"370500",key:"370500"},{label:"枣庄市",value:"370400",key:"370400"},{label:"淄博市",value:"370300",key:"370300"},{label:"青岛市",value:"370200",key:"370200"},{label:"菏泽市",value:"371700",key:"371700"}]},{label:"河南省",value:"410000",key:"410000",children:[{label:"郑州市",value:"410100",key:"410100"},{label:"驻马店市",value:"411700",key:"411700"},{label:"周口市",value:"411600",key:"411600"},{label:"信阳市",value:"411500",key:"411500"},{label:"商丘市",value:"411400",key:"411400"},{label:"南阳市",value:"411300",key:"411300"},{label:"三门峡市",value:"411200",key:"411200"},{label:"漯河市",value:"411100",key:"411100"},{label:"许昌市",value:"411000",key:"411000"},{label:"濮阳市",value:"410900",key:"410900"},{label:"焦作市",value:"410800",key:"410800"},{label:"新乡市",value:"410700",key:"410700"},{label:"鹤壁市",value:"410600",key:"410600"},{label:"安阳市",value:"410500",key:"410500"},{label:"平顶山市",value:"410400",key:"410400"},{label:"洛阳市",value:"410300",key:"410300"},{label:"开封市",value:"410200",key:"410200"},{label:"（省直辖县级行政区划）",value:"419000",key:"419000"}]},{label:"湖北省",value:"420000",key:"420000",children:[{label:"武汉市",value:"420100",key:"420100"},{label:"恩施土家族苗族自治州",value:"422800",key:"422800"},{label:"随州市",value:"421300",key:"421300"},{label:"咸宁市",value:"421200",key:"421200"},{label:"黄冈市",value:"421100",key:"421100"},{label:"荆州市",value:"421000",key:"421000"},{label:"孝感市",value:"420900",key:"420900"},{label:"荆门市",value:"420800",key:"420800"},{label:"鄂州市",value:"420700",key:"420700"},{label:"襄樊市",value:"420600",key:"420600"},{label:"宜昌市",value:"420500",key:"420500"},{label:"十堰市",value:"420300",key:"420300"},{label:"黄石市",value:"420200",key:"420200"},{label:"（省直辖县级行政区划）",value:"429000",key:"429000"}]},{label:"湖南省",value:"430000",key:"430000",children:[{label:"长沙市",value:"430100",key:"430100"},{label:"娄底市",value:"431300",key:"431300"},{label:"怀化市",value:"431200",key:"431200"},{label:"永州市",value:"431100",key:"431100"},{label:"郴州市",value:"431000",key:"431000"},{label:"益阳市",value:"430900",key:"430900"},{label:"张家界市",value:"430800",key:"430800"},{label:"常德市",value:"430700",key:"430700"},{label:"岳阳市",value:"430600",key:"430600"},{label:"邵阳市",value:"430500",key:"430500"},{label:"衡阳市",value:"430400",key:"430400"},{label:"湘潭市",value:"430300",key:"430300"},{label:"株洲市",value:"430200",key:"430200"},{label:"湘西土家族苗族自治州",value:"433100",key:"433100"}]},{label:"广东省",value:"440000",key:"440000",children:[{label:"广州市",value:"440100",key:"440100"},{label:"汕尾市",value:"441500",key:"441500"},{label:"河源市",value:"441600",key:"441600"},{label:"阳江市",value:"441700",key:"441700"},{label:"清远市",value:"441800",key:"441800"},{label:"东莞市",value:"441900",key:"441900"},{label:"中山市",value:"442000",key:"442000"},{label:"潮州市",value:"445100",key:"445100"},{label:"揭阳市",value:"445200",key:"445200"},{label:"梅州市",value:"441400",key:"441400"},{label:"惠州市",value:"441300",key:"441300"},{label:"肇庆市",value:"441200",key:"441200"},{label:"韶关市",value:"440200",key:"440200"},{label:"深圳市",value:"440300",key:"440300"},{label:"珠海市",value:"440400",key:"440400"},{label:"汕头市",value:"440500",key:"440500"},{label:"佛山市",value:"440600",key:"440600"},{label:"江门市",value:"440700",key:"440700"},{label:"湛江市",value:"440800",key:"440800"},{label:"茂名市",value:"440900",key:"440900"},{label:"云浮市",value:"445300",key:"445300"}]},{label:"澳门特别行政区",value:"820000",key:"820000",children:[{label:"澳门特别行政区",value:"820100",key:"820100"}]}]},1702:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"focus",value:function(e){return o.default.post("/user/customer/v2/focus",{customerIds:e.join(",")})}},{key:"unfocus",value:function(e){return o.default.post("/user/customer/unfocus",{customerId:e})}},{key:"add",value:function(e){return o.default.post("/customer/v2/add",e)}},{key:"addOpensea",value:function(e){return o.default.post("/customer/add_opensea",e)}},{key:"addPool",value:function(e){return o.default.post("/customer/add_pool",e)}},{key:"update_info",value:function(e){return o.default.post("/customer/update_info",e)}},{key:"update_contact",value:function(e){return o.default.post("/customer/update_contact",e)}},{key:"update_assets",value:function(e){return o.default.post("/customer/update_assets",e)}},{key:"update_credentials",value:function(e){return o.default.post("/customer/update_credentials",e)}},{key:"update_status",value:function(e){return o.default.post("/customer/update_status",e)}},{key:"tag_get_customer",value:function(){return o.default.get("/customer/tag/get_customer_tag")}},{key:"tag_get_top",value:function(){return o.default.get("/customer/tag/get_top")}},{key:"get_detail",value:function(e){return o.default.get("/customer/v2/get_detail",{id:e})}},{key:"get_detail_from_opensea",value:function(e){return o.default.get("/customer/opensea/get_detail",{id:e})}},{key:"check_mobile",value:function(e){return o.default.get("/customer/validate_mobile",{mobile:e},{errorHandle:function(e){console.log(e)}})}},{key:"follow",value:function(e){return o.default.post("/customer/follow/add",e)}},{key:"gets_follow",value:function(e){return o.default.get("/customer/follow/get_page",e)}},{key:"gets_dynamic",value:function(e){return o.default.get("/msg/feed/get_customer_page",e)}},{key:"get_selection",value:function(e){return o.default.post("/customer/get_my_selections",{name:e})}},{key:"back",value:function(e){return o.default.post("/customer/v2/back/apply",e)}},{key:"audit",value:function(e){return o.default.post("/customer/back/audit",e)}},{key:"allot_to_fp",value:function(e){return o.default.post("/customer/v2/distribution/allot_to_fp",e)}},{key:"allot_to_cs",value:function(e){return o.default.post("/customer/v2/distribution/allot_to_cs",e)}},{key:"recycle",value:function(e){return o.default.post("/customer/v2/distribution/recycle",e)}},{key:"get_count",value:function(e){return o.default.get("/customer/sale/gets_count",{customerId:e})}},{key:"getRiskEvaluationResult",value:function(e){return o.default.get("/customer/get/risk_evaluation_result",{customerId:e})}},{key:"receive",value:function(e){return o.default.post("/customer/opensea/receive_customer",{customerId:e})}}]),e}();t.default=i},1703:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var a=this;e[t]=function(){var e=void 0;if(a.props[t]){var n;e=(n=a.props)[t].apply(n,arguments)}return"onChange"!=t&&(e=e||a[t].apply(a,arguments)),e}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),f=a(730),p=n(f),v=a(242),h=n(v),y=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.mounted=!1,a.state={loading:!0,data:[]},a}return o(t,e),s(t,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentWillMount",value:function(){this.props.disabledAutoLoad&&this.setState({loading:!1})}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"rebuildProps",value:function(){var e=void 0;e=(0,h.default)(!0,{},this.props),i.call(this,e,"beforeLoad"),i.call(this,e,"loadSuccess"),i.call(this,e,"onChange"),this.buildProps=e}},{key:"beforeLoad",value:function(e){return this.setState({loading:!0}),e}},{key:"loadSuccess",value:function(e){return this.mounted&&this.setState({loading:!1,data:e.data.result.datas}),e}},{key:"toggleSortOrder",value:function(e,t){this.refs.grid.toggleSortOrder(e,t)}},{key:"onChange",value:function(e,t,a){this.setState({pagination:e,filters:t,sorter:a}),this.refs.grid.fetch(void 0,e,t,a)}},{key:"load",value:function(){this.setState({loading:!0});for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.refs.grid.fetch.apply(this.refs.grid,t)}},{key:"fetch",value:function(){this.load.apply(this,arguments)}},{key:"reload",value:function(){console.log("this.refs.grid.state.pagination",this.refs.grid.state.pagination);var e=this.refs.grid.state.pagination;this.load(null,e)}},{key:"showTotal",value:function(){try{return"共"+this.refs.grid.state.pagination.total+"条"}catch(e){}}},{key:"render",value:function(){var e=this;return this.rebuildProps(),d.default.createElement(p.default,u({dataSource:this.state.data||this.props.dataSource,loading:this.state.loading,pagination:!1!==this.props.pagination&&(this.props.pagination?this.props.pagination:{showTotal:function(){return e.showTotal()},showQuickJumper:!0,showSizeChanger:!0}),ref:"grid"},this.buildProps))}}]),t}(c.Component);t.default=y},1704:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"get_fields",value:function(e){return o.default.get("/product/get_fields",{typeId:e})}},{key:"add",value:function(e){return o.default.post("/product/add",e)}},{key:"update_base",value:function(e){return o.default.post("/product/base/update",e)}},{key:"update_status",value:function(e){return o.default.post("/product/update_status",e)}},{key:"del",value:function(e){return o.default.post("/product/delete",e)}},{key:"audit",value:function(e){return o.default.post("/product/control/audit/do",e)}},{key:"auditRecord",value:function(e){return o.default.get("/product/control/audit/get_history_audit_detail",{productId:e})}},{key:"update_base",value:function(e){return o.default.post("/product/base/update",e)}},{key:"update_sale",value:function(e){return o.default.post("/product/sale/update",e)}},{key:"update_quotation",value:function(e){return o.default.post("/product/supplier_quotation/update",e)}},{key:"update_commission",value:function(e){return o.default.post("/product/commission/update",e)}},{key:"update_income",value:function(e){return o.default.post("/product/income/update",e)}},{key:"focus",value:function(e){return o.default.post("/product/focus",{ids:e.join(",")})}},{key:"un_focus",value:function(e){return o.default.post("/product/cancel_focus",{ids:e.join(",")})}},{key:"get_detail",value:function(e){return o.default.get("/product/get_detail_by_id",{id:e})}},{key:"attach_add",value:function(e){return o.default.post("/product/attach/add",e)}},{key:"attach_update",value:function(e){return o.default.post("/product/attach/update",e)}},{key:"attach_delete",value:function(e){return o.default.post("/product/attach/delete",{id:e})}},{key:"get_product",value:function(e){return o.default.get("/product/get_select_option_list",{name:e})}},{key:"get_appointment_product",value:function(e){return o.default.get("/product/get_select_option_selling",{name:e})}},{key:"get_declaration_product",value:function(e){return o.default.get("/product/get_select_option_for_declaration",{name:e})}}]),e}();t.default=i},1705:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,".grid_sort_filter___2pbHD{border-bottom:1px solid #e0e4e8;padding-bottom:12px;font-family:PingFangSC-Regular,sans-serif;font-size:12px;margin-bottom:12px}.grid_sort_filter___2pbHD a{display:block;color:#475272}.grid_sort_filter___2pbHD a img{width:10px;margin-right:8px}.advancedsearch___1uLI_{position:relative;padding-bottom:10px}.advancedsearch___1uLI_ .filterForm___1hilo{display:none;padding-top:10px;background-color:#fff;transition:height .3s ease-in-out}.advancedsearch___1uLI_ .filterForm___1hilo.show___1EFtI{display:block}.advancedsearch___1uLI_ .more___3y3u-{margin-right:10px;padding-bottom:10px}.advancedsearch___1uLI_ .more___3y3u-:hover .filterForm___1hilo{display:block}.advancedsearch___1uLI_ .ant-tag{margin-bottom:10px}",""]),t.locals={grid_sort_filter:"grid_sort_filter___2pbHD",advancedsearch:"advancedsearch___1uLI_",filterForm:"filterForm___1hilo",show:"show___1EFtI",more:"more___3y3u-"}},1706:function(e,t,a){"use strict";function n(){if(u.length)throw u.shift()}function l(e){var t;t=i.length?i.pop():new r,t.task=e,o(t)}function r(){this.task=null}var o=a(1699),i=[],u=[],s=o.makeRequestCallFromTimer(n);e.exports=l,r.prototype.call=function(){try{this.task.call()}catch(e){l.onerror?l.onerror(e):(u.push(e),s())}finally{this.task=null,i[i.length]=this}}},1707:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(12),d=n(c),f=a(42),p=a(1701),v=n(p),h=a(1709),y=n(h),m=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={treeData:v.default,value:e.defaultValue||e.value||""},a}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.dom=d.default.findDOMNode(this),this.props.setCitys&&this.props.setCitys.call(this,this)}},{key:"onChange",value:function(e,t){this.setState({value:e}),this.props.onChange&&this.props.onChange.call(this,{value:e,text:t})}},{key:"clear",value:function(){this.setState({value:[]})}},{key:"loadData",value:function(e){var t=e.props.eventKey;return this.findPronvice(t).children?new y.default(function(e){e()}):this.loadCitysByPronviceCode(t)}},{key:"setContainer",value:function(e){return this.dom||document.body}},{key:"render",value:function(){var e=this.state.treeData,t={treeData:e,value:this.state.value,onChange:this.onChange.bind(this),multiple:!0,treeCheckable:!0,showCheckedStrategy:f.TreeSelect.SHOW_CHILD,searchPlaceholder:"请选择城市",notFoundContent:"没有找到城市",getPopupContainer:this.setContainer.bind(this),dropdownStyle:"citys-dropdown",treeNodeFilterProp:"label",style:{width:300,position:"relative"}};return s.default.createElement("div",{className:"citys"},s.default.createElement(f.TreeSelect,t))}}]),t}(u.Component);t.default=m},1708:function(e,t,a){var n=a(1705);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1709:function(e,t,a){"use strict";e.exports=a(1713)},1710:function(e,t,a){"use strict";var n=a(1696);e.exports=n,n.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},1711:function(e,t,a){"use strict";function n(e){var t=new l(l._61);return t._65=1,t._55=e,t}var l=a(1696);e.exports=l;var r=n(!0),o=n(!1),i=n(null),u=n(void 0),s=n(0),c=n("");l.resolve=function(e){if(e instanceof l)return e;if(null===e)return i;if(void 0===e)return u;if(!0===e)return r;if(!1===e)return o;if(0===e)return s;if(""===e)return c;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new l(t.bind(e))}catch(e){return new l(function(t,a){a(e)})}return n(e)},l.all=function(e){var t=Array.prototype.slice.call(e);return new l(function(e,a){function n(o,i){if(i&&("object"==typeof i||"function"==typeof i)){if(i instanceof l&&i.then===l.prototype.then){for(;3===i._65;)i=i._55;return 1===i._65?n(o,i._55):(2===i._65&&a(i._55),void i.then(function(e){n(o,e)},a))}var u=i.then;if("function"==typeof u){return void new l(u.bind(i)).then(function(e){n(o,e)},a)}}t[o]=i,0==--r&&e(t)}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)n(o,t[o])})},l.reject=function(e){return new l(function(t,a){a(e)})},l.race=function(e){return new l(function(t,a){e.forEach(function(e){l.resolve(e).then(t,a)})})},l.prototype.catch=function(e){return this.then(null,e)}},1712:function(e,t,a){"use strict";var n=a(1696);e.exports=n,n.prototype.finally=function(e){return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})}},1713:function(e,t,a){"use strict";e.exports=a(1696),a(1710),a(1712),a(1711),a(1714),a(1715)},1714:function(e,t,a){"use strict";function n(e,t){for(var a=[],n=0;n<t;n++)a.push("a"+n);var l=["return function ("+a.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(a).concat([i]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],l)(r,e)}function l(e){for(var t=Math.max(e.length-1,3),a=[],n=0;n<t;n++)a.push("a"+n);var l=["return function ("+a.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+i+";","var res;","switch (argLength) {",a.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(a.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],l)(r,e)}var r=a(1696),o=a(1706);e.exports=r,r.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?n(e,t):l(e)};var i="function (err, res) {if (err) { rj(err); } else { rs(res); }}";r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),a="function"==typeof t[t.length-1]?t.pop():null,n=this;try{return e.apply(this,arguments).nodeify(a,n)}catch(e){if(null===a||void 0===a)return new r(function(t,a){a(e)});o(function(){a.call(n,e)})}}},r.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(a){o(function(){e.call(t,null,a)})},function(a){o(function(){e.call(t,a)})})}},1715:function(e,t,a){"use strict";var n=a(1696);e.exports=n,n.enableSynchronous=function(){n.prototype.isPending=function(){return 0==this.getState()},n.prototype.isFulfilled=function(){return 1==this.getState()},n.prototype.isRejected=function(){return 2==this.getState()},n.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},n.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},n.prototype.getState=function(){return 3===this._65?this._55.getState():-1===this._65||-2===this._65?0:this._65}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},1720:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),f=a(42),p=a(357),v=(n(p),a(95)),h=n(v),y=a(188),m=(n(y),a(359)),b=n(m),g=a(84),k=n(g),_=void 0,w=f.Select.Option,E=function(e){function t(){var e,a,n,l;r(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return a=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state={list:[],notFoundContent:null},n.getSearchCache=function(){var e=n.cacheName;if(console.log(n.cacheName),["search_customer_cache"].indexOf(e)>-1)return[];var t=n.storage.get(e)||[];return n.unique(t)},n.unique=function(e){var t=[],a=[];e.map(function(e){e&&-1==t.indexOf(e.key)&&(a.push({key:e.key,value:e.key,label:e.label}),t.push(e.key))});return a},n.updateSearchCache=function(e){var t=n.cacheName,a=n.getSearchCache(t);e&&t&&(a.unshift(e),n.storage.set(t,n.unique(a).splice(0,5)))},n.onSearch=function(){function e(){l(t).then(function(e){if(_===t&&e.success){var a=[];e.result.forEach(function(e){a.push(r(e))}),i.setState({list:a,notFoundContent:"无匹配结果"})}})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=n.props,l=a.request,r=a.format;a.name;if(!(t=t.replace(/(^\s*)|(\s*)$/g,""))&&!n.isProduct()&&!n.isVideo()){var o=n.getSearchCache();return void n.setState({list:o,notFoundContent:null})}n.timeout&&(clearTimeout(n.timeout),n.timeout=null);var i=n;_=t,n.timeout=setTimeout(e,300)},n.isProduct=function(){return["productId"].indexOf(n.props.name)>-1},n.isVideo=function(){return["videoId"].indexOf(n.props.name)>-1},n.onChange=function(e){var t={},a=[],l=void 0,r=n.props,o=r.name,i=r.formUtils;t[o]=e?e.key:"",i&&i.setFieldsValue(t),n.setState({selected:e||null}),e&&n.state.list&&(l=n.state.list.find(function(t){return t.value==e.key}),l.key=e.key),n.props.callback&&n.props.callback(l),n.isProduct()||n.isVideo()?n.onSearch():(e&&void 0!=e?n.updateSearchCache(e):a=n.getSearchCache(),n.setState({list:a}))},l=a,o(n,l)}return i(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this.props,t=(e.request,e.format,e.name),a=e.initData;h.default.getStorage("userInfo").id;if(this.cache=[],this.storage=new b.default("local","local"),["assistantId","receiverId","leaderId"].indexOf(t)>-1&&(this.cacheName="search_office_worker_cache"),this.isVideo()&&(this.cacheName="search_videoId_cache",this.onSearch("")),["customerId"].indexOf(t)>-1&&(this.cacheName="search_customer_cache"),this.isProduct()&&(this.cacheName="search_productId_cache",this.onSearch("")),!a||!a.value)if(this.isProduct()||this.isVideo())this.onSearch("");else{var n=this.getSearchCache();this.setState({list:n})}this.timeout=null}},{key:"render",value:function(){var e=this,t=this.props,a=t.initData,n=void 0===a?{}:a,r=t.placeholder,o=t.disabled,i=(l(t,["initData","placeholder","disabled"]),this.state.notFoundContent),s={};return n&&n.value&&(s.defaultValue={key:n.value.toString(),label:n.label}),d.default.createElement(f.Select,u({placeholder:r||"请输入选择",getPopupContainer:function(){return e.props.popupContainer?e.props.popupContainer:e.props.name?document.getElementById(e.props.name+"_FormItem"):document.body},labelInValue:!0,showSearch:!0,allowClear:!0,disabled:o,notFoundContent:i},s,{filterOption:!1,onSearch:this.onSearch,onChange:this.onChange}),this.state.list.map(function(e){return d.default.createElement(w,{key:e.value,disabled:e.disabled},e.label)}))}}]),t}(k.default);t.default=E},1721:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],a={},n={};for(var l in e)t.push(e[l]),a[l]=e[l].value,n[e[l].value]=e[l].text;return{dictionary:t,enum:a,keyValue:n}}},1726:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"add",value:function(e){return o.default.post("/declaration/add",e)}},{key:"center_add",value:function(e){return o.default.post("/declaration/pc_add",e)}},{key:"declaration_patch",value:function(e){return o.default.post("/declaration/patch",e)}},{key:"appint_add",value:function(e){return o.default.post("/reservation/submit_declaration",e)}},{key:"get_detail",value:function(e){return o.default.get("/declaration/get",{id:e})}},{key:"validate",value:function(e){return o.default.post("/declaration/validate",{id:e},{errorHandle:function(e){}})}},{key:"cancel",value:function(e){return o.default.post("/declaration/cancel",e)}},{key:"submit",value:function(e){return o.default.post("/declaration/submit",{id:e},{errorHandle:function(e){}})}},{key:"resubmit",value:function(e){return o.default.post("/declaration/resubmit",e)}},{key:"refund",value:function(e){return o.default.post("/declaration/apply_refund",e)}},{key:"update_credentials",value:function(e){return o.default.post("/declaration/update_credentials",e)}},{key:"update_subscribe",value:function(e){return o.default.post("/declaration/update_subscribe",e)}},{key:"update_bank",value:function(e){return o.default.post("/declaration/update_bank",e)}},{key:"update_compliance",value:function(e){return o.default.post("/declaration/update_compliance",e)}},{key:"audit",value:function(e){return o.default.post("/declaration/audit/do",e)}},{key:"discard",value:function(e){return o.default.post("/declaration/audit/discard",e)}},{key:"audit_record",value:function(e){return o.default.get("/declaration/audit/gets_audit_record",e)}}]),e}();t.default=i},1729:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(42),d=a(729),f=n(d),p=a(1704),v=n(p),h=null,y=function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,visible:!1,showOnce:!1},n.show=function(e){var t=n;n.state.showOnce?n.setVisible(e):a.e(63).then(function(n){h=a(1728).default,t.setState({showOnce:!0},function(){t.setVisible(e)})}.bind(null,a)).catch(a.oe)},n.setVisible=function(e){n.visible(),n.setState({loading:!0,data:e},function(){n.loadData()})},n.updateData=function(e){n.setState({data:e})},n.loadData=function(){var e=n.state.data,t=(e.open_source,e.id);n.product.get_detail(t).then(function(e){if(e.success){var t=e.result;n.setState({data:t,loading:!1})}else n.setState({loading:!1,error:!0,message:e.message})})},n.reloading=function(){n.setState({loading:!0}),n.loadData()},n.product=new v.default,n}return o(t,e),i(t,[{key:"hide",value:function(){this.setState({visible:!1})}},{key:"getDetailClass",value:function(){var e=void 0;return e=[],e.push("float-detail-wrap"),this.state.visible&&e.push("open"),this.state.loading&&e.push("loading"),e.join(" ")}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{className:this.getDetailClass()},this.state.loading?s.default.createElement(c.Spin,null):this.state.data?s.default.createElement("div",{className:"float-detail",ref:function(t){t&&(e.affixContainer=t)}},this.state.error?s.default.createElement("div",{onClick:this.reloading},this.state.message,",点击重新加载"):s.default.createElement(h,{mod:this,data:this.state.data})):null)}}]),t}(f.default);t.default=y},1732:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(42),d=a(729),f=n(d),p=a(1702),v=n(p),h=null,y=function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,visible:!1},n.show=function(e){var t=n;n.state.showOnce?n.setVisible(e):a.e(64).then(function(n){h=a(1731).default,t.setState({showOnce:!0},function(){t.setVisible(e)})}.bind(null,a)).catch(a.oe)},n.setVisible=function(e){n.visible(),n.setState({loading:!0,data:e},function(){n.loadData()})},n.loadData=function(){var e=n.state.data,t=e.id,a=e.open_source,l=n.customer.get_detail;"customer_opensea"==a&&(l=n.customer.get_detail_from_opensea),l(t).then(function(e){if(n.setState({loading:!1}),e.success){var a=e.result;a.id=t,n.setState({data:a,id:t})}})},n.reloading=function(){n.setState({loading:!0},function(){n.loadData()})},n.refreshGrid=function(){n.props.reload&&n.props.reload()},n.handleCallback=function(){n.customerDetail.handleRefreshDynamic()},n.customer=new v.default,n}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"getDetailClass",value:function(){var e=void 0;return e=[],e.push("float-detail-wrap float-customer-detail-wrap"),this.state.visible&&e.push("open"),this.state.loading&&e.push("loading"),e.join(" ")}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{className:this.getDetailClass()},this.state.loading?s.default.createElement(c.Spin,null):s.default.createElement("div",{className:"float-detail",ref:function(t){t&&(e.affixContainer=t)}},this.state.data?s.default.createElement(h,{ref:function(t){e.customerDetail=t},mod:this,data:this.state.data}):null))}}]),t}(f.default);t.default=y},1734:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,".modal___18rtF{max-width:none;overflow-y:auto}.modal___18rtF .ant-modal-body{padding:30px 20px 0 40px}.modal___18rtF .ant-modal-body .ant-form-item-label label{line-height:30px}",""]),t.locals={modal:"modal___18rtF"}},1738:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),c=n(s),d=a(1),f=(n(d),a(42)),p=a(84),v=n(p),h=a(357),y=n(h),m=a(1739),b=n(m),g=f.Form.Item,k=f.Input.TextArea,_=function(e){function t(){return l(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"componentWillMount",value:function(){this.props.formUtils.setForm(this.props.form)}},{key:"render",value:function(){var e={labelCol:{span:6},wrapperCol:{span:17}};return c.default.createElement(f.Form,{className:"float-slide-form vant-spin"},c.default.createElement(g,i({label:this.props.labelName||"驳回原因"},e),c.default.createElement(f.Col,null,this.props.formUtils.getFieldDecorator("reason",{validateTrigger:["onChange","onBlur"],rules:[{required:this.props.required,type:"string",whitespace:!0,message:"请填写长度不超过50个字符",min:1,max:50}]})(c.default.createElement(k,{rows:3})))))}}]),t}(c.default.Component);_.defaultProps={required:!0};var w=f.Form.create()(_),E=function(e){function t(){l(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.commit=function(t){e.setState({confirmLoading:t})},e.handleCancel=function(){e.hide()},e.handleOk=function(t){e.formUtils.validateFields(function(t){if(!t){e.setState({confirmLoading:!0});var a=e.formUtils.getFieldsValue();"function"==typeof e.props.callback&&e.props.callback(a,e)}})},e.state={visible:!1},e.formUtils=new y.default("auditForm"),e}return o(t,e),u(t,[{key:"show",value:function(){this.setState({visible:!0})}},{key:"hide",value:function(){var e=this;this.setState({visible:!1,confirmLoading:!1},function(){e.formUtils.resetFields()})}},{key:"render",value:function(){return c.default.createElement(f.Modal,{visible:this.state.visible,closable:!1,confirmLoading:this.state.confirmLoading,title:this.props.title||"驳回申请",width:500,className:"vant-modal yundao-modal "+b.default.modal,wrapClassName:"showfloat vertical-center-modal",onOk:this.handleOk,onCancel:this.handleCancel},c.default.createElement(w,{formUtils:this.formUtils,labelName:this.props.labelName,required:this.props.required}))}}]),t}(v.default);t.default=E},1739:function(e,t,a){var n=a(1734);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1753:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"add",value:function(e){return o.default.post("/reservation/add",e)}},{key:"center_add",value:function(e){return o.default.post("/product/center/reservation",e)}},{key:"update",value:function(e){return o.default.post("/reservation/update",e)}},{key:"get",value:function(e){return o.default.get("/reservation/get",{id:e})}},{key:"cancel",value:function(e){return o.default.post("/reservation/cancel",e)}},{key:"again_commit",value:function(e){return o.default.post("/reservation/again_commit",e)}},{key:"audit",value:function(e){return o.default.post("/reservation/audit/do",e)}},{key:"get_my_select",value:function(e){return o.default.get("/reservation/gets/my_select",{productId:e})}},{key:"discard",value:function(e){return o.default.post("/reservation/audit/discard",e)}},{key:"audit_record",value:function(e){return o.default.get("/reservation/audit/gets_audit_record",e)}}]),e}();t.default=i},1774:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(42),d=a(729),f=n(d),p=a(1726),v=n(p),h=null,y=function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!0,visible:!1},n.show=function(e){var t=n;n.state.showOnce?n.setVisible(e):a.e(66).then(function(n){h=a(1761).default,t.setState({showOnce:!0},function(){t.setVisible(e)})}.bind(null,a)).catch(a.oe)},n.setVisible=function(e){n.visible(),n.setState({loading:!0,data:e},function(){n.loadData()})},n.loadData=function(){var e=n.state.data.id;return n.declaration.get_detail(e).then(function(t){if(t.success){var a=t.result;a.id=e,n.setState({data:a,id:e,loading:!1})}else n.setState({loading:!1,error:!0});return t})},n.reloading=function(){n.setState({loading:!0}),n.loadData()},n.declaration=new v.default,n}return o(t,e),i(t,[{key:"hide",value:function(){this.setState({visible:!1})}},{key:"getDetailClass",value:function(){var e=void 0;return e=[],e.push("float-detail-wrap float-declaration-detail-wrap"),this.state.visible&&e.push("open"),this.state.loading&&e.push("loading"),e.join(" ")}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{className:this.getDetailClass()},this.state.loading?s.default.createElement(c.Spin,null):s.default.createElement("div",{className:"float-detail",ref:function(t){t&&(e.affixContainer=t)}},this.state.error?s.default.createElement("div",{onClick:this.reloading},"数据有误，点击尝试重新加载"):this.state.data?s.default.createElement(h,{mod:this,data:this.state.data}):null))}}]),t}(f.default);t.default=y},1790:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,".modal___1773E .ant-modal-body{padding:35px 40px}.modal___1773E .ant-modal-body .ant-calendar-picker{width:100%}.modal___1773E .ant-modal-body .ant-input-number-lg{width:92%}.modal___1773E .ant-modal-body .ant-input-number-lg .ant-input-number-input{height:35px}.ant-confirm-confirm .ant-confirm-body>.anticon-check-circle{color:#00a854}",""]),t.locals={modal:"modal___1773E"}},1794:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),c=n(s),d=a(12),f=n(d),p=a(85),v=a(42),h=a(84),y=n(h),m=a(357),b=n(m),g=a(1702),k=n(g),_=a(33),w=n(_),E=a(1704),C=n(E),O=a(1720),D=n(O),S=v.Form.Item,F=v.Radio.Group,j=function(e){function t(){l(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.products=[],e.handleChangeProduct=function(t){if(t){var a=e.products[t.key],n=a.canReservation,l=a.notCanReservationTitle;e.setState({canReservation:n,notCanReservationTitle:l}),e.props.onChange&&e.props.onChange(n)}},e.state={loading:!1},e.formUtils=new b.default("EditAppointmentForm"),e}return o(t,e),u(t,[{key:"componentWillMount",value:function(){this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this),this.product=new C.default,this.customer=new k.default}},{key:"getFormClassName",value:function(){var e=void 0;return e=["float-slide-form","vant-spin","follow-form"],this.state.loading&&e.push("loading"),e.join(" ")}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.initFields,l=t.isEdit,r={labelCol:{span:7},wrapperCol:{span:17}},o=this.state,u=o.canReservation,s=void 0!==u&&u,d=o.notCanReservationTitle;return c.default.createElement(v.Form,{className:this.getFormClassName(),ref:function(t){return e.container=f.default.findDOMNode(t)}},l?c.default.createElement("div",null,c.default.createElement(S,i({label:"产品名称"},r),c.default.createElement("div",{id:"productId_FormItem"},n&&n.indexOf("productId")>-1?c.default.createElement("div",null,a.productName):c.default.createElement(D.default,{placeholder:"请输入并选择产品",request:this.product.get_appointment_product,format:function(t){return t.value=t.id,t.label=t.name,e.products[t.id]=t,t},callback:this.handleChangeProduct,formUtils:this.props.formUtils,name:"productId",initData:{label:a.productName,value:a.productId}}),this.formUtils.getFieldDecorator("productId",{initialValue:a.productId,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入并选择产品"}]})(c.default.createElement(v.Input,{type:"hidden"})))),d?c.default.createElement(S,i({label:"    "},r),d,d.indexOf("直接报单")>-1?c.default.createElement(p.Link,{to:"/sale/declaration"},"去报单"):null):s||a.productId?c.default.createElement("div",null,c.default.createElement(S,i({label:""},r,{style:{display:"none"}}),this.formUtils.getFieldDecorator("source",{initialValue:null})(c.default.createElement(v.Input,{type:"hidden"}))),c.default.createElement(S,i({label:""},r,{style:{display:"none"}}),this.formUtils.getFieldDecorator("channelId",{initialValue:null})(c.default.createElement(v.Input,{type:"hidden"}))),c.default.createElement(S,i({label:"客户/渠道"},r),c.default.createElement("div",{id:"customerId_FormItem"},c.default.createElement(D.default,{placeholder:"请输入并选择客户或渠道",request:this.customer.get_selection,format:function(e){return e.value=e.id,e.label=e.name+"("+e.mobile+")",e},formUtils:this.props.formUtils,name:"customerId",initData:{label:a.customerName,value:a.customerId},callback:function(t){e.formUtils.setFieldsValue({source:t?t.source:null,channelId:t?t.id:null})}}),this.formUtils.getFieldDecorator("customerId",{initialValue:a.customerId?a.customerId.toString():null,rules:[{validateTrigger:["onChange","onBlur"],required:!0,message:"请输入并选择客户或渠道"}]})(c.default.createElement(v.Input,{type:"hidden"})))),2===this.formUtils.getFieldValue("source")?c.default.createElement("div",null,c.default.createElement(v.Row,null,c.default.createElement(v.Col,{span:7}),c.default.createElement(v.Col,{span:17},"您选择的是渠道，请选择该渠道出单的类型")),c.default.createElement(S,i({label:"   "},r),this.formUtils.getFieldDecorator("customerType",{initialValue:"1"})(c.default.createElement(F,null,c.default.createElement(v.Radio,{value:"1",key:"1"},"为个人出单"),c.default.createElement(v.Radio,{value:"2",key:"2"},"为机构出单"))))):null,c.default.createElement(S,i({label:"预计打款日期"},r),this.formUtils.getFieldDecorator("estimatePayDate",{initialValue:a.estimatePayDate?(0,w.default)(a.estimatePayDate):null,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择预计打款日期"}]})(c.default.createElement(v.DatePicker,{format:"YYYY-MM-DD",getCalendarContainer:function(){return e.container}}))),c.default.createElement(S,i({label:"预约金额"},r),this.formUtils.getFieldDecorator("reservationAmount",{initialValue:a.reservationAmount,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入预约金额"}]})(c.default.createElement(v.InputNumber,null)),"万"),c.default.createElement(S,i({label:"备注"},r),this.formUtils.getFieldDecorator("remark",{initialValue:a.remark,validateTrigger:["onChange","onBlur"],rules:[{type:"string",whitespace:!0,message:"请填写长度不超过200个字符",min:1,max:200}]})(c.default.createElement(v.Input,{type:"textarea",rows:3,size:"large"})))):null):c.default.createElement("div",null,c.default.createElement(S,i({label:"产品名称"},r),a.productName),c.default.createElement(S,i({label:"客户/渠道"},r),a.customerName),c.default.createElement(S,i({label:"预计打款日期"},r),(0,w.default)(a.estimatePayDate).format("YYYY-MM-DD")),c.default.createElement(S,i({label:"预约金额"},r),a.reservationAmount),c.default.createElement(S,i({label:"备注"},r),a.remark)))}}]),t}(y.default);j=v.Form.create()(j),t.default=j},1795:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(42),d=a(33),f=n(d),p=a(84),v=n(p),h=a(357),y=n(h),m=a(1753),b=n(m),g=a(1794),k=n(g),_=a(1798),w=n(_),E=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClose=function(){a.hide()},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state.formData.id;a.formUtils.validateFields(function(e){if(!e){var n=a.formUtils.getFieldsValue();n=a.formatData(n),2===n.source&&(n.customerId=null);var l=t?a.appoint.update:"product.center"==a.state.formData.from?a.appoint.center_add:a.appoint.add;t&&(n.id=t),a.setState({submiting:!0},function(){l(n).then(function(e){a.setState({submiting:!1}),e.success&&(a.state.hasReSubmit?a.setState({isEdit:!1}):a.hide(),c.message.success((a.state.formData.id?"编辑":"新增")+"预约成功."),a.props.reload())})})}})},a.hide=function(){a.formUtils.resetFields(),a.setState({formData:{},visible:!1},function(){a.setState({hidden:!0})})},a.handleResubmit=function(){var e=a.state.formData.id;a.setState({submiting:!0},function(){a.appoint.again_commit({id:e}).then(function(e){a.setState({submiting:!1}),e.success&&(c.message.success("重新提交成功"),a.hide(),a.props.reload())})})},a.handleChange=function(e){a.setState({showSave:e})},a.state={loading:!1,visible:!1,canEdit:!1,isEdit:!1,hasReSubmit:!1,formData:{},submiting:!1},a.formUtils=new y.default("editAppoinementModal"),a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.appoint=new b.default}},{key:"componentDidMount",value:function(){}},{key:"show",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState({visible:!0,hidden:!1,canEdit:a,hasReSubmit:n}),e?e.id?(this.setState({formData:e,loading:!0,isEdit:!1}),this.appoint.get(e.id).then(function(e){if(e.success){var a=e.result.data,n=!1;3==a.status&&e.result.permission.editPermission&&(n=!0),t.setState({formData:a,canEdit:n,loading:!1}),t.form&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))}})):e.productId&&(this.setState({isEdit:!0,formData:e}),this.formUtils&&this.formUtils.resetFields(),this.formUtils.setFieldsValue({productId:e.productId})):(this.setState({formData:{},isEdit:!0}),this.formUtils.resetFields())}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,f.default)(a).format("YYYY-MM-DD"):a instanceof f.default&&(a=(0,f.default)(a).format("YYYY-MM-DD")),a instanceof Array&&(a=a.join(",")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"renderFooterBtn",value:function(){var e=this,t=this.state,a=t.loading,n=t.formData,l=t.isEdit,r=t.hasReSubmit,o=t.showSave,i=void 0===o||o,u=t.submiting;return[l&&n.id?s.default.createElement(c.Button,{key:"cancel",onClick:function(){e.setState({isEdit:!1})}},"取消"):s.default.createElement(c.Button,{key:"close",onClick:this.handleClose},"关闭"),a?null:!l&&r?s.default.createElement(c.Button,{key:"resubmit",type:"primary",loading:u,onClick:this.handleResubmit},"确定提交"):l&&i?s.default.createElement(c.Button,{key:"save",type:"primary",loading:u,onClick:this.handleSubmit},"保存"):null]}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.isEdit,l=(t.submiting,t.canEdit),r=t.formData;t.hidden;return s.default.createElement(c.Modal,{visible:a,title:s.default.createElement("div",null,(r.id?n?"编辑":"查看":"新增")+"预约",l&&!n?s.default.createElement(c.Icon,{className:"fr",type:"edit",onClick:function(){e.setState({isEdit:!0})}}):null),width:550,className:"vant-modal yundao-modal "+w.default.modal+" ",wrapClassName:"showfloat vertical-center-modal",onCancel:this.handleClose,closable:!1,footer:this.renderFooterBtn()},a?s.default.createElement(k.default,{initFields:this.props.initFields,ref:function(t){return e.customerForm=t},data:r,formUtils:this.formUtils,isEdit:n,setForm:function(t){return e.form=t},callback:this.props.callback,onChange:this.handleChange}):s.default.createElement(c.Spin,null))}}]),t}(v.default);t.default=E},1798:function(e,t,a){var n=a(1790);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1807:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1721),l=function(e){return e&&e.__esModule?e:{default:e}}(n),r=(0,l.default)({PENDING:{text:"待审批",value:1},PASS:{text:"已通过",value:2},REJECT:{text:"已驳回",value:3},UNDO:{text:"已取消",value:4},INVALID:{text:"已作废",value:5}});t.default={EnumAppointmentStatus:r}},1964:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,"",""])},2095:function(e,t,a){var n=a(1964);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},2227:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,".modal___WjcJU .ant-modal-body{padding:35px 40px}.modal___WjcJU .ant-modal-body .ant-calendar-picker{width:100%}.modal___WjcJU .ant-modal-body .ant-input-number-lg{width:92%}.modal___WjcJU .ant-modal-body .ant-input-number-lg .ant-input-number-input{height:36px}.ant-confirm-confirm .ant-confirm-body>.anticon-check-circle{color:#00a854}",""]),t.locals={modal:"modal___WjcJU"}},2577:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),c=n(s),d=a(12),f=n(d),p=a(42),v=a(1720),h=(n(v),a(33)),y=n(h),m=a(357),b=n(m),g=a(84),k=n(g),_=a(1753),w=n(_),E=a(1702),C=n(E),O=p.Form.Item,D=(p.Select.Option,function(e){function t(){l(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.loadAppoint=function(t){e.appoint.get_my_select(t).then(function(t){t.success&&(e.setState({my_appoint:t.result||[],current_appoint:t.result&&t.result.length?t.result[0]:{}}),t.result&&t.result.length&&e.formUtils.setFieldsValue({dealAmount:t.result[0].reservationAmount}))})},e.changeAppoint=function(t){e.state.my_appoint.map(function(a){if(a.id==t)return e.formUtils.setFieldsValue({dealAmount:a.reservationAmount}),void e.setState({current_appoint:a})})},e.state={loading:!1,my_appoint:[],current_appoint:{}},e.formUtils=new b.default("EditDeclarationForm"),e}return o(t,e),u(t,[{key:"componentWillMount",value:function(){this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this),this.appoint=new w.default,this.customer=new C.default;var e=this.props;e.data,e.initFields}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.initFields,l={labelCol:{span:6},wrapperCol:{span:17}};a.declarationModel;return c.default.createElement(p.Form,{className:"float-slide-form vant-spin follow-form",ref:function(t){return e.container=f.default.findDOMNode(t)}},c.default.createElement(O,i({label:"预约"},l),a.reservationAmount,"万 ",(0,y.default)(a.estimatePayDate).format("YYYY-MM-DD")),c.default.createElement(O,i({label:"产品名称"},l),n&&n.indexOf("productName")>-1?a.productName:this.state.current_appoint.productName||"请选择预约",this.formUtils.getFieldDecorator("productId",{initialValue:a.productId,validateTrigger:["onChange","onBlur"]})(c.default.createElement(p.Input,{type:"hidden"}))),c.default.createElement(O,i({label:"客户名称"},l),n&&n.indexOf("customerName")>-1?a.customerName:this.state.current_appoint.customerName||"请选择预约"),c.default.createElement(O,i({label:"打款日期"},l),this.formUtils.getFieldDecorator("payDate",{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择打款日期"}]})(c.default.createElement(p.DatePicker,{format:"YYYY-MM-DD",getCalendarContainer:function(){return e.container}}))),c.default.createElement(O,i({label:"认购金额"},l),this.formUtils.getFieldDecorator("dealAmount",{initialValue:a.reservationAmount,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入认购金额"}]})(c.default.createElement(p.InputNumber,null)),"万"),c.default.createElement(O,i({label:"备注"},l),this.formUtils.getFieldDecorator("remark",{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{type:"string",whitespace:!0,message:"请填写长度不超过200个字符",min:1,max:200}]})(c.default.createElement(p.Input,{type:"textarea",rows:3,size:"large"}))))}}]),t}(k.default));D=p.Form.create()(D),t.default=D},2578:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),s=n(u),c=a(42),d=a(33),f=n(d),p=a(84),v=n(p),h=a(357),y=n(h),m=a(1726),b=n(m),g=a(2577),k=n(g),_=a(2625),w=n(_),E=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClose=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state.formData.id;a.formUtils.validateFields(function(e){if(!e){a.setState({submitting:!0});var n=a.formUtils.getFieldsValue();n.reservationId||(n.reservationId=t),n=a.formatData(n);var l=a.state.formData.from,r=a.declaration.add;switch(l){case"product.center":r=a.declaration.center_add;break;case"appointment.my":r=a.declaration.appint_add}r(n).then(function(e){if(a.setState({submitting:!1}),e.success){a.setState({visible:!1});var t=e.result;a.declaration.validate(e.result).then(function(e){if(e.success)c.message.success("新增报单成功");else var n=c.Modal.confirm({className:"showfloat",iconType:"check-circle",title:"报单已创建，请完善资料后提交审批",content:"待完善资料:"+e.message,cancelText:"关闭",okText:"去完善",onOk:function(){a.props.parent.showFloat("declarationDetailFloat",{id:t}),n.destroy()}})}),a.props.reload&&a.props.reload()}})}})},a.state={visible:!1,formData:{}},a.formUtils=new y.default("addAppoinementModal"),a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.declaration=new b.default}},{key:"componentDidMount",value:function(){}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({visible:!0,formData:e}),this.formUtils&&this.formUtils.resetFields()}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,f.default)(a).format("YYYY-MM-DD"):a instanceof f.default&&(a=(0,f.default)(a).format("YYYY-MM-DD")),a instanceof Array&&(a=a.join(",")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"renderFooterBtn",value:function(){var e=this;return[s.default.createElement(c.Button,{key:"cancel",onClick:function(){e.setState({visible:!1})}},"取消"),s.default.createElement(c.Button,{key:"sure",type:"primary",loading:this.state.submitting,onClick:this.handleSubmit},"确定")]}},{key:"render",value:function(){var e=this,t=this.state.visible;return s.default.createElement(c.Modal,{visible:t,title:"提交报单",width:500,className:"vant-modal yundao-modal "+w.default.modal,wrapClassName:"vertical-center-modal",onCancel:this.handleClose,closable:!1,footer:this.renderFooterBtn()},t?s.default.createElement(k.default,{initFields:this.props.initFields,ref:function(t){return e.customerForm=t},data:this.state.formData,formUtils:this.formUtils,isEdit:this.state.isEdit,setForm:function(t){return e.form=t},callback:this.props.callback}):null)}}]),t}(v.default);t.default=E},2625:function(e,t,a){var n=a(2227);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)}});