webpackJsonp([52],{1649:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),f=n(12),p=a(f),d=n(42),m=n(84),g=a(m),v=n(358),h=a(v),y=n(357),b=a(y),_=n(1717),w=a(_),x=n(33),E=a(x),k=n(1889),O=a(k),D=n(1754),C=a(D),j=n(1778),S=a(j),U=n(1698),L=a(U),P=n(2011),T=a(P),M=n(2088),I=a(M),F=d.Form.Item,R=d.Select.Option,z=d.Radio.Group,B=d.Input.TextArea,V=(d.Checkbox.Group,function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));N.call(n);var a=n.props,i=(a.location,a.match),l=i.params.id;return n.state={id:l,data:{},isEdit:!1,visible:!0,filters:{}},n.formUtils=new b.default("Detail"),n}return i(t,e),s(t,[{key:"componentWillMount",value:function(){this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this),this.news=new O.default,this.platform=new C.default,this.dictionary=new L.default,this.newsColumn=new S.default,this.loadData(),this.getDictionary()}},{key:"getDictionary",value:function(){var e=this;this.dictionary.gets("dic_article_status").then(function(t){if(t.success&&t.result){var n={};t.result.map(function(e){n[e.value]=e.selections}),e.setState({filters:n})}})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];"string"==typeof n&&(n=n.replace(/^\s*|\s*$/g,"")),n instanceof Date?n=(0,E.default)(n).format("YYYY-MM-DD HH:mm"):n instanceof E.default&&(n=(0,E.default)(n).format("YYYY-MM-DD HH:mm")),n instanceof Array&&(n=n.join(",")),n instanceof Object&&n._isAMomentObject&&(n=n.format("YYYY-MM-DD HH:mm")),e[t]=n}return e}},{key:"render",value:function(){var e=this,t={labelCol:{span:7},wrapperCol:{span:17}},n=this.state,a=(n.activeKey,n.data),o=n.isEdit,r=n.platforms,i=(n.positions,n.columns),s=n.filters,u=this.formUtils.getFieldValue("coverUrl"),f="www.xxx.com";return r&&a.platformId&&(f=r.filter(function(e){return e.id==a.platformId})[0]&&r.filter(function(e){return e.id==a.platformId})[0].url||"www.xxx.com"),c.default.createElement(h.default,this.props,c.default.createElement("div",{className:I.default.page,ref:function(t){if(t){var n=t.parentNode.parentNode;e.affixContainer=n}}},c.default.createElement(d.Breadcrumb,{className:"page-breadcrumb"},c.default.createElement(d.Breadcrumb.Item,null,"内容配置"),c.default.createElement(d.Breadcrumb.Item,null,"文章内容配置"),c.default.createElement(d.Breadcrumb.Item,null,"文章详情")),c.default.createElement("div",{className:"page-content"},c.default.createElement(d.Spin,{spinning:this.state.loading},c.default.createElement("div",{className:I.default.operation},o?c.default.createElement("div",{className:I.default.operation},c.default.createElement(d.Button,{onClick:this.cancel,className:I.default.clear},"取消"),c.default.createElement(d.Button,{className:I.default.submit,onClick:this.save},"保存")):c.default.createElement(d.Button,{className:I.default.submit,onClick:this.intoEdit},"编辑")),c.default.createElement(d.Form,null,c.default.createElement(F,l({label:"文章标题"},t),o?this.formUtils.getFieldDecorator("title",{initialValue:a.title,validateTrigger:["onChange","onBlur"],rules:[{required:!0,min:1,max:100,message:"请输入文章标题，长度1-100"}]})(c.default.createElement(d.Input,null)):a.title),c.default.createElement(F,l({label:"所属平台"},t),o?this.formUtils.getFieldDecorator("platformId",{initialValue:a.platformId,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择所属平台"}]})(c.default.createElement(d.Select,{onChange:function(t){e.get_column(t)},disabled:!0,placeholder:"请选择平台"},r&&r.map(function(e){return c.default.createElement(R,{value:e.id,key:e.id},e.name)}))):r&&r.filter(function(e){return e.id==a.platformId})[0]&&r.filter(function(e){return e.id==a.platformId})[0].name),c.default.createElement(F,l({label:"所属栏目"},t),o?this.formUtils.getFieldDecorator("columnIds",{initialValue:a.columnIds||[],validateTrigger:["onChange","onBlur"]})(c.default.createElement(d.Select,{mode:"multiple",placeholder:"请选择所属栏目"},i&&i.map(function(e){return c.default.createElement(R,{value:e.id.toString(),key:e.id},e.name)}))):a.columnName),c.default.createElement(F,l({label:"图片"},t),o?this.formUtils.getFieldDecorator("coverUrl",{initialValue:a.coverUrl})(c.default.createElement(w.default,{listType:"picture",accept:"jpg,jpeg,png",fileCount:1,fileSize:"30MB",fileList:u},c.default.createElement(d.Button,null,c.default.createElement(d.Icon,{type:"cloud-upload-o"}),"上传"))):c.default.createElement("img",{style:{maxWidth:"100%",maxHeight:"400px"},src:a.coverUrl&&a.coverUrl[0]&&a.coverUrl[0].url})),c.default.createElement(F,l({label:"URL"},t),c.default.createElement("a",{href:"//"+f+"/news/"+(a.code||"xxx")+".html",target:"_blank"},f+"/news/"+(a.code||"xxx")+".html")),c.default.createElement(F,l({label:"SEO Title"},t),o?this.formUtils.getFieldDecorator("seoTitle",{initialValue:a.seoTitle,validateTrigger:["onChange","onBlur"],rules:[{min:1,max:50,message:"请输入栏目Title,长度不超过50"}]})(c.default.createElement(d.Input,{placeholder:"请输入栏目Title"})):a.seoTitle),c.default.createElement(F,l({label:"SEO Keywords"},t),o?this.formUtils.getFieldDecorator("seoKeywords",{initialValue:a.seoKeywords,validateTrigger:["onChange","onBlur"],rules:[{min:1,max:100,message:"请输入栏目Title,长度不超过100"}]})(c.default.createElement(d.Input,{placeholder:"请输入栏目Keywords"})):a.seoKeywords),c.default.createElement(F,l({label:"SEO Description"},t),o?this.formUtils.getFieldDecorator("seoDescription",{initialValue:a.seoDescription,validateTrigger:["onChange","onBlur"],rules:[{min:1,max:200,message:"请输入栏目Title,长度不超过200"}]})(c.default.createElement(d.Input,{placeholder:"请输入栏目Description"})):a.seoDescription),c.default.createElement(F,l({label:"阅读数显示值"},t),o?this.formUtils.getFieldDecorator("pageview",{initialValue:a.pageview,validateTrigger:["onChange","onBlur"]})(c.default.createElement(d.InputNumber,{min:0,precision:0,placeholder:"阅读数"})):a.pageview),c.default.createElement(F,l({label:"排序"},t),o?this.formUtils.getFieldDecorator("sequence",{initialValue:a.sequence,validateTrigger:["onBlur"],rules:[{required:!0,message:"请输入排序"}]})(c.default.createElement(d.InputNumber,{precision:0,min:0,max:999999999,placeholder:"排序"})):a.sequence,"(数值越小越靠前)"),c.default.createElement(F,l({label:"发布时间"},t),o?this.formUtils.getFieldDecorator("publishDate",{initialValue:a.publishDate?(0,E.default)(a.publishDate):null,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入发布时间"}]})(c.default.createElement(d.DatePicker,{showTime:!0,format:"YYYY-MM-DD HH:mm",placeholder:"请输入发布时间"})):a.publishDate?(0,E.default)(a.publishDate).format("YYYY-MM-DD HH:mm"):null,"(默认立即发布，您可以修改发布时间用于定时发布)"),c.default.createElement(F,l({label:"文章导读"},t),o?this.formUtils.getFieldDecorator("feature",{initialValue:a.articleDetail&&a.articleDetail.feature,validateTrigger:["onChange","onBlur"],rules:[{required:!0,min:1,max:500,message:"请输入文章导读,长度1-500"}]})(c.default.createElement(B,{className:I.default.feature,autosize:{minRows:2,maxRows:6},placeholder:"请输入文章导读"})):a.articleDetail&&a.articleDetail.feature),c.default.createElement(F,l({label:"文章正文"},t),o?this.formUtils.getFieldDecorator("content",{initialValue:a.articleDetail&&a.articleDetail.content,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请填写文章正文"}]})(c.default.createElement(d.Input,{type:"hidden"})):c.default.createElement("iframe",{style:{width:"100%"},height:400,ref:function(e){if(e){var t=p.default.findDOMNode(e);t.contentWindow.document.body.innerHTML=a.articleDetail&&a.articleDetail.content,console.log(t)}}},a.articleDetail&&a.articleDetail.content),o?c.default.createElement(T.default,{content:this.formUtils.getFieldValue("content"),callback:function(t){e.formUtils.setFieldsValue({content:t})}}):null),c.default.createElement(F,l({label:"状态"},t),o?this.formUtils.getFieldDecorator("status",{initialValue:void 0!=a.status||null!=a.status?a.status.toString():"1",validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择是否启用"}]})(c.default.createElement(z,{placeholder:"排序"},s.dic_article_status&&s.dic_article_status.map(function(e){return c.default.createElement(d.Radio,{key:e.value,value:e.value.toString()},e.label)}))):s.dic_article_status&&s.dic_article_status.filter(function(e){return e.value==a.status})[0]&&s.dic_article_status.filter(function(e){return e.value==a.status})[0].label),c.default.createElement(F,l({label:"文章来源"},t),o?this.formUtils.getFieldDecorator("source",{initialValue:a.articleDetail&&a.articleDetail.source,validateTrigger:["onChange","onBlur"],rules:[{max:20,message:"请输入文章来源,长度不超过20"}]})(c.default.createElement(d.Input,{placeholder:"请输入文章导读"})):a.articleDetail&&a.articleDetail.source),c.default.createElement(F,l({label:"作者"},t),o?this.formUtils.getFieldDecorator("author",{initialValue:a.articleDetail&&a.articleDetail.author,validateTrigger:["onChange","onBlur"],rules:[{max:20,message:"请输入作者，长度不超过20"}]})(c.default.createElement(d.Input,{placeholder:"请输入作者"})):a.articleDetail&&a.articleDetail.author))))))}}]),t}(g.default)),N=function(){var e=this;this.state={loading:!0,visible:!1,activeKey:"1"},this.loadData=function(){e.loadNews(),e.get_platform()},this.loadNews=function(){var t=e.state.id;e.news.get(t).then(function(n){if(e.setState({loading:!1}),n.success){var a=n.result;a.id=t,a.coverUrl&&(a.coverUrl=[{name:a.coverUrl,uid:a.coverUrl,url:a.coverUrl,type:"image/png",status:"done"}]),a.columnIds&&(a.columnIds=a.columnIds.split(",")),a.status=a.status.toString(),e.setState({data:a,id:t,content:a.articleDetail?a.articleDetail.content:null}),e.get_column(a.platformId)}else e.setState({loading:!1,error:!0,message:n.message})})},this.get_platform=function(){return e.platform.get_platform_web().then(function(t){e.setState({platforms:t.result})})},this.get_column=function(t){return e.newsColumn.get_platform_column(t).then(function(t){e.setState({columns:t.result})})},this.cancel=function(){d.Modal.confirm({title:"确定取消编辑文章？",okText:"确定",cancelText:"继续编辑",onOk:function(){e.setState({isEdit:!1})}})},this.save=function(t){t&&t.preventDefault(),e.formUtils.validateFields(function(t){if(!t){var n=e.formUtils.getFieldsValue();n.coverUrl&&n.coverUrl.length&&(n.coverUrl=n.coverUrl[0].url),n=e.formatData(n);var a=e.news.update;n.id=e.state.id,a(n).then(function(t){t.success&&(d.message.success("文章编辑成功"),e.loadData(),e.setState({isEdit:!1}))})}})},this.intoEdit=function(){var t=Object.assign({},e.state.data);t.publishDate&&(t.publishDate=(0,E.default)(t.publishDate)),e.setState({isEdit:!0},function(){e.formUtils.setFieldsValue(t)})}};V=d.Form.create()(V),t.default=V},1698:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(188),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(){a(this,e)}return o(e,[{key:"gets",value:function(e){return i.default.get("/dictionary/gets",{codes:e})}}]),e}();t.default=l},1717:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(42),f=n(1),p=a(f),d=n(1718),m=a(d),g=n(1723),v=a(g),h=c.Upload.Dragger,y=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.beforeUpload=function(e,t){var a=n.props,o=a.accept,r=a.fileSize,i=n.accept.indexOf(e.type)>-1;i||c.message.error("只支持这些类型文件:"+o+"!");var l=e.size<n.fileSize;return l||c.message.error("文件大小不能大于"+r),i&&l},n.onRemove=function(e){n.setState(function(t){var a=t.fileList,o=a.indexOf(e),r=a.slice();return r.splice(o,1),n.props.onRemove&&n.props.onRemove.call(n,e,n),{fileList:r}})},n.handleProgress=function(){n.uploader.onProgress(function(e,t){})},n.msgList={},n.showUploadMsg=function(e,t){var a=n.state.msgList;a[e.uid]&&a[e.uid].show?(a[e.uid].content=t,n.setState({msgList:a}),c.message.destroy(),c.message.success(t)):(a[e.uid]={content:t,show:!0},n.setState({msgList:a},function(){c.message.info(a[e.uid].content,function(){a[e.uid].show=!1,n.setState({msgList:a})})}))},n.handleChange=function(e){var t=e.file,a=e.fileList;if("done"===t.status){n.showUploadMsg(t,"文件上传成功");var o=t.response;if(o.success){var r=a.filter(function(e){return e.uid===t.uid})[0],i=r.response;i&&i.result&&(r.url=i.result.url,t.url=i.result.url),n.props.onSave&&n.props.onSave.call(n,t,n),n.props.onChange&&n.props.onChange.call(n,a,n)}else switch(n.onRemove(t),o.code){case 9e5:case 900001:return void(location.href="/login");default:c.message.destroy(),c.message.error(o.message)}}else if("uploading"===t.status){console.log("uploading"),console.log(t);0==t.percent?n.showUploadMsg(t,"文件正在上传中..."):t.percent,n.props.onChange&&n.props.onChange.call(n,a,n)}else"removed"===t.status?n.props.onChange&&n.props.onChange.call(n,a,n):"error"===t.status&&(c.message.destroy(),c.message.error("文件上传失败!"),n.onRemove(t));n.props.onChange&&n.props.onChange.call(n,a,n),n.setState({fileList:a})},n.state={fileList:e.fileList||[],msgList:{}},n}return i(t,e),l(t,[{key:"componentWillMount",value:function(){this.Mime=new m.default,this.fileSize=this.parseFileSize(this.props.fileSize),this.accept=this.Mime.extList2mimes(this.props.accept).join(",")}},{key:"componentWillReceiveProps",value:function(e){"fileList"in e&&this.setState({fileList:e.fileList||[]})}},{key:"clear",value:function(){var e=this;setTimeout(function(){e.setState({fileList:[]})})}},{key:"parseFileSize",value:function(e){if("string"!=typeof e)return e;var t,n={t:1099511627776,g:1073741824,m:1048576,k:1024};return e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],n.hasOwnProperty(t)&&(e*=n[t]),e}},{key:"handleEdit",value:function(e){var t=void 0;this.props.onClickMask&&(t=this.props.onClickMask.call(this,e)),(!1===this.props.editable||t)&&e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props.fileCount,n=!0,a=this.state.fileList,o=u.default.createElement("div",null,u.default.createElement(c.Icon,{type:"plus"}),u.default.createElement("div",{className:"ant-upload-text"},"Upload"));a?a.length>=t&&(n=!1):n=!0,t<=0&&(n=!1);var r=this.props,i=r.dragger,l=r.action,s=r.showUploadList,f=r.multiple,p=r.onRemove,d=r.children,m=i?h:c.Upload;return u.default.createElement("div",{className:"upload-card"+(n?"":" upload-card-uploaded")},u.default.createElement(m,{ref:function(t){return e.uploader=t},uploader:"uploader",name:"file",action:l,showUploadList:s,multiple:f,onRemove:p,onChange:this.handleChange,beforeUpload:this.beforeUpload,withCredentials:!0,accept:this.accept+","+this.props.accept.split(",").map(function(e){return"."+e}).join(","),fileList:this.state.fileList},n?d||o:null))}}],[{key:"Video",get:function(){return u.default.createElement(v.default,null)}}]),t}(u.default.Component);y.propTypes={multiple:p.default.bool,fileCount:p.default.number,action:p.default.string.isRequired},y.defaultProps={multiple:!1,accept:"doc,docx,xls,xlsx,pdf,png,jpg,jpeg,gif,txt",fileCount:10,fileSize:"30MB",action:"/api/file/upload"},t.default=y},1718:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this.mimes={},this.extensions={},this.addMimeType(e.mimeData)}return o(e,[{key:"addMimeType",value:function(e){var t,n,a,o=e.split(/,/);for(t=0;t<o.length;t+=2){for(a=o[t+1].split(/ /),n=0;n<a.length;n++)this.mimes[a[n]]=o[t];this.extensions[o[t]]=a}}},{key:"extList2mimes",value:function(e,t){var n,a,o=this,r=e.split(/\s*,\s*/),i=[];for(n=0;n<r.length;n++){if("*"===r[n])return[];if(a=o.mimes[r[n]])-1===i.indexOf(a)&&i.push(a);else{if(!t||!/^\w+$/.test(r[n]))return[];i.push("."+r[n])}}return i}},{key:"mimes2exts",value:function(e){var t=this,n=[];return e.forEach(function(e){if("*"===e)return n=[],!1;var a=e.match(/^(\w+)\/(\*|\w+)$/);a&&("*"===a[2]?t.extensions.forEach(function(e,o){new RegExp("^"+a[1]+"/").test(o)&&[].push.apply(n,t.extensions[o])}):t.extensions[e]&&[].push.apply(n,t.extensions[e]))}),n}},{key:"mimes2extList",value:function(e){var t=[];return"string"==typeof e&&(e=e.trim().split(/\s*,\s*/)),t=this.mimes2exts(e),t.length?t.join(","):"*"}},{key:"getFileExtension",value:function(e){var t=e&&e.match(/\.([^.]+)$/);return t?t[1].toLowerCase():""}},{key:"getFileMime",value:function(e){return this.mimes[this.getFileExtension(e)]||""}}]),e}();r.mimeData="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mp4v mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-f4v,f4v,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.rn-realmedia-vbr,rmvb,video/x-ms-asf,asf,video/x-ms-asf,asx,video/x-ms-wm,wm,video/x-pn-realvideo,ra,application/vnd.rn-realmedia,rm,video/x-pn-realvideo,ram,video/dvd,vob,application/octet-stream,dat,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",t.default=r},1722:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(188),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(){a(this,e)}return o(e,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fileId:fileId};return i.default.post("/video/add",e)}},{key:"get",value:function(e){return i.default.get("/video/get",{id:e})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:id,name:name};return i.default.post("/video/update",e)}},{key:"getSignature",value:function(){return i.default.get("/video/get_upload_signature")}},{key:"delete",value:function(e){return i.default.post("/video/delete",{ids:e})}},{key:"transcode",value:function(e){return i.default.post("/video/convert",{ids:e})}},{key:"gets_by_name",value:function(e){return i.default.get("/video/gets_by_name",{name:e})}}]),e}();t.default=l},1723:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),f=n(42),p=n(1),d=a(p),m=n(1718),g=a(m),v=n(1722),h=a(v),y=f.Upload.Dragger,b=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_.call(n),n.mime=new g.default;var a=n.mime.extList2mimes(n.props.accept,!0);return n.state={fileList:[],msgList:{},accept:a},console.log("accept",a),n}return l(t,e),s(t,[{key:"componentWillMount",value:function(){"infinite"!==this.props.fileSize&&(this.fileSize=this.parseFileSize(this.props.fileSize))}},{key:"componentWillReceiveProps",value:function(e){"fileList"in e&&this.setState({fileList:e.fileList||[]})}},{key:"clear",value:function(){var e=this;setTimeout(function(){e.setState({fileList:[]})})}},{key:"parseFileSize",value:function(e){if("string"!=typeof e)return e;var t,n={t:1099511627776,g:1073741824,m:1048576,k:1024};return e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],n.hasOwnProperty(t)&&(e*=n[t]),e}},{key:"render",value:function(){var e=this,t=this.props.fileCount,n=!0,a=this.state.fileList,r=c.default.createElement("div",null,c.default.createElement(f.Icon,{type:"plus"}),c.default.createElement("div",{className:"ant-upload-text"},"Upload"));a?a.length>=t&&(n=!1):n=!0,t<=0&&(n=!1);var i=this.props,l=i.dragger,s=i.action,u=i.showUploadList,p=i.multiple,d=i.onRemove,m=i.children,g=(o(i,["dragger","action","showUploadList","multiple","onRemove","children"]),l?y:f.Upload);return c.default.createElement("div",{className:"upload-card"+(n?"":" upload-card-uploaded")},c.default.createElement(g,{ref:function(t){return e.uploader=t},uploader:"uploader",name:"file",action:s,showUploadList:u,multiple:p,onRemove:d,beforeUpload:this.beforeUpload,withCredentials:!0,customRequest:this.customRequest,fileList:this.state.fileList},n?m||r:null))}}]),t}(u.Component);b.propTypes={multiple:d.default.bool,fileCount:d.default.number},b.defaultProps={multiple:!1,accept:"wmv,wm,asf,asx,rm,rmvb,ra,ram,mpg,mpeg,mpe,vob,dat,mov,3gp,mp4,mp4v,m4v,mkv,avi,flv,f4v",fileCount:10,fileSize:"infinite"};var _=function(){var e=this;this.beforeUpload=function(t,n){var a=e.props,o=(a.accept,a.fileSize),r=t.name.split(".")[t.name.split(".").length-1],i=e.state.accept.indexOf(t.type)>-1||e.props.accept.indexOf(r)>-1;i||f.message.error("不支持的文件格式");var l=!0;return e.fileSize&&((l=t.size<e.fileSize)||f.message.error("文件大小不能大于"+o)),i&&l},this.onRemove=function(t){e.setState(function(n){var a=n.fileList,o=a.indexOf(t),r=a.slice();return r.splice(o,1),e.props.onRemove&&e.props.onRemove.call(e,t,e),{fileList:r}})},this.handleProgress=function(){e.uploader.onProgress(function(e,t){console.log(e.state,e.percent)})},this.msgList={},this.showUploadMsg=function(t,n){var a=e.state.msgList;a[t.uid]&&a[t.uid].show?(a[t.uid].content=n,e.setState({msgList:a}),f.message.destroy(),f.message.success(n)):(a[t.uid]={content:n,show:!0},e.setState({msgList:a},function(){f.message.info(a[t.uid].content,function(){a[t.uid].show=!1,e.setState({msgList:a})})}))},this.start=function(t,a){var o=window,r=o.APP,i=t.uid,l=function(){return a?r.state[a]||[]:r.state.uploadVideoList||[]},s=function(e){var t={};a?t[a]=e:t.uploadVideoList=e,r.setState(t)},u=e,c=new h.default;n.e(0).then(function(){var e=n(728);window.$=e,window.jQuery=e,window.qcVideo.ugcUploader.start({videoFile:t,getSignature:function(e){c.getSignature().then(function(t){if(t&&t.success&&t.result)e(t.result);else{var n=l(),a=n?n.map(function(e){return e.uid==i&&(e.status="error"),e}):[];s(a),u.props.onError&&u.props.onError(t)}})},success:function(e){console.log("success")},error:function(e){console.log("上传失败:",e),console.log("上传失败的文件类型："+e.type),console.log("上传失败的原因："+e.msg),e.status="error";var t=l(),n=t?t.map(function(e){return e.uid==i&&(e.status="error"),e}):[];u.props.onError&&u.props.onError(e),s(n)},progress:function(e){console.log("上传进度:",e),console.log("上传进度的文件类型："+e.type),console.log("上传进度的文件名称："+e.name),console.log("上传进度："+e.shacurr);var t=l(),n=t?t.map(function(t){return t.uid==i&&(t.status="uploading",t.percent=100*e.shacurr||0),t}):[];u.props.onProgress&&u.props.onProgress(e),s(n)},finish:function(e){console.log("finish");var t=l();console.log("uploadVideoList",t),console.log("uid",i);var n=t?t.filter(function(e){return e.uid==i})[0]:{};if(n.fileId=e.fileId,u.props.onSave)return void u.props.onSave(n);c.add(n).then(function(e){var t="done";e.success||(t="error"),"done"==t&&f.notification.success({message:"视频上传成功",description:n.name+",该视频已成功上传"});var a=l(),o=a?a.map(function(e){return e.uid==i&&(e.status=t),e}):[];s(o)}),console.log("上传成功:",e),console.log("上传成功的文件类型："+e.type)}})}.bind(null,n)).catch(n.oe)},this.customRequest=function(t){var n=(t.onProgress,t.onError,t.onSuccess,t.data,t.filename,t.file);t.withCredentials,t.action,t.headers;console.log("file",n),e.props.onAdd&&e.props.onAdd(n)}};t.default=b},1754:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(188),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(){a(this,e)}return o(e,[{key:"get_platform",value:function(){return i.default.get("/platform/get_all")}},{key:"get_platform_web",value:function(){return i.default.get("/platform/get_web")}},{key:"get_platform_roadshow",value:function(){return i.default.get("/platform/get_roadshow_platform")}},{key:"get_roadshow_platform",value:function(){return i.default.get("/platform/get_roadshow_platform")}},{key:"get_position_by_platform",value:function(e){return i.default.get("/platform/get_position_by_platform",{platformId:e})}}]),e}();t.default=l},1778:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(188),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(){a(this,e)}return o(e,[{key:"add",value:function(e){return i.default.post("/cms/article/column/add",e)}},{key:"delete",value:function(e){return i.default.post("/cms/article/column/delete",{ids:e})}},{key:"get",value:function(e){return i.default.get("/cms/article/column/get",{id:e})}},{key:"update",value:function(e){return i.default.post("/cms/article/column/update",e)}},{key:"get_page",value:function(){return i.default.get("/cms/article/column/get_page")}},{key:"get_platform_column",value:function(e){return i.default.get("/cms/article/column/get_select_option",{platformId:e})}}]),e}();t.default=l},1889:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(188),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){function e(){a(this,e)}return o(e,[{key:"add",value:function(e){return i.default.post("/cms/article/add",e)}},{key:"delete",value:function(e){return i.default.post("/cms/article/delete",{ids:e})}},{key:"get",value:function(e){return i.default.get("/cms/article/get",{id:e})}},{key:"update",value:function(e){return i.default.post("/cms/article/update",e)}},{key:"get_page",value:function(){return i.default.get("/cms/article/get_page")}}]),e}();t.default=l},1957:function(e,t,n){t=e.exports=n(94)(void 0),t.push([e.i,".page___1zH8r .ant-form-item-label{text-align:left;width:200px}.page___1zH8r .page-content{padding:30px}.page___1zH8r .operation___1AVE1{display:flex;align-items:center}.page___1zH8r .operation___1AVE1 .clear___3ThMB{border:none;height:40px;display:inline-flex;align-items:center;justify-content:center;margin-right:10px;border:1px solid #465174;margin-left:10px}.page___1zH8r .operation___1AVE1 .submit___2dY4C{background-color:#465174;border-radius:2px;border-color:#465174;height:40px;display:inline-flex;align-items:center;justify-content:center;color:#fff;font-family:PingFangSC-Medium,sans-serif;font-size:16px;color:#f2d5aa}.page___1zH8r .feature___3v8ok{padding:12px 7px}",""]),t.locals={page:"page___1zH8r",operation:"operation___1AVE1",clear:"clear___3ThMB",submit:"submit___2dY4C",feature:"feature___3v8ok"}},1984:function(e,t){function n(e,t){for(var n in t)e.setAttribute(n,t[n])}function a(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function o(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,r){var i=document.head||document.getElementsByTagName("head")[0],l=document.createElement("script");"function"==typeof t&&(r=t,t={}),t=t||{},r=r||function(){},l.type=t.type||"text/javascript",l.charset=t.charset||"utf8",l.async=!("async"in t)||!!t.async,l.src=e,t.attrs&&n(l,t.attrs),t.text&&(l.text=""+t.text),("onload"in l?a:o)(l,r),l.onload||a(l,r),i.appendChild(l)}},1985:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),f=a(c),p=n(12),d=a(p),m=n(1984),g=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onLoad=n.onLoad.bind(n),n.state={isScriptLoaded:n.props.isScriptLoaded,config:n.props.config},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.isScriptLoaded?this.onLoad():m(this.props.scriptUrl,this.onLoad)}},{key:"onLoad",value:function(){if(this.setState({isScriptLoaded:!0}),!window.CKEDITOR)return void console.error("CKEditor not found");this.editorInstance=window.CKEDITOR.appendTo(d.default.findDOMNode(this),this.state.config,this.props.content);for(var e in this.props.events){var t=this.props.events[e];this.editorInstance.on(e,t)}}},{key:"render",value:function(){return u.default.createElement("div",{className:this.props.activeClass})}}]),t}(u.default.Component);g.defaultProps={content:"",config:{},isScriptLoaded:!1,scriptUrl:"https://cdn.ckeditor.com/4.6.2/standard/ckeditor.js",activeClass:"",events:{}},g.propTypes={content:f.default.any,config:f.default.object,isScriptLoaded:f.default.bool,scriptUrl:f.default.string,activeClass:f.default.string,events:f.default.object},t.default=g},1986:function(e,t,n){"use strict";e.exports=n(1985)},2011:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(84),f=a(c),p=n(1986),d=a(p),m=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e){var t=n.props.callback,a=e.editor.getData();n.setState({content:a}),t&&t(a)},n.onBlur=function(e){},n.clean=function(){var e=CKEDITOR,t=e.instances;for(var n in t)try{t[n].setData("")}catch(e){console.log("error",e)}},n.afterPaste=function(e){},n.state={content:e.content},n}return i(t,e),l(t,[{key:"render",value:function(){var e=null;return this.props.content&&(e=this.props.content),u.default.createElement(d.default,{activeClass:"p10",content:e,config:{language:"zh-cn",filebrowserUploadUrl:"/api/file/upload_callback"},events:{blur:this.onBlur,afterPaste:this.afterPaste,change:this.onChange}})}}]),t}(f.default);t.default=m},2088:function(e,t,n){var a=n(1957);"string"==typeof a&&(a=[[e.i,a,""]]);var o={};o.transform=void 0;n(93)(a,o);a.locals&&(e.exports=a.locals)}});