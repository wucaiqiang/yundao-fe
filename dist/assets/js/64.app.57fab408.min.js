webpackJsonp([64],{1704:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"get_fields",value:function(e){return o.default.get("/product/get_fields",{typeId:e})}},{key:"add",value:function(e){return o.default.post("/product/add",e)}},{key:"update_base",value:function(e){return o.default.post("/product/base/update",e)}},{key:"update_status",value:function(e){return o.default.post("/product/update_status",e)}},{key:"del",value:function(e){return o.default.post("/product/delete",e)}},{key:"audit",value:function(e){return o.default.post("/product/control/audit/do",e)}},{key:"auditRecord",value:function(e){return o.default.get("/product/control/audit/get_history_audit_detail",{productId:e})}},{key:"update_base",value:function(e){return o.default.post("/product/base/update",e)}},{key:"update_sale",value:function(e){return o.default.post("/product/sale/update",e)}},{key:"update_quotation",value:function(e){return o.default.post("/product/supplier_quotation/update",e)}},{key:"update_commission",value:function(e){return o.default.post("/product/commission/update",e)}},{key:"update_income",value:function(e){return o.default.post("/product/income/update",e)}},{key:"focus",value:function(e){return o.default.post("/product/focus",{ids:e.join(",")})}},{key:"un_focus",value:function(e){return o.default.post("/product/cancel_focus",{ids:e.join(",")})}},{key:"get_detail",value:function(e){return o.default.get("/product/get_detail_by_id",{id:e})}},{key:"attach_add",value:function(e){return o.default.post("/product/attach/add",e)}},{key:"attach_update",value:function(e){return o.default.post("/product/attach/update",e)}},{key:"attach_delete",value:function(e){return o.default.post("/product/attach/delete",{id:e})}},{key:"get_product",value:function(e){return o.default.get("/product/get_select_option_list",{name:e})}},{key:"get_appointment_product",value:function(e){return o.default.get("/product/get_select_option_selling",{name:e})}},{key:"get_declaration_product",value:function(e){return o.default.get("/product/get_select_option_for_declaration",{name:e})}}]),e}();t.default=i},1717:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(1),f=n(d),m=a(1718),p=n(m),_=a(1723),h=n(_),g=c.Upload.Dragger,v=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.beforeUpload=function(e,t){var n=a.props,l=n.accept,r=n.fileSize,o=a.accept.indexOf(e.type)>-1;o||c.message.error("只支持这些类型文件:"+l+"!");var i=e.size<a.fileSize;return i||c.message.error("文件大小不能大于"+r),o&&i},a.onRemove=function(e){a.setState(function(t){var n=t.fileList,l=n.indexOf(e),r=n.slice();return r.splice(l,1),a.props.onRemove&&a.props.onRemove.call(a,e,a),{fileList:r}})},a.handleProgress=function(){a.uploader.onProgress(function(e,t){})},a.msgList={},a.showUploadMsg=function(e,t){var n=a.state.msgList;n[e.uid]&&n[e.uid].show?(n[e.uid].content=t,a.setState({msgList:n}),c.message.destroy(),c.message.success(t)):(n[e.uid]={content:t,show:!0},a.setState({msgList:n},function(){c.message.info(n[e.uid].content,function(){n[e.uid].show=!1,a.setState({msgList:n})})}))},a.handleChange=function(e){var t=e.file,n=e.fileList;if("done"===t.status){a.showUploadMsg(t,"文件上传成功");var l=t.response;if(l.success){var r=n.filter(function(e){return e.uid===t.uid})[0],o=r.response;o&&o.result&&(r.url=o.result.url,t.url=o.result.url),a.props.onSave&&a.props.onSave.call(a,t,a),a.props.onChange&&a.props.onChange.call(a,n,a)}else switch(a.onRemove(t),l.code){case 9e5:case 900001:return void(location.href="/login");default:c.message.destroy(),c.message.error(l.message)}}else if("uploading"===t.status){console.log("uploading"),console.log(t);0==t.percent?a.showUploadMsg(t,"文件正在上传中..."):t.percent,a.props.onChange&&a.props.onChange.call(a,n,a)}else"removed"===t.status?a.props.onChange&&a.props.onChange.call(a,n,a):"error"===t.status&&(c.message.destroy(),c.message.error("文件上传失败!"),a.onRemove(t));a.props.onChange&&a.props.onChange.call(a,n,a),a.setState({fileList:n})},a.state={fileList:e.fileList||[],msgList:{}},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.Mime=new p.default,this.fileSize=this.parseFileSize(this.props.fileSize),this.accept=this.Mime.extList2mimes(this.props.accept).join(",")}},{key:"componentWillReceiveProps",value:function(e){"fileList"in e&&this.setState({fileList:e.fileList||[]})}},{key:"clear",value:function(){var e=this;setTimeout(function(){e.setState({fileList:[]})})}},{key:"parseFileSize",value:function(e){if("string"!=typeof e)return e;var t,a={t:1099511627776,g:1073741824,m:1048576,k:1024};return e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],a.hasOwnProperty(t)&&(e*=a[t]),e}},{key:"handleEdit",value:function(e){var t=void 0;this.props.onClickMask&&(t=this.props.onClickMask.call(this,e)),(!1===this.props.editable||t)&&e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props.fileCount,a=!0,n=this.state.fileList,l=u.default.createElement("div",null,u.default.createElement(c.Icon,{type:"plus"}),u.default.createElement("div",{className:"ant-upload-text"},"Upload"));n?n.length>=t&&(a=!1):a=!0,t<=0&&(a=!1);var r=this.props,o=r.dragger,i=r.action,s=r.showUploadList,d=r.multiple,f=r.onRemove,m=r.children,p=o?g:c.Upload;return u.default.createElement("div",{className:"upload-card"+(a?"":" upload-card-uploaded")},u.default.createElement(p,{ref:function(t){return e.uploader=t},uploader:"uploader",name:"file",action:i,showUploadList:s,multiple:d,onRemove:f,onChange:this.handleChange,beforeUpload:this.beforeUpload,withCredentials:!0,accept:this.accept+","+this.props.accept.split(",").map(function(e){return"."+e}).join(","),fileList:this.state.fileList},a?m||l:null))}}],[{key:"Video",get:function(){return u.default.createElement(h.default,null)}}]),t}(u.default.Component);v.propTypes={multiple:f.default.bool,fileCount:f.default.number,action:f.default.string.isRequired},v.defaultProps={multiple:!1,accept:"doc,docx,xls,xlsx,pdf,png,jpg,jpeg,gif,txt",fileCount:10,fileSize:"30MB",action:"/api/file/upload"},t.default=v},1718:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.mimes={},this.extensions={},this.addMimeType(e.mimeData)}return l(e,[{key:"addMimeType",value:function(e){var t,a,n,l=e.split(/,/);for(t=0;t<l.length;t+=2){for(n=l[t+1].split(/ /),a=0;a<n.length;a++)this.mimes[n[a]]=l[t];this.extensions[l[t]]=n}}},{key:"extList2mimes",value:function(e,t){var a,n,l=this,r=e.split(/\s*,\s*/),o=[];for(a=0;a<r.length;a++){if("*"===r[a])return[];if(n=l.mimes[r[a]])-1===o.indexOf(n)&&o.push(n);else{if(!t||!/^\w+$/.test(r[a]))return[];o.push("."+r[a])}}return o}},{key:"mimes2exts",value:function(e){var t=this,a=[];return e.forEach(function(e){if("*"===e)return a=[],!1;var n=e.match(/^(\w+)\/(\*|\w+)$/);n&&("*"===n[2]?t.extensions.forEach(function(e,l){new RegExp("^"+n[1]+"/").test(l)&&[].push.apply(a,t.extensions[l])}):t.extensions[e]&&[].push.apply(a,t.extensions[e]))}),a}},{key:"mimes2extList",value:function(e){var t=[];return"string"==typeof e&&(e=e.trim().split(/\s*,\s*/)),t=this.mimes2exts(e),t.length?t.join(","):"*"}},{key:"getFileExtension",value:function(e){var t=e&&e.match(/\.([^.]+)$/);return t?t[1].toLowerCase():""}},{key:"getFileMime",value:function(e){return this.mimes[this.getFileExtension(e)]||""}}]),e}();r.mimeData="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mp4v mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-f4v,f4v,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.rn-realmedia-vbr,rmvb,video/x-ms-asf,asf,video/x-ms-asf,asx,video/x-ms-wm,wm,video/x-pn-realvideo,ra,application/vnd.rn-realmedia,rm,video/x-pn-realvideo,ram,video/dvd,vob,application/octet-stream,dat,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",t.default=r},1720:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),f=a(42),m=a(357),p=(n(m),a(95)),_=n(p),h=a(188),g=(n(h),a(359)),v=n(g),b=a(84),y=n(b),E=void 0,k=f.Select.Option,w=function(e){function t(){var e,a,n,l;r(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={list:[],notFoundContent:null},n.getSearchCache=function(){var e=n.cacheName;if(console.log(n.cacheName),["search_customer_cache"].indexOf(e)>-1)return[];var t=n.storage.get(e)||[];return n.unique(t)},n.unique=function(e){var t=[],a=[];e.map(function(e){e&&-1==t.indexOf(e.key)&&(a.push({key:e.key,value:e.key,label:e.label}),t.push(e.key))});return a},n.updateSearchCache=function(e){var t=n.cacheName,a=n.getSearchCache(t);e&&t&&(a.unshift(e),n.storage.set(t,n.unique(a).splice(0,5)))},n.onSearch=function(){function e(){l(t).then(function(e){if(E===t&&e.success){var a=[];e.result.forEach(function(e){a.push(r(e))}),i.setState({list:a,notFoundContent:"无匹配结果"})}})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=n.props,l=a.request,r=a.format;a.name;if(!(t=t.replace(/(^\s*)|(\s*)$/g,""))&&!n.isProduct()&&!n.isVideo()){var o=n.getSearchCache();return void n.setState({list:o,notFoundContent:null})}n.timeout&&(clearTimeout(n.timeout),n.timeout=null);var i=n;E=t,n.timeout=setTimeout(e,300)},n.isProduct=function(){return["productId"].indexOf(n.props.name)>-1},n.isVideo=function(){return["videoId"].indexOf(n.props.name)>-1},n.onChange=function(e){var t={},a=[],l=void 0,r=n.props,o=r.name,i=r.formUtils;t[o]=e?e.key:"",i&&i.setFieldsValue(t),n.setState({selected:e||null}),e&&n.state.list&&(l=n.state.list.find(function(t){return t.value==e.key}),l.key=e.key),n.props.callback&&n.props.callback(l),n.isProduct()||n.isVideo()?n.onSearch():(e&&void 0!=e?n.updateSearchCache(e):a=n.getSearchCache(),n.setState({list:a}))},l=a,o(n,l)}return i(t,e),u(t,[{key:"componentWillMount",value:function(){var e=this.props,t=(e.request,e.format,e.name),a=e.initData;_.default.getStorage("userInfo").id;if(this.cache=[],this.storage=new v.default("local","local"),["assistantId","receiverId","leaderId"].indexOf(t)>-1&&(this.cacheName="search_office_worker_cache"),this.isVideo()&&(this.cacheName="search_videoId_cache",this.onSearch("")),["customerId"].indexOf(t)>-1&&(this.cacheName="search_customer_cache"),this.isProduct()&&(this.cacheName="search_productId_cache",this.onSearch("")),!a||!a.value)if(this.isProduct()||this.isVideo())this.onSearch("");else{var n=this.getSearchCache();this.setState({list:n})}this.timeout=null}},{key:"render",value:function(){var e=this,t=this.props,a=t.initData,n=void 0===a?{}:a,r=t.placeholder,o=t.disabled,i=(l(t,["initData","placeholder","disabled"]),this.state.notFoundContent),u={};return n&&n.value&&(u.defaultValue={key:n.value.toString(),label:n.label}),d.default.createElement(f.Select,s({placeholder:r||"请输入选择",getPopupContainer:function(){return e.props.popupContainer?e.props.popupContainer:e.props.name?document.getElementById(e.props.name+"_FormItem"):document.body},labelInValue:!0,showSearch:!0,allowClear:!0,disabled:o,notFoundContent:i},u,{filterOption:!1,onSearch:this.onSearch,onChange:this.onChange}),this.state.list.map(function(e){return d.default.createElement(k,{key:e.value,disabled:e.disabled},e.label)}))}}]),t}(y.default);t.default=w},1721:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],a={},n={};for(var l in e)t.push(e[l]),a[l]=e[l].value,n[e[l].value]=e[l].text;return{dictionary:t,enum:a,keyValue:n}}},1722:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fileId:fileId};return o.default.post("/video/add",e)}},{key:"get",value:function(e){return o.default.get("/video/get",{id:e})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:id,name:name};return o.default.post("/video/update",e)}},{key:"getSignature",value:function(){return o.default.get("/video/get_upload_signature")}},{key:"delete",value:function(e){return o.default.post("/video/delete",{ids:e})}},{key:"transcode",value:function(e){return o.default.post("/video/convert",{ids:e})}},{key:"gets_by_name",value:function(e){return o.default.get("/video/gets_by_name",{name:e})}}]),e}();t.default=i},1723:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(1),m=n(f),p=a(1718),_=n(p),h=a(1722),g=n(h),v=d.Upload.Dragger,b=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.call(a),a.mime=new _.default;var n=a.mime.extList2mimes(a.props.accept,!0);return a.state={fileList:[],msgList:{},accept:n},console.log("accept",n),a}return i(t,e),s(t,[{key:"componentWillMount",value:function(){"infinite"!==this.props.fileSize&&(this.fileSize=this.parseFileSize(this.props.fileSize))}},{key:"componentWillReceiveProps",value:function(e){"fileList"in e&&this.setState({fileList:e.fileList||[]})}},{key:"clear",value:function(){var e=this;setTimeout(function(){e.setState({fileList:[]})})}},{key:"parseFileSize",value:function(e){if("string"!=typeof e)return e;var t,a={t:1099511627776,g:1073741824,m:1048576,k:1024};return e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],a.hasOwnProperty(t)&&(e*=a[t]),e}},{key:"render",value:function(){var e=this,t=this.props.fileCount,a=!0,n=this.state.fileList,r=c.default.createElement("div",null,c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("div",{className:"ant-upload-text"},"Upload"));n?n.length>=t&&(a=!1):a=!0,t<=0&&(a=!1);var o=this.props,i=o.dragger,s=o.action,u=o.showUploadList,f=o.multiple,m=o.onRemove,p=o.children,_=(l(o,["dragger","action","showUploadList","multiple","onRemove","children"]),i?v:d.Upload);return c.default.createElement("div",{className:"upload-card"+(a?"":" upload-card-uploaded")},c.default.createElement(_,{ref:function(t){return e.uploader=t},uploader:"uploader",name:"file",action:s,showUploadList:u,multiple:f,onRemove:m,beforeUpload:this.beforeUpload,withCredentials:!0,customRequest:this.customRequest,fileList:this.state.fileList},a?p||r:null))}}]),t}(u.Component);b.propTypes={multiple:m.default.bool,fileCount:m.default.number},b.defaultProps={multiple:!1,accept:"wmv,wm,asf,asx,rm,rmvb,ra,ram,mpg,mpeg,mpe,vob,dat,mov,3gp,mp4,mp4v,m4v,mkv,avi,flv,f4v",fileCount:10,fileSize:"infinite"};var y=function(){var e=this;this.beforeUpload=function(t,a){var n=e.props,l=(n.accept,n.fileSize),r=t.name.split(".")[t.name.split(".").length-1],o=e.state.accept.indexOf(t.type)>-1||e.props.accept.indexOf(r)>-1;o||d.message.error("不支持的文件格式");var i=!0;return e.fileSize&&((i=t.size<e.fileSize)||d.message.error("文件大小不能大于"+l)),o&&i},this.onRemove=function(t){e.setState(function(a){var n=a.fileList,l=n.indexOf(t),r=n.slice();return r.splice(l,1),e.props.onRemove&&e.props.onRemove.call(e,t,e),{fileList:r}})},this.handleProgress=function(){e.uploader.onProgress(function(e,t){console.log(e.state,e.percent)})},this.msgList={},this.showUploadMsg=function(t,a){var n=e.state.msgList;n[t.uid]&&n[t.uid].show?(n[t.uid].content=a,e.setState({msgList:n}),d.message.destroy(),d.message.success(a)):(n[t.uid]={content:a,show:!0},e.setState({msgList:n},function(){d.message.info(n[t.uid].content,function(){n[t.uid].show=!1,e.setState({msgList:n})})}))},this.start=function(t,n){var l=window,r=l.APP,o=t.uid,i=function(){return n?r.state[n]||[]:r.state.uploadVideoList||[]},s=function(e){var t={};n?t[n]=e:t.uploadVideoList=e,r.setState(t)},u=e,c=new g.default;a.e(0).then(function(){var e=a(728);window.$=e,window.jQuery=e,window.qcVideo.ugcUploader.start({videoFile:t,getSignature:function(e){c.getSignature().then(function(t){if(t&&t.success&&t.result)e(t.result);else{var a=i(),n=a?a.map(function(e){return e.uid==o&&(e.status="error"),e}):[];s(n),u.props.onError&&u.props.onError(t)}})},success:function(e){console.log("success")},error:function(e){console.log("上传失败:",e),console.log("上传失败的文件类型："+e.type),console.log("上传失败的原因："+e.msg),e.status="error";var t=i(),a=t?t.map(function(e){return e.uid==o&&(e.status="error"),e}):[];u.props.onError&&u.props.onError(e),s(a)},progress:function(e){console.log("上传进度:",e),console.log("上传进度的文件类型："+e.type),console.log("上传进度的文件名称："+e.name),console.log("上传进度："+e.shacurr);var t=i(),a=t?t.map(function(t){return t.uid==o&&(t.status="uploading",t.percent=100*e.shacurr||0),t}):[];u.props.onProgress&&u.props.onProgress(e),s(a)},finish:function(e){console.log("finish");var t=i();console.log("uploadVideoList",t),console.log("uid",o);var a=t?t.filter(function(e){return e.uid==o})[0]:{};if(a.fileId=e.fileId,u.props.onSave)return void u.props.onSave(a);c.add(a).then(function(e){var t="done";e.success||(t="error"),"done"==t&&d.notification.success({message:"视频上传成功",description:a.name+",该视频已成功上传"});var n=i(),l=n?n.map(function(e){return e.uid==o&&(e.status=t),e}):[];s(l)}),console.log("上传成功:",e),console.log("上传成功的文件类型："+e.type)}})}.bind(null,a)).catch(a.oe)},this.customRequest=function(t){var a=(t.onProgress,t.onError,t.onSuccess,t.data,t.filename,t.file);t.withCredentials,t.action,t.headers;console.log("file",a),e.props.onAdd&&e.props.onAdd(a)}};t.default=b},1727:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"get_page",value:function(){return o.default.get("/product/fieldgroup/get_page")}},{key:"get_all",value:function(){return o.default.get("/product/fieldgroup/get_all")}},{key:"get",value:function(e){return o.default.get("/product/fieldgroup/get",{id:e})}},{key:"add",value:function(e){return o.default.post("/product/fieldgroup/add",e)}},{key:"edit",value:function(e){return o.default.post("/product/fieldgroup/update",e)}},{key:"update_info",value:function(e){return o.default.post("/product/fieldgroup/update_info",e)}},{key:"update_rel",value:function(e){return o.default.post("/product/fieldgroup/update_rel",e)}},{key:"delete",value:function(e){return o.default.post("/product/fieldgroup/delete",{ids:e.join(",")})}}]),e}();t.default=i},1730:function(e,t,a){var n=a(1971);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1731:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(84),f=n(d),m=a(1773),p=n(m),_=a(2037),h=n(_),g=a(2035),v=n(g),b=a(2034),y=n(b),E=a(2042),k=n(E),w=a(2043),x=n(w),F=a(2036),C=n(F),j=a(2040),O=n(j),D=a(2041),S=n(D),U=a(2031),P=n(U),I=a(1730),N=n(I),T=c.Tabs.TabPane,V=p.default.EnumCustomerType,M=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loading:!0,visible:!1,activeKey:"1"},a.handleRefreshDynamic=function(){a.customerDetailDynamic.reload()},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.setState({activeKey:this.props.data.activeKey||"1"})}},{key:"componentWillReceiveProps",value:function(e){e.data&&e.data.activeKey&&(console.log("nextProps.data",e.data),this.setState({activeKey:e.data.activeKey}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.mod;return a&&a.info?a.info.permission&&a.info.permission.readPermission?u.default.createElement("div",{className:N.default.customer_detail},u.default.createElement(h.default,{data:a,mod:n}),u.default.createElement("div",{className:N.default.content},u.default.createElement("div",{style:{display:"flex"}},u.default.createElement("div",{style:{flex:2,overflow:"hidden",marginRight:"20px"}},u.default.createElement(c.Tabs,{defaultActiveKey:"1",activeKey:this.state.activeKey,onTabClick:function(t){e.setState({activeKey:t})}},u.default.createElement(T,{tab:"动态",key:"1"},u.default.createElement(v.default,{ref:function(t){return e.customerDetailDynamic=t},customerId:a.id})),u.default.createElement(T,{tab:"销售线索",key:"0"},"0"==this.state.activeKey?u.default.createElement(y.default,{customerId:a.id,parent:this}):null),u.default.createElement(T,{tab:"交易信息",key:"2"},"2"==this.state.activeKey?u.default.createElement(k.default,{customerId:a.id}):null),u.default.createElement(T,{tab:"资料",key:"3"},"3"==this.state.activeKey?u.default.createElement(O.default,{data:a,mod:n}):null),a.info.customerType===V.enum.ORGANIZATION?u.default.createElement(T,{tab:"联系人",key:"4"},"contact"==this.state.activeKey?u.default.createElement(P.default,{customerId:a.id,data:a,mod:n}):null):null,u.default.createElement(T,{tab:"合规管理",key:"contact"},"4"==this.state.activeKey?u.default.createElement(S.default,{customerId:a.id,data:a,mod:n}):null),u.default.createElement(T,{tab:"回访记录",key:"6"},"6"==this.state.activeKey?u.default.createElement(x.default,{customerId:a.id}):null))),u.default.createElement("div",{style:{flex:1}},u.default.createElement(C.default,{data:a,customerId:a.id,ref:function(t){return e.customerDetailFollow=t},callback:function(){e.handleRefreshDynamic()}}))))):u.default.createElement("div",{className:N.default.customer_detail+" error"},"无权限查看"):null}}]),t}(f.default);t.default=M},1750:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){function t(){f.default.unmountComponentAtNode(l)&&l.parentNode&&l.parentNode.removeChild(l);for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t&&t.length&&t.some(function(e){return e&&e.triggerCancel});a.onCancel&&r&&a.onCancel.apply(a,t)}var a=(0,s.default)({iconType:"question-circle",okType:"primary"},e),n=a.prefixCls||"ant-confirm",l=document.createElement("div");document.body.appendChild(l);var r=a.width||416,i=a.style||{},u=void 0!==a.maskClosable&&a.maskClosable;"okCancel"in a||(a.okCancel=!0);var d={okText:"确定",cancelText:"取消",justOkText:"知道了"};a.okText=a.okText||(a.okCancel?d.okText:d.justOkText),a.cancelText=a.cancelText||d.cancelText;var m=c.default.createElement("div",{className:n+"-body"},c.default.createElement(_.Icon,{type:a.iconType}),c.default.createElement("span",{className:n+"-title"},a.title),c.default.createElement("div",{className:n+"-content"},a.content)),h=null;h=a.okCancel?c.default.createElement("div",{className:n+"-btns"},c.default.createElement(g.default,{actionFn:a.onCancel,closeModal:t},a.cancelText),c.default.createElement(g.default,{type:a.okType,actionFn:a.onOk,closeModal:t,autoFocus:!0},a.okText)):c.default.createElement("div",{className:n+"-btns"},c.default.createElement(g.default,{type:a.okType,actionFn:a.onOk,closeModal:t,autoFocus:!0},a.okText));var v=(0,p.default)(n,(0,o.default)({},n+"-"+a.type,!0),a.className);return f.default.render(c.default.createElement(_.Modal,{wrapClassName:a.wrapClassName,className:v,onCancel:t.bind(this,{triggerCancel:!0}),visible:!0,title:"",transitionName:"zoom",footer:"",maskTransitionName:"fade",maskClosable:u,style:i,width:r,zIndex:a.zIndex},c.default.createElement("div",{className:n+"-body-wrapper"},m," ",h)),l),{destroy:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=a(10),o=n(r),i=a(2),s=n(i),u=a(0),c=n(u),d=a(12),f=n(d),m=a(9),p=n(m),_=a(42),h=a(1772),g=n(h)},1753:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"add",value:function(e){return o.default.post("/reservation/add",e)}},{key:"center_add",value:function(e){return o.default.post("/product/center/reservation",e)}},{key:"update",value:function(e){return o.default.post("/reservation/update",e)}},{key:"get",value:function(e){return o.default.get("/reservation/get",{id:e})}},{key:"cancel",value:function(e){return o.default.post("/reservation/cancel",e)}},{key:"again_commit",value:function(e){return o.default.post("/reservation/again_commit",e)}},{key:"audit",value:function(e){return o.default.post("/reservation/audit/do",e)}},{key:"get_my_select",value:function(e){return o.default.get("/reservation/gets/my_select",{productId:e})}},{key:"discard",value:function(e){return o.default.post("/reservation/audit/discard",e)}},{key:"audit_record",value:function(e){return o.default.get("/reservation/audit/gets_audit_record",e)}}]),e}();t.default=i},1765:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(33),f=n(d),m=a(84),p=n(m),_=a(357),h=n(_),g=a(1702),v=n(g),b=a(1793),y=n(b),E=a(1770),k=n(E),w=function(e){function t(){l(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleClose=function(){e.setState({visible:!1})},e.handleSubmit=function(t){t&&t.preventDefault(),e.formUtils.validateFields(function(t){if(!t){var a=!1,n=e.formUtils.getFieldsValue();n.tags.split(",").map(function(e){e.length>8&&(a=!0,c.message.error("单个标签("+e+")的长度不超过8"))}),a||(e.setState({visible:!1},function(){e.formUtils.resetFields()}),e.props.submit&&e.props.submit(n))}})},e.state={loading:!1,visible:!1,isEdit:!1,formData:{},action:null},e.formUtils=new h.default("editCustomerTagModal"),e}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.customer=new v.default}},{key:"componentDidMount",value:function(){}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("formData",t),this.setState({formData:t,visible:!0},function(){e.formUtils.resetFields(),e.formUtils.setFieldsValue(t)})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,f.default)(a).format("YYYY-MM-DD HH:mm:ss"):a instanceof f.default&&(a=(0,f.default)(a).format("YYYY-MM-DD HH:mm:ss")),a instanceof Array&&(a=a.join(",")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD HH:mm:ss")),e[t]=a}return e}},{key:"renderFooterBtn",value:function(){return[u.default.createElement(c.Button,{key:"cancel",onClick:this.handleClose}," ","取消"," "),u.default.createElement(c.Button,{type:"primary",key:"submit",onClick:this.handleSubmit},"确定")]}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.formData;return u.default.createElement(c.Modal,{visible:a,title:"编辑标签",width:500,className:"vant-modal  yundao-modal "+k.default.modal,wrapClassName:"vertical-center-modal showfloat",onCancel:this.handleClose,closable:!1,maskClosable:!1,footer:this.renderFooterBtn()},u.default.createElement(y.default,{ref:function(t){return e.customerForm=t},formUtils:this.formUtils,checkedTags:n&&n.tags&&n.tags.split(","),setForm:function(t){return e.form=t},callback:this.props.callback}))}}]),t}(p.default);t.default=w},1769:function(e,t,a){var n=a(1787);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1770:function(e,t,a){var n=a(1788);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1772:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(12),d=n(c),f=a(42),m=function(e){function t(){for(var e,a,n,o,i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return l(this,t),a=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={loading:!1},n.onClick=function(){var e=n.props,t=e.actionFn,a=e.closeModal;if(t){var l=void 0;t.length?l=t(a):(l=t())||a(),l&&l.then&&(n.setState({loading:!0}),l.then(function(){a.apply(void 0,arguments)},function(){this.setState({loading:!1})}))}else a()},o=a,r(n,o)}return o(t,e),i(t,[{key:"componentDidMount",value:function(){if(this.props.autoFocus){var e=d.default.findDOMNode(this);this.timeoutId=setTimeout(function(){return e.focus()})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.children,n=this.state.loading.loading;return u.default.createElement(f.Button,{type:t,loading:n,size:"large",onClick:this.onClick},a)}}]),t}(u.default.Component);t.default=m},1773:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1721),l=function(e){return e&&e.__esModule?e:{default:e}}(n),r=(0,l.default)({REVIEW:{text:"审批中",value:1},PASS:{text:"已通过",value:2},REJECT:{text:"已驳回",value:3}}),o=(0,l.default)({REVIEW:{text:"未确认",value:"0"},PASS:{text:"有效客户",value:"1"},REJECT:{text:"无效客户",value:"2"}}),i=(0,l.default)({PERSON:{text:"个人客户",value:"1"},ORGANIZATION:{text:"机构客户",value:"2"}});t.default={EnumAuditStatus:r,EnumCustomerStatus:o,EnumCustomerType:i}},1779:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(188),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(){n(this,e)}return l(e,[{key:"getVisit",value:function(e){return o.default.get("/user/visit/get_detail_for_leads",{leadsId:e})}},{key:"getUnallot",value:function(e){return o.default.get("/leads/customer/get_unallot",{customerId:e})}},{key:"allot",value:function(e){return o.default.post("/leads/allot",e)}},{key:"tryAllot",value:function(e){return o.default.post("/leads/try_allot",e)}},{key:"allotFp",value:function(e){return o.default.post("/leads/allot_to_fp",e)}},{key:"process",value:function(e){return o.default.post("/leads/process",e)}},{key:"getCount",value:function(e){return o.default.get("/customer/detail/get_leads_chance_count",{customerId:e})}}]),e}();t.default=i},1780:function(e,t,a){var n=a(1789);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1787:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,'.modal___311Q7 .ant-modal-body{max-height:500px;overflow-y:scroll;padding:20px 46px}.modal___311Q7 .ant-form-item-label{text-align:left}.modal___311Q7 .ant-form-item-label label:before{display:inline-block;margin-right:4px;content:" ";font-family:SimSun;line-height:1;font-size:12px;color:#f04134;width:10px}.modal___311Q7 .ant-form-item-label .ant-form-item-required:before{content:"*"}.modal___311Q7 .ant-btn.ant_btn_plus{width:40px;height:40px;padding:0;min-width:40px;border-color:#f2d5aa;float:right}.modal___311Q7 .ant-btn.ant_btn_plus .anticon-plus{font-size:16px;color:#c19e6e}',""]),t.locals={modal:"modal___311Q7"}},1788:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,".modal___QYUUj .ant-form-item-control .ant-input{min-height:40px;line-height:30px}.modal___QYUUj .title___2vtCP{font-family:PingFangSC-Regular,sans-serif;font-size:16px;color:#999;margin-bottom:12px}.modal___QYUUj .box___1Kjdm{padding:15px;max-height:200px;overflow:auto;border:1px solid #e0e4e8;border-radius:2px}.modal___QYUUj .tags___2xW-N .tag___307EO .ant-checkbox-group-item{margin-bottom:12px;line-height:30px}.modal___QYUUj .tags___2xW-N .tag___307EO .ant-checkbox-group-item .ant-checkbox{display:none}.modal___QYUUj .tags___2xW-N .tag___307EO .ant-checkbox-group-item .ant-checkbox.ant-checkbox-checked+span{background-color:rgba(71,83,114,.1);color:#475372;border-color:transparent}.modal___QYUUj .tags___2xW-N .tag___307EO .ant-checkbox-group-item .ant-checkbox+span{border-radius:2px;padding:6px 11px;background-color:#fff;border:1px solid #e0e4e8;font-family:PingFangSC-Regular;font-size:12px;color:#999}",""]),t.locals={modal:"modal___QYUUj",title:"title___2vtCP",box:"box___1Kjdm",tags:"tags___2xW-N",tag:"tag___307EO"}},1789:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,".modal___vfTKz .ant-modal-body{padding:30px 40px}.modal___vfTKz .table___7xFjl{margin-bottom:30px}.modal___vfTKz .table_title___2f_jP{margin-bottom:17px;line-height:22px;color:#999;font-size:16px}.modal___vfTKz .table_content___1KpIZ{max-height:300px}.modal___vfTKz .table_content___1KpIZ .ant-table{border-radius:1px 1px 0 0}.modal___vfTKz .table_content___1KpIZ .ant-table-thead>tr>th{background-color:rgba(224,228,232,.5)}.modal___vfTKz .table_content___1KpIZ .ant-table-tbody>tr.ant-table-row-hover>td,.modal___vfTKz .table_content___1KpIZ .ant-table-tbody>tr:hover>td,.modal___vfTKz .table_content___1KpIZ .ant-table-thead>tr.ant-table-row-hover>td,.modal___vfTKz .table_content___1KpIZ .ant-table-thead>tr:hover>td{background-color:#fdfaf5}.modal___vfTKz .visitForm___G0aVu .ant-form-item{margin-bottom:0}",""]),t.locals={modal:"modal___vfTKz",table:"table___7xFjl",table_title:"table_title___2f_jP",table_content:"table_content___1KpIZ",visitForm:"visitForm___G0aVu"}},1790:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,".modal___1773E .ant-modal-body{padding:35px 40px}.modal___1773E .ant-modal-body .ant-calendar-picker{width:100%}.modal___1773E .ant-modal-body .ant-input-number-lg{width:92%}.modal___1773E .ant-modal-body .ant-input-number-lg .ant-input-number-input{height:35px}.ant-confirm-confirm .ant-confirm-body>.anticon-check-circle{color:#00a854}",""]),t.locals={modal:"modal___1773E"}},1793:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(84),m=n(f),p=a(357),_=n(p),h=a(1702),g=n(h),v=a(1770),b=n(v),y=d.Form.Item,E=(d.Select.Option,d.Input.Textarea,d.AutoComplete.Option,d.Radio.Group,d.Checkbox.Group),k=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onChange=function(e){var t=[].concat(l(new Set(e.filter(function(e){return""!=e.trim()}))));a.setState({checkedTags:[].concat(l(new Set(e))),inputValue:t.join(",")}),a.updateTagsValue(t.join(","))},a.onInput=function(e){var t=e.target.value,n=[].concat(l(new Set(t.replace(/，/g,",").split(","))));a.setState({checkedTags:n,inputValue:t}),a.updateTagsValue(n.join(","))},a.updateTagsValue=function(e){a.formUtils.setFieldsValue({tags:e})},a.getTags=function(){var e=a.state,t=e.topTags,n=e.checkedTags;return c.default.createElement(E,{className:b.default.tag,options:t,value:n,onChange:a.onChange})},a.state={loading:!1,topTags:[],checkedTags:a.props.checkedTags||[],inputValue:a.props.checkedTags?a.props.checkedTags.join(","):null},a.formUtils=new _.default("EditCustomerTagForm"),a}return i(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.customer=new g.default,this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this),this.customer.tag_get_top().then(function(t){t&&t.result&&e.setState({topTags:t.result.map(function(e){return e.name})})})}},{key:"getFormClassName",value:function(){var e=void 0;return e=["float-slide-form","vant-spin","follow-form"],this.state.loading&&e.push("loading"),e.join(" ")}},{key:"render",value:function(){var e={labelCol:{span:6},wrapperCol:{span:24}};return c.default.createElement("div",null,c.default.createElement(d.Form,{className:this.getFormClassName()},c.default.createElement("p",{className:b.default.title},"从已有标签中选择"),c.default.createElement("div",{className:b.default.box,style:{marginBottom:"36px"}},c.default.createElement("div",{className:b.default.tags},this.getTags())),c.default.createElement("p",{className:b.default.title},"创建新标签"),this.formUtils.getFieldDecorator("tags")(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(y,e,c.default.createElement(d.Input,{onChange:this.onInput,value:this.state.inputValue,placeholder:"多个标签请用逗号隔开"}))))}}]),t}(m.default);k=d.Form.create()(k),t.default=k},1794:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(12),f=n(d),m=a(85),p=a(42),_=a(84),h=n(_),g=a(357),v=n(g),b=a(1702),y=n(b),E=a(33),k=n(E),w=a(1704),x=n(w),F=a(1720),C=n(F),j=p.Form.Item,O=p.Radio.Group,D=function(e){function t(){l(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.products=[],e.handleChangeProduct=function(t){if(t){var a=e.products[t.key],n=a.canReservation,l=a.notCanReservationTitle;e.setState({canReservation:n,notCanReservationTitle:l}),e.props.onChange&&e.props.onChange(n)}},e.state={loading:!1},e.formUtils=new v.default("EditAppointmentForm"),e}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this),this.product=new x.default,this.customer=new y.default}},{key:"getFormClassName",value:function(){var e=void 0;return e=["float-slide-form","vant-spin","follow-form"],this.state.loading&&e.push("loading"),e.join(" ")}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.initFields,l=t.isEdit,r={labelCol:{span:7},wrapperCol:{span:17}},o=this.state,s=o.canReservation,u=void 0!==s&&s,d=o.notCanReservationTitle;return c.default.createElement(p.Form,{className:this.getFormClassName(),ref:function(t){return e.container=f.default.findDOMNode(t)}},l?c.default.createElement("div",null,c.default.createElement(j,i({label:"产品名称"},r),c.default.createElement("div",{id:"productId_FormItem"},n&&n.indexOf("productId")>-1?c.default.createElement("div",null,a.productName):c.default.createElement(C.default,{placeholder:"请输入并选择产品",request:this.product.get_appointment_product,format:function(t){return t.value=t.id,t.label=t.name,e.products[t.id]=t,t},callback:this.handleChangeProduct,formUtils:this.props.formUtils,name:"productId",initData:{label:a.productName,value:a.productId}}),this.formUtils.getFieldDecorator("productId",{initialValue:a.productId,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入并选择产品"}]})(c.default.createElement(p.Input,{type:"hidden"})))),d?c.default.createElement(j,i({label:"    "},r),d,d.indexOf("直接报单")>-1?c.default.createElement(m.Link,{to:"/sale/declaration"},"去报单"):null):u||a.productId?c.default.createElement("div",null,c.default.createElement(j,i({label:""},r,{style:{display:"none"}}),this.formUtils.getFieldDecorator("source",{initialValue:null})(c.default.createElement(p.Input,{type:"hidden"}))),c.default.createElement(j,i({label:""},r,{style:{display:"none"}}),this.formUtils.getFieldDecorator("channelId",{initialValue:null})(c.default.createElement(p.Input,{type:"hidden"}))),c.default.createElement(j,i({label:"客户/渠道"},r),c.default.createElement("div",{id:"customerId_FormItem"},c.default.createElement(C.default,{placeholder:"请输入并选择客户或渠道",request:this.customer.get_selection,format:function(e){return e.value=e.id,e.label=e.name+"("+e.mobile+")",e},formUtils:this.props.formUtils,name:"customerId",initData:{label:a.customerName,value:a.customerId},callback:function(t){e.formUtils.setFieldsValue({source:t?t.source:null,channelId:t?t.id:null})}}),this.formUtils.getFieldDecorator("customerId",{initialValue:a.customerId?a.customerId.toString():null,rules:[{validateTrigger:["onChange","onBlur"],required:!0,message:"请输入并选择客户或渠道"}]})(c.default.createElement(p.Input,{type:"hidden"})))),2===this.formUtils.getFieldValue("source")?c.default.createElement("div",null,c.default.createElement(p.Row,null,c.default.createElement(p.Col,{span:7}),c.default.createElement(p.Col,{span:17},"您选择的是渠道，请选择该渠道出单的类型")),c.default.createElement(j,i({label:"   "},r),this.formUtils.getFieldDecorator("customerType",{initialValue:"1"})(c.default.createElement(O,null,c.default.createElement(p.Radio,{value:"1",key:"1"},"为个人出单"),c.default.createElement(p.Radio,{value:"2",key:"2"},"为机构出单"))))):null,c.default.createElement(j,i({label:"预计打款日期"},r),this.formUtils.getFieldDecorator("estimatePayDate",{initialValue:a.estimatePayDate?(0,k.default)(a.estimatePayDate):null,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请选择预计打款日期"}]})(c.default.createElement(p.DatePicker,{format:"YYYY-MM-DD",getCalendarContainer:function(){return e.container}}))),c.default.createElement(j,i({label:"预约金额"},r),this.formUtils.getFieldDecorator("reservationAmount",{initialValue:a.reservationAmount,validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"请输入预约金额"}]})(c.default.createElement(p.InputNumber,null)),"万"),c.default.createElement(j,i({label:"备注"},r),this.formUtils.getFieldDecorator("remark",{initialValue:a.remark,validateTrigger:["onChange","onBlur"],rules:[{type:"string",whitespace:!0,message:"请填写长度不超过200个字符",min:1,max:200}]})(c.default.createElement(p.Input,{type:"textarea",rows:3,size:"large"})))):null):c.default.createElement("div",null,c.default.createElement(j,i({label:"产品名称"},r),a.productName),c.default.createElement(j,i({label:"客户/渠道"},r),a.customerName),c.default.createElement(j,i({label:"预计打款日期"},r),(0,k.default)(a.estimatePayDate).format("YYYY-MM-DD")),c.default.createElement(j,i({label:"预约金额"},r),a.reservationAmount),c.default.createElement(j,i({label:"备注"},r),a.remark)))}}]),t}(h.default);D=p.Form.create()(D),t.default=D},1795:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(33),f=n(d),m=a(84),p=n(m),_=a(357),h=n(_),g=a(1753),v=n(g),b=a(1794),y=n(b),E=a(1798),k=n(E),w=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClose=function(){a.hide()},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state.formData.id;a.formUtils.validateFields(function(e){if(!e){var n=a.formUtils.getFieldsValue();n=a.formatData(n),2===n.source&&(n.customerId=null);var l=t?a.appoint.update:"product.center"==a.state.formData.from?a.appoint.center_add:a.appoint.add;t&&(n.id=t),a.setState({submiting:!0},function(){l(n).then(function(e){a.setState({submiting:!1}),e.success&&(a.state.hasReSubmit?a.setState({isEdit:!1}):a.hide(),c.message.success((a.state.formData.id?"编辑":"新增")+"预约成功."),a.props.reload())})})}})},a.hide=function(){a.formUtils.resetFields(),a.setState({formData:{},visible:!1},function(){a.setState({hidden:!0})})},a.handleResubmit=function(){var e=a.state.formData.id;a.setState({submiting:!0},function(){a.appoint.again_commit({id:e}).then(function(e){a.setState({submiting:!1}),e.success&&(c.message.success("重新提交成功"),a.hide(),a.props.reload())})})},a.handleChange=function(e){a.setState({showSave:e})},a.state={loading:!1,visible:!1,canEdit:!1,isEdit:!1,hasReSubmit:!1,formData:{},submiting:!1},a.formUtils=new h.default("editAppoinementModal"),a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.appoint=new v.default}},{key:"componentDidMount",value:function(){}},{key:"show",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState({visible:!0,hidden:!1,canEdit:a,hasReSubmit:n}),e?e.id?(this.setState({formData:e,loading:!0,isEdit:!1}),this.appoint.get(e.id).then(function(e){if(e.success){var a=e.result.data,n=!1;3==a.status&&e.result.permission.editPermission&&(n=!0),t.setState({formData:a,canEdit:n,loading:!1}),t.form&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))}})):e.productId&&(this.setState({isEdit:!0,formData:e}),this.formUtils&&this.formUtils.resetFields(),this.formUtils.setFieldsValue({productId:e.productId})):(this.setState({formData:{},isEdit:!0}),this.formUtils.resetFields())}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,f.default)(a).format("YYYY-MM-DD"):a instanceof f.default&&(a=(0,f.default)(a).format("YYYY-MM-DD")),a instanceof Array&&(a=a.join(",")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"renderFooterBtn",value:function(){var e=this,t=this.state,a=t.loading,n=t.formData,l=t.isEdit,r=t.hasReSubmit,o=t.showSave,i=void 0===o||o,s=t.submiting;return[l&&n.id?u.default.createElement(c.Button,{key:"cancel",onClick:function(){e.setState({isEdit:!1})}},"取消"):u.default.createElement(c.Button,{key:"close",onClick:this.handleClose},"关闭"),a?null:!l&&r?u.default.createElement(c.Button,{key:"resubmit",type:"primary",loading:s,onClick:this.handleResubmit},"确定提交"):l&&i?u.default.createElement(c.Button,{key:"save",type:"primary",loading:s,onClick:this.handleSubmit},"保存"):null]}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.isEdit,l=(t.submiting,t.canEdit),r=t.formData;t.hidden;return u.default.createElement(c.Modal,{visible:a,title:u.default.createElement("div",null,(r.id?n?"编辑":"查看":"新增")+"预约",l&&!n?u.default.createElement(c.Icon,{className:"fr",type:"edit",onClick:function(){e.setState({isEdit:!0})}}):null),width:550,className:"vant-modal yundao-modal "+k.default.modal+" ",wrapClassName:"showfloat vertical-center-modal",onCancel:this.handleClose,closable:!1,footer:this.renderFooterBtn()},a?u.default.createElement(y.default,{initFields:this.props.initFields,ref:function(t){return e.customerForm=t},data:r,formUtils:this.formUtils,isEdit:n,setForm:function(t){return e.form=t},callback:this.props.callback,onChange:this.handleChange}):u.default.createElement(c.Spin,null))}}]),t}(p.default);t.default=w},1798:function(e,t,a){var n=a(1790);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1807:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1721),l=function(e){return e&&e.__esModule?e:{default:e}}(n),r=(0,l.default)({PENDING:{text:"待审批",value:1},PASS:{text:"已通过",value:2},REJECT:{text:"已驳回",value:3},UNDO:{text:"已取消",value:4},INVALID:{text:"已作废",value:5}});t.default={EnumAppointmentStatus:r}},1808:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1721),l=function(e){return e&&e.__esModule?e:{default:e}}(n),r=(0,l.default)({UNCOMMIT:{text:"未提交",value:0},PENDING:{text:"待审批",value:1},PASS:{text:"审批通过",value:2},REJECT:{text:"驳回修改",value:3},UNDO:{text:"已取消",value:4},INVALID:{text:"已作废",value:5}});t.default={EnumDeclarationStatus:r}},1824:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,".follow___3Xh2e .ant-form-item-label label{margin-right:14px}",""]),t.locals={follow:"follow___3Xh2e"}},1837:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(12),f=n(d),m=a(42),p=a(84),_=n(p),h=a(357),g=n(h),v=a(1698),b=n(v),y=a(1844),E=n(y),k=m.Form.Item,w=m.Select.Option,x=function(e){function t(){l(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.getOptions=function(e){return e.map(function(e){return c.default.createElement(w,{key:e.value,value:e.value.toString()},e.label)})},e.state={loading:!1,dictionary:{dic_follow_up_type:[]}},e.formUtils=new g.default("customerFollowForm"),e}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.dictionary=new b.default,this.getDictionary(),this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this)}},{key:"getDictionary",value:function(){var e=this;this.dictionary.gets("dic_follow_up_type").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e.selections}),e.setState({dictionary:a})}})}},{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:16}},a=this.state.dictionary.dic_follow_up_type;return c.default.createElement("div",{ref:function(t){return e.container=f.default.findDOMNode(t)},className:E.default.follow},c.default.createElement(m.Form,null,c.default.createElement(k,{style:{display:"none"}},this.props.formUtils.getFieldDecorator("customerId",{initialValue:""})(c.default.createElement(m.Input,{type:"hidden"}))),c.default.createElement(k,i({label:"跟进方式"},t),this.props.formUtils.getFieldDecorator("type",{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,type:"string",whitespace:!0,message:"请选择跟进方式"}]})(c.default.createElement(m.Select,{size:"large",getPopupContainer:function(){return e.container}},this.getOptions(a)))),c.default.createElement(k,i({label:"跟进内容"},t),this.props.formUtils.getFieldDecorator("content",{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,type:"string",whitespace:!0,message:"请填写长度不超过200个字符",min:1,max:200}]})(c.default.createElement(m.Input,{type:"textarea",rows:3,size:"large"}))),c.default.createElement(k,i({label:"下次跟进时间"},t),this.props.formUtils.getFieldDecorator("nextFollowDate",{})(c.default.createElement(m.DatePicker,{style:{width:"100%"},format:"YYYY-MM-DD HH:mm",placeholder:"请选择下次跟进时间",showTime:!0,getCalendarContainer:function(){return e.container}})))))}}]),t}(_.default);x=m.Form.create()(x),t.default=x},1844:function(e,t,a){var n=a(1824);"string"==typeof n&&(n=[[e.i,n,""]]);var l={};l.transform=void 0;a(93)(n,l);n.locals&&(e.exports=n.locals)},1971:function(e,t,a){t=e.exports=a(94)(void 0),t.push([e.i,'.float-customer-detail-wrap{z-index:11}.customer_detail___1eGV-{background-color:#f2f4f7}.customer_detail___1eGV-.error___3L1Q2{height:100%;display:flex;align-items:center;justify-content:center}.customer_detail___1eGV- .header___12P56{padding:20px;background-color:#fff;font-family:PingFangSC-Regular,sans-serif}.customer_detail___1eGV- .header___12P56 .number___2bC7v{position:absolute;right:30px;top:20px;color:#999;font-size:15px}.customer_detail___1eGV- .header___12P56 .number___2bC7v span{margin-right:10px}.customer_detail___1eGV- .header___12P56 .title___3Wd2-{display:flex;align-items:center;font-size:24px;color:#475372;margin-bottom:25px}.customer_detail___1eGV- .header___12P56 .title___3Wd2- .btnfollow___2PII-{display:inline-flex;align-items:center;justify-content:center;margin-left:30px;width:100px;height:40px;line-height:40px;vertical-align:middle;border:none;text-align:center;font-family:PingFangSC-Medium;font-size:16px;color:#444}.customer_detail___1eGV- .header___12P56 .title___3Wd2- .btnfollow___2PII- img{width:18px;margin-right:6px}.customer_detail___1eGV- .header___12P56 .risk___M2vjZ{display:inline-flex;font-family:PingFangSC-Regular;font-size:12px;color:#444;cursor:pointer}.customer_detail___1eGV- .header___12P56 .risk___M2vjZ .checked_list___c5fzI{padding:1px 7px;border-radius:2px;display:inline-flex;align-items:center;font-size:16px;justify-content:center}.customer_detail___1eGV- .header___12P56 .risk___M2vjZ .checked_list___c5fzI span{margin-right:10px;width:65px}.customer_detail___1eGV- .header___12P56 .risk___M2vjZ .checked_list___c5fzI .uncheck___3nfve{color:#888}.customer_detail___1eGV- .header___12P56 .risk___M2vjZ .risk_text___36I0L{border-left:1px solid #e0e4e8;padding-left:15px;font-size:16px;margin-right:13px;display:flex;align-items:center}.customer_detail___1eGV- .header___12P56 .risk___M2vjZ .risk_text___36I0L img{width:18px;height:18px}.customer_detail___1eGV- .header___12P56 .risk___M2vjZ .risk_check_icon___2YYE_{width:18px;margin-right:6px}.customer_detail___1eGV- .tag_status___2QfbL{display:flex;justify-content:space-between}.customer_detail___1eGV- .tags___1NeW5 a,.customer_detail___1eGV- .tags___1NeW5 span{display:inline-block;background:rgba(71,83,114,.1);border-radius:2px;font-size:12px;color:#475372;padding:7px 11px;margin-right:12px}.customer_detail___1eGV- .ant_btn_plus___3_zB6{width:40px;height:40px;padding:0;min-width:40px;border-color:#f2d5aa;float:right}.customer_detail___1eGV- .ant_btn_plus___3_zB6 .anticon-plus{color:#f04134}.customer_detail___1eGV- .trading___11Nz4 .title___3Wd2-{margin-top:35px;margin-bottom:15px;color:#999;font-size:14px}.customer_detail___1eGV- .follow___3j5qX{margin-right:-24px;margin-left:-24px;padding:15px 24px 0;border-top:1px dotted #e0e4e8}.customer_detail___1eGV- .dynamic___3_fnI pre,.customer_detail___1eGV- .follow___3j5qX pre{white-space:pre-wrap}.customer_detail___1eGV- .dynamic_empty___1WDJe,.customer_detail___1eGV- .follow_empty___2tFTE{text-align:center}.customer_detail___1eGV- .dynamic_item___2ppT-:first-child .dynamic_item_time___1i1kQ:before,.customer_detail___1eGV- .dynamic_item___2ppT-:first-child .follow_item_time___3d9Mo:before,.customer_detail___1eGV- .follow_item___2XB2v:first-child .dynamic_item_time___1i1kQ:before,.customer_detail___1eGV- .follow_item___2XB2v:first-child .follow_item_time___3d9Mo:before{visibility:hidden}.customer_detail___1eGV- .dynamic_item_time___1i1kQ,.customer_detail___1eGV- .follow_item_time___3d9Mo{position:relative;height:40px;line-height:40px;text-indent:32px;font-size:13px;color:#475372}.customer_detail___1eGV- .dynamic_item_time___1i1kQ:after,.customer_detail___1eGV- .dynamic_item_time___1i1kQ:before,.customer_detail___1eGV- .follow_item_time___3d9Mo:after,.customer_detail___1eGV- .follow_item_time___3d9Mo:before{content:" ";position:absolute;left:20px;width:1px;height:14px;background-color:#e0e4e8}.customer_detail___1eGV- .dynamic_item_time___1i1kQ:before,.customer_detail___1eGV- .follow_item_time___3d9Mo:before{top:0}.customer_detail___1eGV- .dynamic_item_time___1i1kQ:after,.customer_detail___1eGV- .follow_item_time___3d9Mo:after{bottom:0}.customer_detail___1eGV- .dynamic_item_time___1i1kQ span:before,.customer_detail___1eGV- .follow_item_time___3d9Mo span:before{content:" ";position:absolute;top:17px;left:17px;width:7px;height:7px;background-color:#f2d4aa;border-radius:50%}.customer_detail___1eGV- .dynamic_item_body___1UiVT,.customer_detail___1eGV- .follow_item_body___AiHvT{font-size:14px;padding:15px;background-color:rgba(242,244,247,.8);border-radius:2px;color:#666}.customer_detail___1eGV- .dynamic_item_body_label___2PRtu,.customer_detail___1eGV- .follow_item_body_label___29SiX{font-family:PingFangSC-Regular,sans-serif;color:#666;font-size:14px}.customer_detail___1eGV- .dynamic___3_fnI .dynamic_tab___3LCez,.customer_detail___1eGV- .follow___3j5qX .dynamic_tab___3LCez{margin-bottom:30px;display:flex;align-items:center;justify-content:center}.customer_detail___1eGV- .risk___M2vjZ{background-color:#fff}.customer_detail___1eGV- .risk_head___3SMKd{position:relative;margin-left:15px;padding-left:18px;line-height:21px;color:#666}.customer_detail___1eGV- .risk_head___3SMKd:before{content:" ";position:absolute;left:0;bottom:-13px;width:1px;height:47px;background-color:#e0e4e8}.customer_detail___1eGV- .risk_head_noBefore___Fbibr:before{display:none}.customer_detail___1eGV- .risk_head_title___svGlZ{position:relative;line-height:21px;font-size:16px;font-weight:400;color:#666}.customer_detail___1eGV- .risk_head_title___svGlZ:before{content:" ";position:absolute;left:-21px;bottom:7px;width:7px;height:7px;border-radius:50%;background-color:#f2d4aa}.customer_detail___1eGV- .risk_head_title___svGlZ em{font-style:normal;color:#ce9f64}.customer_detail___1eGV- .risk_head_caption___1HAPc{margin-top:6px;margin-bottom:13px}.customer_detail___1eGV- .risk_head_caption___1HAPc span:first-child{margin-right:15px}.customer_detail___1eGV- .risk_list___1DIo3{padding:15px;font-size:14px;background-color:#f8f8f9}.customer_detail___1eGV- .risk_list_group___nf7jh{margin-bottom:20px}.customer_detail___1eGV- .risk_list_group_question___GIj5b{margin-bottom:7px;line-height:18px;font-size:13px;color:#999}.customer_detail___1eGV- .risk_list_group_answer___xmxKQ{line-height:21px;font-size:15px;color:#666}.customer_detail___1eGV- .pagination___2to85{margin-top:30px;text-align:right}.customer_detail___1eGV- .pagination___2to85 .ant-btn{padding:0 7px;min-width:18px;border-color:transparent;border-radius:2px;color:#d4a667}.customer_detail___1eGV- .pagination___2to85 .ant-btn[disabled]{color:#999}.customer_detail___1eGV- .pagination___2to85 .ant-btn:last-child{margin-left:20px}.content___2jje_{padding:1.5rem;overflow:hidden}.content___2jje_ .card___1gluq{background:#fff;border-radius:2px;margin-bottom:24px}.content___2jje_ .card___1gluq .toolBar___jWl9b{margin-bottom:20px;text-align:right}.content___2jje_ .card___1gluq .header___12P56{border-bottom:1px solid #e0e4e8;display:flex;justify-content:space-between;align-items:center;padding:14px 0 8px;height:50px}.content___2jje_ .card___1gluq .header___12P56 .title___3Wd2-{font-family:PingFangSC-Medium,sans-serif;font-size:15px;color:#475372;margin-bottom:0}.content___2jje_ .card___1gluq .header___12P56 .icons___242fA .anticon{font-size:18px;margin-left:10px;cursor:pointer;color:#f2d4aa;display:inline-block;width:28px;height:28px;line-height:28px}.content___2jje_ .card___1gluq .header___12P56 .icons___242fA .anticon img{width:18px}.content___2jje_ .card___1gluq .header___12P56 .icons___242fA .anticon.anticon-edit{font-size:18px;width:18px;height:18px}.content___2jje_ .card___1gluq .header___12P56 .icons___242fA .anticon img{width:100%}.content___2jje_ .card___1gluq .content___2jje_{padding:35px 0 24px;overflow:hidden}.content___2jje_ .card___1gluq .content___2jje_ .ant-form-item-label{padding-bottom:6px}.content___2jje_ .card___1gluq .content___2jje_ .ant-form-item-label label{font-size:14px;line-height:1;color:#bbb}.content___2jje_ .card___1gluq .content___2jje_ .ant-form-item-control{font-size:16px;color:#888}.content___2jje_ .ant-tabs-ink-bar{background:#f2d4aa}.content___2jje_ .ant-tabs-bar{margin-bottom:0;background-color:#fff;border-bottom:1px solid #e0e4e8}.content___2jje_ .ant-tabs-nav .ant-tabs-tab{margin-right:0;padding:19px 28px 14px;font-family:PingFangSC-Regular,sans-serif;font-size:16px;color:#999}.content___2jje_ .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active{color:#475372}.content___2jje_ .ant-tabs-tabpane{padding:20px 20px 50px;background-color:#fff}.content___2jje_ .ant-tabs-tabpane .ant-radio-button-wrapper:hover{color:#d4a667}.content___2jje_ .ant-tabs-tabpane .ant-radio-button-wrapper:first-child{border-radius:2px 0 0 2px}.content___2jje_ .ant-tabs-tabpane .ant-radio-button-wrapper:last-child{border-radius:0 2px 2px 0}.content___2jje_ .ant-tabs-tabpane .ant-radio-button-wrapper-checked{box-shadow:-1px 0 #d4a667;color:#d4a667;border-color:#d4a667}.content___2jje_ .ant-tabs-tabpane .ant-radio-button-wrapper-checked:before{background-color:#d4a667!important}.content___2jje_ .ant-card{margin-bottom:20px}.content___2jje_ .ant-card:last-of-type{margin-bottom:0}.content___2jje_ .ant-card-head{padding-left:24px}.content___2jje_ .ant-card-head .anticon-close{font-size:16px;cursor:pointer;vertical-align:middle}.content___2jje_ .ant-card-body{padding:20px}.content___2jje_ .actions___3zYRT{margin-top:35px;margin-bottom:45px;text-align:right}.content___2jje_ .actions___3zYRT .ant-btn{height:35px;background-color:#465174;border-radius:2px;border-color:#465174;font-size:14px;color:#f2d5aa;width:84px}.content___2jje_ .actions___3zYRT .ant-btn:disabled{background-color:#e2e0e0;border-color:#e2e0e0;color:#fff}.content___2jje_ .images___2JaAc .image___1hKp0{width:90px;height:90px;display:block;float:left;margin-right:10px;display:flex;align-items:center;justify-content:center;overflow:hidden;margin-bottom:10px}.content___2jje_ .images___2JaAc .image___1hKp0 img{width:100%;height:100%}.content___2jje_ .images___2JaAc .image___1hKp0 .uploaded___24jfg{position:relative;width:90px;height:90px}.content___2jje_ .images___2JaAc .image___1hKp0 .uploaded___24jfg:hover .btns___1ryR7{display:block}.content___2jje_ .images___2JaAc .image___1hKp0 .uploaded___24jfg .btns___1ryR7{display:none}.content___2jje_ .images___2JaAc .image___1hKp0 .uploaded___24jfg .btns___1ryR7 .anticon-close{cursor:pointer;position:absolute;top:10px;left:5px;border-radius:2px;background:rgba(0,0,0,.3);color:#d8d8d8;font-size:20px}.content___2jje_ .images___2JaAc .image___1hKp0 .upload_btn___1PNzx{background:#fbfbfb;border:1px dashed #d9d9d9;border-radius:2px;display:flex;align-content:center;justify-content:center;width:90px;height:90px;flex-direction:column}.content___2jje_ .images___2JaAc .image___1hKp0 .upload_btn___1PNzx .anticon{font-size:24px}.content___2jje_ .images___2JaAc .image___1hKp0 .upload_btn___1PNzx p{margin-top:12px;font-family:PingFangSC-Regular,sans-serif;font-size:12px;color:#666;line-height:18px;text-align:center}.followForm___2AkjH{min-width:400px}.followForm___2AkjH .ant-card-head{height:56px;line-height:56px;border-bottom:1px solid #e0e4e8}.followForm___2AkjH .ant-card-head .ant-card-head-title{color:#475372;font-size:18px}.modal___1wk_d .ant-modal-body{max-height:500px;overflow-y:auto}',""]),t.locals={customer_detail:"customer_detail___1eGV-",error:"error___3L1Q2",header:"header___12P56",number:"number___2bC7v",title:"title___3Wd2-",btnfollow:"btnfollow___2PII-",risk:"risk___M2vjZ",checked_list:"checked_list___c5fzI",uncheck:"uncheck___3nfve",risk_text:"risk_text___36I0L",risk_check_icon:"risk_check_icon___2YYE_",tag_status:"tag_status___2QfbL",tags:"tags___1NeW5",ant_btn_plus:"ant_btn_plus___3_zB6",trading:"trading___11Nz4",follow:"follow___3j5qX",dynamic:"dynamic___3_fnI",follow_empty:"follow_empty___2tFTE",dynamic_empty:"dynamic_empty___1WDJe",follow_item:"follow_item___2XB2v",follow_item_time:"follow_item_time___3d9Mo",dynamic_item_time:"dynamic_item_time___1i1kQ",dynamic_item:"dynamic_item___2ppT-",follow_item_body:"follow_item_body___AiHvT",dynamic_item_body:"dynamic_item_body___1UiVT",follow_item_body_label:"follow_item_body_label___29SiX",dynamic_item_body_label:"dynamic_item_body_label___2PRtu",dynamic_tab:"dynamic_tab___3LCez",risk_head:"risk_head___3SMKd",risk_head_noBefore:"risk_head_noBefore___Fbibr",risk_head_title:"risk_head_title___svGlZ",risk_head_caption:"risk_head_caption___1HAPc",risk_list:"risk_list___1DIo3",risk_list_group:"risk_list_group___nf7jh",risk_list_group_question:"risk_list_group_question___GIj5b",risk_list_group_answer:"risk_list_group_answer___xmxKQ",pagination:"pagination___2to85",content:"content___2jje_",card:"card___1gluq",toolBar:"toolBar___jWl9b",icons:"icons___242fA",actions:"actions___3zYRT",images:"images___2JaAc",image:"image___1hKp0",uploaded:"uploaded___24jfg",btns:"btns___1ryR7",upload_btn:"upload_btn___1PNzx",followForm:"followForm___2AkjH",modal:"modal___1wk_d"}},2031:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(84),f=n(d),m=a(1750),p=n(m),_=a(2049),h=n(_),g=a(1702),v=n(g),b=a(1730),y=n(b),E=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleDel=function(e){(0,p.default)({width:450,wrapClassName:"showfloat",title:"删除不能撤回，确定删除?",onOk:function(){}})},a.handleAdd=function(){a.EditContactModal.show()},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.customer=new v.default}},{key:"componentWillReceiveProps",value:function(e){e.data.id,this.props.data.id}},{key:"render",value:function(){var e=this,t=this.props.data;if(!t)return null;t.info.permission.editPermission,t.info.permission.readPermission;return u.default.createElement("div",{className:y.default.card},u.default.createElement("div",{className:y.default.toolBar},u.default.createElement(c.Button,{className:"btn_add",onClick:this.handleAdd},"新增联系人")),u.default.createElement(c.Card,{title:"姓名",style:{marginTop:0},extra:u.default.createElement(c.Icon,{type:"close",onClick:this.handleDel})},u.default.createElement(c.Row,null,u.default.createElement(c.Col,{span:"12"},"手机号码"),u.default.createElement(c.Col,{span:"12"},"座机号码"),u.default.createElement(c.Col,{span:"12"},"微信"),u.default.createElement(c.Col,{span:"12"},"性别"),u.default.createElement(c.Col,{span:"12"},"出生日期"),u.default.createElement(c.Col,{span:"12"},"职务"),u.default.createElement(c.Col,{span:"12"},"邮箱"),u.default.createElement(c.Col,{span:"12"},"办公地址"),u.default.createElement(c.Col,{span:"12"},"证件正反面"),u.default.createElement(c.Col,{span:"12"},"证件有效期"),u.default.createElement(c.Col,{span:"12"},"与该机构关系"))),u.default.createElement(h.default,{ref:function(t){return e.editContactModal=t}}))}}]),t}(f.default);t.default=E},2032:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(1730),m=n(f),p=a(1702),_=n(p),h=a(1698),g=n(h),v=a(357),b=n(v),y=a(242),E=(n(y),a(33)),k=(n(E),a(84)),w=n(k),x=a(1717),F=n(x),C=d.Form.Item,j=d.Select.Option,O=(d.Radio.Group,"CustomerInvestInfoForm"),D=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formatData=function(e){return e},a.state={data:a.props.data,dic:{},category:[]},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),(new g.default).gets("dic_customer_invest_type").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e}),e.setState({dic:a})}})}},{key:"getDicSelections",value:function(e,t){return this.state.dic[t]&&this.state.dic[t].selections&&this.state.dic[t].selections.map(function(t){return c.default.createElement(e,{value:t.value,key:t.value},t.label)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.data!==this.state.data){var a=this.formatData(e.data);this.setState({data:a},function(){t.formUtils&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))})}}},{key:"render",value:function(){var e=this,t=this.props.data,a={labelCol:{span:24},wrapperCol:{span:8}};return t.type=t.type?t.type.toString():null,c.default.createElement("div",{id:O},c.default.createElement(d.Form,null,c.default.createElement(C,{label:"资产证明",labelCol:{span:24},wrapperCol:{span:24}},this.formUtils.getFieldDecorator("assets",{initialValue:t.assets||[]})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement("ul",{className:m.default.images},this.formUtils.getFieldValue("assets").map(function(t){return c.default.createElement("li",{className:m.default.image},c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:t.url,alt:"资产证明"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(a){a.preventDefault(),a.stopPropagation();var n=e.formUtils.getFieldValue("assets");e.formUtils.setFieldsValue({assets:n.filter(function(e){return e.url!=t.url})})}}))))}),this.formUtils.getFieldValue("assets").length<9?c.default.createElement("li",{className:m.default.image},c.default.createElement(F.default,{accept:"png,jpg,jpeg,gif",showUploadList:!1,max:1,onSave:function(t){var a=e.formUtils.getFieldValue("assets");a.push({url:t.url,name:t.name}),e.formUtils.setFieldsValue({assets:a})}},c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传照片")))):null)),c.default.createElement(C,i({label:"投资人类型"},a),this.formUtils.getFieldDecorator("type",{initialValue:t.type,rules:[{validator:function(t,a,n){if(2==a){var l=e.formUtils.getFieldValue("assets");l&&l.length||n("请为客户上传资产证明，并确认客户符合专业投资人标准后再选择该选项")}n()}}]})(c.default.createElement(d.Select,{size:"large",placeholder:"请选择",allowClear:!0,getPopupContainer:function(){return document.getElementById(O)}},this.getDicSelections(j,"dic_customer_invest_type"))))))}}]),t}(w.default);D=d.Form.create()(D);var S=function(e){function t(){var e,a,n,o;l(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={isEdit:!1},n.submit=function(){var e=n.props,t=e.data,a=e.mod,l=!1;n.formUtils.validateFields(function(e){console.log(e),e||(l=n.formUtils.getFieldsValue(),l=n.formatData(l),l.id=t.id,l.assets=JSON.stringify(l.assets),n.customer.update_assets(l).then(function(e){e&&e.success&&(d.message.success("更新资产证明成功"),a.loadData(),n.setState({isEdit:!1}))}))})},n.genneratorFix=function(e){var t=n.props.mod;return t.state.visible?c.default.createElement(d.Affix,{target:function(){return t.affixContainer}},e):e},o=a,r(n,o)}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.customer=new _.default,this.formUtils=new b.default(O)}},{key:"componentWillReceiveProps",value:function(e){e.data.id!=this.props.data.id&&this.setState({isEdit:!1})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),e[t]=a}return e}},{key:"render",value:function(){var e=this,t=this.props.data;if(!t)return null;var a=t.info.permission.editPermission,n=t.info.permission.readPermission,l=JSON.parse(JSON.stringify(t.info.data)),r={labelCol:{span:24},wrapperCol:{span:24}},o=[];return this.state.isEdit?(o.push(c.default.createElement("img",{className:"anticon",index:0,src:"/assets/images/icon/取消@1x.png",srcSet:"/assets/images/icon/取消@2x.png",onClick:function(t){e.setState({isEdit:!1})}})),o.push(c.default.createElement("img",{className:"anticon",index:1,src:"/assets/images/icon/确认@1x.png",srcSet:"/assets/images/icon/确认@2x.png",onClick:this.submit}))):n&&a&&o.push(c.default.createElement("img",{className:"anticon anticon-edit",index:2,src:"/assets/images/icon/编辑@1x.png",srcSet:"/assets/images/icon/编辑@2x.png",onClick:function(t){e.setState({isEdit:!0})}})),l.investTypes=l.investTypes&&l.investTypes.length?l.investTypes.map(function(e){return e.productTypeId.toString()}):[],l.assets=l.attachDtos,c.default.createElement("div",{className:m.default.card},c.default.createElement("div",{className:m.default.header},c.default.createElement("div",{className:m.default.title},"资产证明"),c.default.createElement("div",{className:m.default.icons},o)),c.default.createElement("div",{className:m.default.content},n?this.state.isEdit?c.default.createElement(D,{data:l,formUtils:this.formUtils}):c.default.createElement(d.Form,null,c.default.createElement(C,i({label:"资产证明"},r),c.default.createElement("ul",{className:m.default.images},l.attachDtos.map(function(e){return c.default.createElement("li",{className:m.default.image},c.default.createElement("a",{href:e.url,target:"_blank"},c.default.createElement("img",{src:e.url,alt:""})))}))),c.default.createElement(C,i({label:"投资者类型"},r),l.typeText)):"暂无权限查看"))}}]),t}(u.Component);t.default=S},2033:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(242),m=n(f),p=a(1730),_=n(p),h=a(1702),g=n(h),v=a(1698),b=(n(v),a(357)),y=n(b),E=a(84),k=n(E),w=a(1717),x=n(w),F=d.Form.Item,C=(d.Select.Option,d.Radio.Group,"CustomerBankInfoForm"),j=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formatData=function(e){return e},a.state={data:a.props.data,dic:{},category:[]},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.data!==this.state.data){var a=this.formatData(e.data);this.setState({data:a},function(){t.formUtils&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))})}}},{key:"render",value:function(){var e=this,t=this.props.data,a={labelCol:{span:24},wrapperCol:{span:24}};return c.default.createElement("div",{id:C},c.default.createElement(d.Form,null,c.default.createElement(F,i({label:"银行卡帐号"},a),this.formUtils.getFieldDecorator("bankAccount",{initialValue:t&&t.bankAccount,rules:[{min:1,max:30,message:"银行卡账号长度必须在1到30位之间"}]})(c.default.createElement(d.Input,null))),c.default.createElement(F,i({label:"开户行"},a),this.formUtils.getFieldDecorator("bankName",{initialValue:t&&t.bankName})(c.default.createElement(d.Input,null))),c.default.createElement(F,i({label:"银行卡正反面"},a),c.default.createElement("ul",{className:_.default.images},c.default.createElement("li",{className:_.default.image},this.formUtils.getFieldDecorator("bankFront",{initialValue:t&&t.bankFront})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(x.default,{accept:"png,jpg,jpeg,gif",showUploadList:!1,max:1,onSave:function(t){e.formUtils.setFieldsValue({bankFront:t.url})}},this.formUtils.getFieldValue("bankFront")?c.default.createElement("div",{className:_.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("bankFront"),alt:"银行卡正面"}),c.default.createElement("div",{className:_.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({bankFront:""})}}))):c.default.createElement("div",{className:_.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传正面")))),c.default.createElement("li",{className:_.default.image},this.formUtils.getFieldDecorator("bankBack",{initialValue:t&&t.bankBack})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(x.default,{showUploadList:!1,max:1,accept:"png,jpg,jpeg,gif",onSave:function(t){e.formUtils.setFieldsValue({bankBack:t.url})}},this.formUtils.getFieldValue("bankBack")?c.default.createElement("div",{className:_.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("bankBack"),alt:"银行卡反面"}),c.default.createElement("div",{className:_.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({bankBack:""})}}))):c.default.createElement("div",{className:_.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传反面"))))))))}}]),t}(k.default);j=d.Form.create()(j);var O=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isEdit:!1},a.submit=function(){var e=a.props,t=e.data,n=e.mod,l=!1;a.formUtils.validateFields(function(e){if(console.log(e),!e){l=a.formUtils.getFieldsValue(),l=a.formatData(l),l.birthday=l.birthday?moment(l.birthday):null,l.id=t.id;var r=JSON.parse(JSON.stringify(t.info.data)),o=r.tags.map(function(e){return e.name}).join(",");r.certType=r.credential?r.credential.type:null,r.certNo=r.credential?r.credential.number:null,r.level=r.level?r.level.toString():null,r.source=r.source?r.source.toString():null,r.certType=r.certType?r.certType.toString():null,r.certFront=r.credential?r.credential.front:null,r.certBack=r.credential?r.credential.back:null,r.assets=JSON.stringify(r.attachDtos.map(function(e){return{url:e.url,name:e.name}})),r.tags=o,r.investTypes=r.investTypes&&r.investTypes.length?r.investTypes.map(function(e){return e.productTypeId.toString()}).join(","):null,delete r.credential,delete r.attachDtos,delete r.banks,l=(0,m.default)(r,l),a.customer.update_info(l).then(function(e){e&&e.success&&(d.message.success("更新银行卡成功"),n.loadData(),a.setState({isEdit:!1}))})}})},a.genneratorFix=function(e){var t=a.props.mod;return t.state.visible?c.default.createElement(d.Affix,{target:function(){return t.affixContainer}},e):e},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.customer=new g.default,this.formUtils=new y.default(C)}},{key:"componentWillReceiveProps",value:function(e){e.data.id!=this.props.data.id&&this.setState({isEdit:!1})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),e[t]=a}return e}},{key:"render",value:function(){var e=this.props.data;if(!e)return null;var t=(e.info.permission.editPermission,e.info.permission.readPermission),a=JSON.parse(JSON.stringify(e.info.data)),n={labelCol:{span:24},wrapperCol:{span:24}},l=a&&a.banks&&a.banks[0];return l&&(l.bankAccount=l.account,l.bankAccount=l.account,l.bankFront=l.front,l.bankBack=l.back),c.default.createElement("div",{className:_.default.card},this.genneratorFix(c.default.createElement("div",{className:_.default.header},c.default.createElement("div",{className:_.default.title},"银行卡"))),c.default.createElement("div",{className:_.default.content},t?this.state.isEdit?c.default.createElement(j,{formUtils:this.formUtils,data:l}):c.default.createElement(d.Form,null,c.default.createElement(F,i({label:"银行卡帐号"},n),l&&l.bankAccount),c.default.createElement(F,i({label:"开户行"},n),l&&l.bankName),c.default.createElement(F,i({label:"银行卡正反面"},n),c.default.createElement("ul",{className:_.default.images},l&&l.bankFront?c.default.createElement("li",{className:_.default.image},c.default.createElement("img",{src:l&&l.bankFront,alt:"银行卡正面"})):null,l&&l.bankBack?c.default.createElement("li",{className:_.default.image},c.default.createElement("img",{src:l&&l.bankBack,alt:"银行卡反面"})):null))):"暂无权限查看"))}}]),t}(u.Component);t.default=O},2034:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(12),d=(a(42),a(95)),f=n(d),m=a(1703),p=(n(m),a(1779)),_=n(p),h=a(1773),g=n(h),v=a(2064),b=n(v),y=a(1730),E=n(y),k=a(1700),w=n(k),x=w.default.GridManager,F=(w.default.FilterBar,w.default.GridInputFilter,w.default.GridRangeFilter,w.default.GridSortFilter,w.default.GridDateFilter,w.default.GridCheckboxFilter,g.default.EnumCustomerStatus,function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getColumns=function(){return[{title:"类型",dataIndex:"typeText"},{title:"渠道",dataIndex:"channelText"},{title:"内容",dataIndex:"content",className:"ant-table-col"},{title:"线索时间",dataIndex:"createDate",width:110,render:function(e,t){return f.default.formatDate(e,"YYYY-MM-DD")}},{title:"处理状态",dataIndex:"statusText",width:100},{title:"处理人",dataIndex:"processUserName"},{title:"处理时间",dataIndex:"processDate",width:110,render:function(e,t){return f.default.formatDate(e,"YYYY-MM-DD")}},{title:"操作",dataIndex:"action",width:80,fixed:"right",render:function(e,t){return t.canProcess?u.default.createElement("a",{onClick:function(){return a.clueDealModal.show({id:t.id})}},"处理"):null}}]},a.reloadGrid=function(){a.gridManager.grid.reload();var e=a.props.parent;e&&e.customerDetailFollow.getData(a.state.customerId)},a.state={customerId:a.props.customerId,count:{leadsCount:0,chanceCount:0}},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.clue=new _.default,this.getCount(this.props.customerId)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.customerId;e.customerId!==a&&this.setState({customerId:e.customerId},function(){t.getCount(e.customerId),t.gridManager.grid.reload()})}},{key:"componentDidMount",value:function(){}},{key:"getCount",value:function(e){var t=this;this.clue.getCount(e).then(function(e){e.success&&t.setState({count:e.result})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.customerId,n=t.count;return u.default.createElement("div",{className:E.default.trading},u.default.createElement("div",{className:E.default.tags},u.default.createElement("span",null,"销售线索(",n.leadsCount,")")),u.default.createElement("div",{className:E.default.title,id:"reservationList"},"销售线索"),u.default.createElement(x,{rowKey:"id",url:"/leads/customer/detail/get_page?customerId="+a,noRowSelection:!0,columns:this.getColumns(),ref:function(t){t&&(e.gridManager=t)}}),u.default.createElement("div",{ref:function(t){return e.container=(0,c.findDOMNode)(t)}},u.default.createElement(b.default,{container:this.container,ref:function(t){return e.clueDealModal=t},reload:this.reloadGrid})))}}]),t}(u.default.Component));t.default=F},2035:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(1702),f=n(d),m=a(95),p=n(m),_=a(1730),h=n(_),g=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onChange=function(e,t){console.log("currentPage,pageSize",e,t),a.getData(a.customerId,e,t)},a.handleTabChange=function(e){a.setState({firstType:e.target.value},function(){a.getData(a.customerId,a.state.currentPage)})},a.state={loading:!1,firstType:"",currentPage:1,pageSize:10,datas:null,totalCount:0},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.customer=new f.default}},{key:"componentDidMount",value:function(){var e=this.props.customerId;this.customerId=e,this.getData(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.customerId;e.customerId!==t&&(this.customerId=e.customerId,this.getData(e.customerId))}},{key:"getData",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(e){this.setState({loading:!0});var l={currentPage:a,pageSize:n,customerId:e,firstType:this.state.firstType};this.customer.gets_dynamic(l).then(function(e){if(t.setState({loading:!1}),e.success){var a=e.result,n=a.currentPage,l=a.pageSize,r=a.datas,o=a.totalCount;t.setState({currentPage:n,pageSize:l,datas:r,totalCount:o})}})}}},{key:"reload",value:function(){this.getData(this.customerId,this.state.currentPage)}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.firstType,n=e.currentPage,l=e.pageSize,r=e.datas,o=e.totalCount;return u.default.createElement("div",{className:h.default.dynamic},u.default.createElement(c.Spin,{spinning:t},u.default.createElement("div",{className:h.default.dynamic_tab},u.default.createElement(c.Radio.Group,{value:a,onChange:this.handleTabChange},u.default.createElement(c.Radio.Button,{value:""},"全部"),u.default.createElement(c.Radio.Button,{value:"1"},"客户行为"),u.default.createElement(c.Radio.Button,{value:"2"},"服务轨迹"))),u.default.createElement("div",null,r&&r.map(function(e){return u.default.createElement("div",{className:h.default.dynamic_item,key:e.id},u.default.createElement("div",{className:h.default.dynamic_item_time},u.default.createElement("span",null,e.createDate&&p.default.formatDate(e.createDate,"YYYY-MM-DD HH:mm"))),u.default.createElement("div",{className:h.default.dynamic_item_body},u.default.createElement("pre",null,e.feedContent)))})),o>0?u.default.createElement(c.Pagination,{className:h.default.pagination,showQuickJumper:!0,showSizeChanger:!0,current:n,pageSize:l,total:o,showTotal:function(e){return"共"+e+"条"},onShowSizeChange:this.onChange,onChange:this.onChange}):u.default.createElement("div",{className:h.default.dynamic_empty},"暂无动态")))}}]),t}(u.default.Component);t.default=g},2036:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(33),f=n(d),m=a(357),p=n(m),_=a(1837),h=n(_),g=a(1702),v=n(g),b=a(84),y=n(b),E=a(1730),k=n(E),w=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,l=a.props.data;if(l.follow.permission&&l.follow.permission.readPermission){var r={currentPage:t,pageSize:n,customerId:e};a.customer.gets_follow(r).then(function(e){if(e.success){var t=e.result,n=t.currentPage,l=t.pageSize,r=t.datas,o=t.totalPage;a.setState({currentPage:n,pageSize:l,datas:r,totalPage:o})}})}},a.handleFollow=function(e){e&&e.preventDefault(),a.formUtils.validateFields(function(e){if(!e){var t=a.formUtils.getFieldsValue();t=a.formatData(t),a.setState({submiting:!0}),a.customer.follow(t).then(function(e){if(a.setState({submiting:!1}),e.success){a.formUtils.resetFields(["type","status","content","nextFollowDate"]),c.message.success("添加跟进成功"),1===a.state.currentPage&&a.getData(t.customerId);var n=a.props.callback;n&&n()}})}})},a.state={currentPage:1,pageSize:10,datas:null,totalPage:0,submiting:!1},a.formUtils=new p.default("customerFollowForm"),a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.customer=new v.default}},{key:"componentDidMount",value:function(){var e=this.props.customerId;this.formUtils.setFieldsValue({customerId:e}),this.getData(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.customerId;e.customerId!==t&&(this.formUtils.setFieldsValue({customerId:e.customerId}),this.getData(e.customerId))}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,f.default)(a).format("YYYY-MM-DD HH:mm"):a instanceof f.default&&(a=(0,f.default)(a).format("YYYY-MM-DD HH:mm")),a instanceof Array&&(a=a.join(",")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD HH:mm")),e[t]=a}return e}},{key:"render",value:function(){var e=this,t=this.props,a=t.customerId,n=t.data,l=this.state,r=l.currentPage,o=l.pageSize,i=l.datas,s=l.totalPage,d=l.submiting,m=n.follow.permission,p=m.readPermission,_=m.editPermission;return u.default.createElement(c.Card,{title:"跟进",bordered:!1,className:k.default.followForm},u.default.createElement("div",null,u.default.createElement(h.default,{ref:function(t){return e.customerFollowForm=t},formUtils:this.formUtils,setForm:function(t){return e.form=t}}),u.default.createElement("div",{className:k.default.actions},_?u.default.createElement(c.Button,{onClick:this.handleFollow,loading:d},"发布"):u.default.createElement(c.Popover,{placement:"topRight",content:"仅限客户归属人可录入跟进记录"},u.default.createElement(c.Button,{disabled:!0},"发布")))),p?u.default.createElement("div",{className:k.default.follow},i&&i.map(function(e){return u.default.createElement("div",{className:k.default.follow_item,key:e.id},u.default.createElement("div",{className:k.default.follow_item_time},u.default.createElement("span",null,e.createDate&&(0,f.default)(e.createDate).format("YYYY-MM-DD HH:mm"))),u.default.createElement("div",{className:k.default.follow_item_body},u.default.createElement("p",null,u.default.createElement("label",{className:k.default.follow_item_body_label},"跟进方式："),e.typeText),u.default.createElement("p",null,u.default.createElement("label",{className:k.default.follow_item_body_label},"跟进内容："),e.content)))}),null===i||0===i.length?u.default.createElement("div",{className:k.default.follow_empty},"暂无跟进记录"):u.default.createElement("div",{className:k.default.pagination},u.default.createElement(c.Button,{disabled:1===r,onClick:function(){e.getData(a,r-1,o)}},u.default.createElement(c.Icon,{type:"left"})),u.default.createElement(c.Button,{disabled:r>=s,onClick:function(){e.getData(a,r+1,o)}},u.default.createElement(c.Icon,{type:"right"})))):null)}}]),t}(y.default);t.default=w},2037:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),f=a(42),m=a(1730),p=n(m),_=a(1702),h=n(_),g=a(1698),v=n(g),b=a(242),y=n(b),E=a(731),k=n(E),w=a(95),x=n(w),F=f.Select.Option,C=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.active,a=l(e,["active"]),n=t?"已关注":"加关注";return d.default.createElement(f.Button,s({className:p.default.btnfollow},a),d.default.createElement("img",{src:"/assets/images/icon/"+n+"@1x.png",srcSet:"/assets/images/icon/"+n+"@2x.png"}),d.default.createElement("span",null,n))}}]),t}(c.Component),j=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.focus=function(){var e=a.state.isFocus,t=a.props.data.id,n=e?t:[t];(e?a.customer.unfocus:a.customer.focus)(n).then(function(t){t.success&&(f.message.success(e?"取消关注成功":"关注成功",.8),a.setState({isFocus:!e}))})},a.changeStatus=function(e){var t=a.state.filters.dic_customer_status,n=a.props.data.id,l=t.filter(function(t){return t.value==e})[0].label;a.customer.update_status({id:n,status:e}).then(function(t){t.success&&(f.message.success("客户有效性变更为"+l,.8),a.setState({status:e}))})};var n=a.props.data;return a.state={filters:{},data:n,isFocus:!(!n||!n.focus)&&n.focus,status:n.status},a}return i(t,e),u(t,[{key:"componentWillMount",value:function(){this.customer=new h.default,this.dictionary=new v.default}},{key:"componentDidMount",value:function(){var e=this;this.dictionary.gets("dic_customer_status").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e.selections}),e.setState({filters:a})}})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.data||{};if(e.data){var a=t.id;e.data&&a&&a!=e.data.id&&this.setState({isFocus:e.data.focus,status:e.data.status})}}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.mod,n=x.default.checkPermission("user.customer.v2.focus"),l=(d.default.createElement("img",{src:"/assets/images/customer/完成@1x.png",srcSet:"/assets/images/customer/完成@1x.png"}),JSON.parse(JSON.stringify(t.info.data))),r=(l.credential&&l.credential.type&&l.credential.number&&(l.credential.front||l.credential.back),l.attachDtos&&l.attachDtos.length,this.state.filters.dic_customer_status),o=d.default.createElement("img",{className:p.default.risk_check_icon,src:"/assets/images/customer/合规管理-"+(t.riskText?"已":"未")+"认证@1x.png",srcSet:"/assets/images/customer/合规管理-"+(t.riskText?"已":"未")+"认证@2x.png"}),i=(0,k.default)(d.default.createElement(f.Select,{getPopupContainer:function(){return document.getElementById("customer_header")},value:void 0!=this.state.status&&r?this.state.status.toString():null,style:{width:120},onChange:this.changeStatus},r&&r.map(function(e){return d.default.createElement(F,{key:e.value,value:e.value},e.label)})));return d.default.createElement("div",{className:p.default.header,id:"customer_header"},d.default.createElement("div",{className:p.default.number},d.default.createElement("span",null,"客户编号"),t.number),d.default.createElement("div",{className:p.default.title},t.name||"--",d.default.createElement("span",{style:{color:"#999"}},"(",t.mobile,")"),n?d.default.createElement(C,{active:this.state.isFocus,onClick:this.focus}):null,d.default.createElement("div",{className:p.default.risk,onClick:function(e){var n=(0,y.default)(!0,{activeKey:"4"},t);a.setState({data:n})}},t.riskText?d.default.createElement("span",{className:p.default.risk_text},d.default.createElement("img",{className:p.default.risk_check_icon,src:"/assets/images/customer/测评@1x.png",srcSet:"/assets/images/customer/测评@1x.png"}),t.riskText):null,d.default.createElement("span",{className:p.default.checked_list},o,"合规管理>>"))),d.default.createElement("div",{className:p.default.tag_status},d.default.createElement("div",{className:p.default.tags},t.tags&&t.tags.map(function(e,t){return d.default.createElement("span",{key:"tag_"+t},e.name)})),d.default.createElement("div",null,"有效性:",x.default.checkPermission("customer.update.status")?d.default.createElement(i,{auth:"customer.update.status"}):t.statusText)))}}]),t}(c.Component);t.default=j},2038:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(1730),m=n(f),p=a(1702),_=n(p),h=a(1698),g=n(h),v=a(357),b=n(v),y=a(84),E=n(y),k=a(33),w=n(k),x=a(242),F=(n(x),a(1717)),C=n(F),j=d.Form.Item,O=d.Select.Option,D=(d.Radio.Group,function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formatData=function(e){return e},a.state={data:a.props.data,dic:{}},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),(new g.default).gets("dic_customer_credentials").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e}),e.setState({dic:a})}})}},{key:"getDicSelections",value:function(e,t){return this.state.dic[t]&&this.state.dic[t].selections&&this.state.dic[t].selections.map(function(t){return c.default.createElement(e,{value:t.value,key:t.value},t.label)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.data!==this.state.data){var a=this.formatData(e.data);this.setState({data:a},function(){t.formUtils&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))})}}},{key:"render",value:function(){var e=this,t=this.props.data,a={labelCol:{span:24},wrapperCol:{span:8}};return c.default.createElement("div",{id:"CustomerBaseInfoForm"},c.default.createElement(d.Form,null,c.default.createElement(j,i({label:"证件类型"},a),this.formUtils.getFieldDecorator("type",{initialValue:t.certType?t.certType.toString():null})(c.default.createElement(d.Select,{placeholder:"请选择证件类型",size:"large",allowClear:!0,getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")}},this.getDicSelections(O,"dic_customer_credentials")))),c.default.createElement(j,i({label:"证件号码"},a),this.formUtils.getFieldDecorator("number",{initialValue:t.certNo})(c.default.createElement(d.Input,null))),c.default.createElement(j,{label:"证件正反面",labelCol:{span:24},wrapperCol:{span:24}},c.default.createElement("ul",{className:m.default.images},c.default.createElement("li",{className:m.default.image},this.formUtils.getFieldDecorator("front",{initialValue:t.certFront})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(C.default,{showUploadList:!1,accept:"png,jpg,jpeg,gif",max:1,onSave:function(t){e.formUtils.setFieldsValue({front:t.url})}},this.formUtils.getFieldValue("front")?c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("front"),alt:"证件正面"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({front:""})}}))):c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传正面")))),c.default.createElement("li",{className:m.default.image},this.formUtils.getFieldDecorator("back",{initialValue:t.certBack})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(C.default,{showUploadList:!1,accept:"png,jpg,jpeg,gif",max:1,onSave:function(t){e.formUtils.setFieldsValue({back:t.url})}},this.formUtils.getFieldValue("back")?c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("back"),alt:"证件反面"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({back:""})}}))):c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传反面"))))))))}}]),t}(E.default));D=d.Form.create()(D);var S=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isEdit:!1},a.submit=function(){var e=a.props,t=e.data,n=e.mod,l=!1;a.formUtils.validateFields(function(e){e||(l=a.formUtils.getFieldsValue(),l=a.formatData(l),l.id=t.id,a.customer.update_credentials(l).then(function(e){e&&e.success&&(d.message.success("更新实名认证成功"),n.loadData(),a.setState({isEdit:!1}))}))})},a.genneratorFix=function(e){var t=a.props.mod;return t.state.visible?c.default.createElement(d.Affix,{target:function(){return t.affixContainer}},e):e},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.customer=new _.default,this.formUtils=new b.default("CustomerBaseInfoForm")}},{key:"componentWillReceiveProps",value:function(e){e.data.id!=this.props.data.id&&this.setState({isEdit:!1})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,w.default)(a).format("YYYY-MM-DD"):a instanceof w.default&&(a=(0,w.default)(a).format("YYYY-MM-DD")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"render",value:function(){var e=this,t=this.props.data;if(!t)return null;var a=t.info.permission.editPermission,n=t.info.permission.readPermission,l=JSON.parse(JSON.stringify(t.info.data)),r={labelCol:{span:24},wrapperCol:{span:24}},o=[];return this.state.isEdit?(o.push(c.default.createElement("img",{className:"anticon",index:0,src:"/assets/images/icon/取消@1x.png",srcSet:"/assets/images/icon/取消@2x.png",onClick:function(t){e.setState({isEdit:!1})}})),o.push(c.default.createElement("img",{className:"anticon",index:1,src:"/assets/images/icon/确认@1x.png",srcSet:"/assets/images/icon/确认@2x.png",onClick:this.submit}))):n&&a&&o.push(c.default.createElement("img",{className:"anticon anticon-edit",index:2,src:"/assets/images/icon/编辑@1x.png",srcSet:"/assets/images/icon/编辑@2x.png",onClick:function(t){e.setState({isEdit:!0})}})),l.certType=l.credential?l.credential.type:null,l.certNo=l.credential?l.credential.number:null,l.certType=l.certType?l.certType.toString():null,l.certFront=l.credential?l.credential.front:null,l.certBack=l.credential?l.credential.back:null,c.default.createElement("div",{className:m.default.card},c.default.createElement("div",{className:m.default.header},c.default.createElement("div",{className:m.default.title},"身份证件认证"),c.default.createElement("div",{className:m.default.icons},o)),c.default.createElement("div",{className:m.default.content},n?this.state.isEdit?c.default.createElement(D,{data:l,formUtils:this.formUtils}):c.default.createElement(d.Form,null,c.default.createElement(j,i({label:"证件类型"},r),l.credential&&l.credential.typeText),c.default.createElement(j,i({label:"证件号码"},r),l.certNo),c.default.createElement(j,i({label:"证件正反面"},r),c.default.createElement("ul",{className:m.default.images},l.certFront?c.default.createElement("li",{className:m.default.image},c.default.createElement("a",{href:l.certFront,target:"_blank"},c.default.createElement("img",{src:l.certFront,alt:"证件正面"}))):null,l.certBack?c.default.createElement("li",{className:m.default.image},c.default.createElement("a",{href:l.certBack,target:"_blank"},c.default.createElement("img",{src:l.certBack,alt:"证件反面"}))):null))):"暂无权限查看"))}}]),t}(E.default);t.default=S},2039:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(1730),m=n(f),p=a(1702),_=n(p),h=a(1698),g=n(h),v=a(1727),b=n(v),y=a(357),E=n(y),k=a(242),w=n(k),x=a(33),F=(n(x),a(84)),C=n(F),j=d.Form.Item,O=d.Select.Option,D=(d.Radio.Group,"CustomerInvestInfoForm"),S=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formatData=function(e){return e},a.state={data:a.props.data,dic:{},category:[]},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),(new g.default).gets("dic_customer_invest_type,dic_customer_risk_rating").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e}),e.setState({dic:a})}}),(new b.default).get_all().then(function(t){t.success&&t.result&&e.setState({category:t.result.map(function(e){return{label:e.name,value:e.id}})})})}},{key:"getDicSelections",value:function(e,t){return this.state.dic[t]&&this.state.dic[t].selections&&this.state.dic[t].selections.map(function(t){return c.default.createElement(e,{value:t.value,key:t.value},t.label)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.data!==this.state.data){var a=this.formatData(e.data);this.setState({data:a},function(){t.formUtils&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))})}}},{key:"render",value:function(){var e=this.props.data,t={labelCol:{span:24},wrapperCol:{span:24}};return console.log("data",e),e.riskRating=e.riskRating?e.riskRating.toString():null,e.type=e.type?e.type.toString():null,c.default.createElement("div",{id:D},c.default.createElement(d.Form,null,c.default.createElement(j,i({label:"投资偏好"},t),this.formUtils.getFieldDecorator("investTypes",{initialValue:e.investTypes})(c.default.createElement(d.Select,{size:"large",mode:"multiple",placeholder:"请选择",allowClear:!0,getPopupContainer:function(){return document.getElementById(D)}},this.state.category.map(function(e){return c.default.createElement(O,{value:e.value.toString(),key:e.value},e.label)})))),c.default.createElement(j,i({label:"投资人类型"},t),this.formUtils.getFieldDecorator("type",{initialValue:e.type,rules:[{validator:function(t,a,n){2==a&&(e.attachDtos&&e.attachDtos.length||n("请为客户上传资产证明，并确认客户符合专业投资人标准后再选择该选项")),n()}}]})(c.default.createElement(d.Select,{size:"large",placeholder:"请选择",allowClear:!0,getPopupContainer:function(){return document.getElementById(D)}},this.getDicSelections(O,"dic_customer_invest_type")))),c.default.createElement(j,i({label:"风险特征"},t),this.formUtils.getFieldDecorator("riskRating",{initialValue:e.riskRating})(c.default.createElement(d.Select,{size:"large",allowClear:!0,placeholder:"请选择",getPopupContainer:function(){return document.getElementById(D)}},this.getDicSelections(O,"dic_customer_risk_rating"))))))}}]),t}(C.default);S=d.Form.create()(S);var U=function(e){function t(){var e,a,n,o;l(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={isEdit:!1},n.submit=function(){var e=n.props,t=e.data,a=e.mod,l=!1;n.formUtils.validateFields(function(e){if(console.log(e),!e){l=n.formUtils.getFieldsValue(),l=n.formatData(l),l.id=t.id,l.investTypes=l.investTypes.join(",");var r=JSON.parse(JSON.stringify(t.info.data)),o=r.tags.map(function(e){return e.name}).join(",");r.certType=r.credential?r.credential.type:null,r.certNo=r.credential?r.credential.number:null,r.level=r.level?r.level.toString():null,r.source=r.source?r.source.toString():null,r.certType=r.certType?r.certType.toString():null,r.certFront=r.credential?r.credential.front:null,r.certBack=r.credential?r.credential.back:null,r.assets=JSON.stringify(r.attachDtos.map(function(e){return{url:e.url,name:e.name}})),r.tags=o;var i=r&&r.banks&&r.banks[0];i&&(r.bankAccount=i.account,r.bankName=i.bankName,r.bankFront=i.front,r.bankBack=i.back),delete r.credential,delete r.attachDtos,delete r.banks,l=(0,w.default)(r,l),n.customer.update_info(l).then(function(e){e&&e.success&&(d.message.success("更新投资资料成功"),a.loadData(),a.refreshGrid&&a.refreshGrid(),n.setState({isEdit:!1}))})}})},n.genneratorFix=function(e){var t=n.props.mod;return t.state.visible?c.default.createElement(d.Affix,{target:function(){return t.affixContainer}},e):e},o=a,r(n,o)}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.customer=new _.default,this.formUtils=new E.default(D)}},{key:"componentWillReceiveProps",value:function(e){e.data.id!=this.props.data.id&&this.setState({isEdit:!1})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),e[t]=a}return e}},{key:"render",value:function(){var e=this.props.data;if(!e)return null;var t=(e.info.permission.editPermission,e.info.permission.readPermission),a=JSON.parse(JSON.stringify(e.info.data)),n={labelCol:{span:24},wrapperCol:{span:24}},l=a.investTypes.map(function(e){return e.productTypeIdText}).join(",");return a.investTypes=a.investTypes&&a.investTypes.length?a.investTypes.map(function(e){return e.productTypeId.toString()}):[],c.default.createElement("div",{className:m.default.card},this.genneratorFix(c.default.createElement("div",{className:m.default.header},c.default.createElement("div",{className:m.default.title},"投资资料"))),c.default.createElement("div",{className:m.default.content},t?this.state.isEdit?c.default.createElement(S,{data:a,formUtils:this.formUtils}):c.default.createElement(d.Form,null,c.default.createElement(j,i({label:"投资偏好"},n),l),c.default.createElement(j,i({label:"投资人类型"},n),a.typeText),c.default.createElement(j,i({label:"风险特征"},n),a.riskRatingText),c.default.createElement(j,i({label:"证件类型"},n),a.credential&&a.credential.typeText),c.default.createElement(j,i({label:"证件号码"},n),a.certNo),c.default.createElement(j,i({label:"证件正反面"},n),c.default.createElement("ul",{className:m.default.images},a.certFront?c.default.createElement("li",{className:m.default.image},c.default.createElement("a",{href:a.certFront,target:"_blank"},c.default.createElement("img",{src:a.certFront,alt:"证件正面"}))):null,a.certBack?c.default.createElement("li",{className:m.default.image},c.default.createElement("a",{href:a.certBack,target:"_blank"},c.default.createElement("img",{src:a.certBack,alt:"证件反面"}))):null)),c.default.createElement(j,i({label:"证件有效期"},n)),c.default.createElement(j,i({label:"资产证明"},n),c.default.createElement("ul",{className:m.default.images},a.attachDtos.map(function(e){return c.default.createElement("li",{className:m.default.image},c.default.createElement("a",{href:e.url,target:"_blank"},c.default.createElement("img",{src:e.url,alt:""})))})))):"暂无权限查看"))}}]),t}(u.Component);t.default=U},2040:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(1730),f=n(d),m=a(1702),p=n(m),_=a(2046),h=n(_),g=a(2045),v=n(g),b=a(2047),y=n(b),E=a(2044),k=n(E),w=a(2039),x=n(w),F=a(2033),C=n(F),j=(c.Form.Item,function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isFocus:!1},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.customer=new p.default}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.mod,n=t.info;return u.default.createElement("div",{className:f.default.body},1===n.data.customerType?u.default.createElement(c.Row,null,u.default.createElement(c.Col,{span:"11"},u.default.createElement(h.default,{data:t,mod:a})),u.default.createElement(c.Col,{span:"2"}),u.default.createElement(c.Col,{span:"11"},u.default.createElement(y.default,{data:t,mod:a}),u.default.createElement(x.default,{data:t,mod:a}),u.default.createElement(C.default,{data:t,mod:a}))):null,2===n.customerType?u.default.createElement(c.Row,null,u.default.createElement(c.Col,{span:"11"},u.default.createElement(v.default,{data:t,mod:a})),u.default.createElement(c.Col,{span:"2"}),u.default.createElement(c.Col,{span:"11"},u.default.createElement(k.default,{data:t,mod:a}),u.default.createElement(x.default,{data:t,mod:a}),u.default.createElement(C.default,{data:t,mod:a}))):null)}}]),t}(s.Component));t.default=j},2041:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(33),d=n(c),f=a(1702),m=n(f),p=a(1730),_=n(p),h=a(42),g=a(2032),v=n(g),b=a(2038),y=n(b),E=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.showDetail=function(){a.setState({visible:!0})},a.state={customerId:a.props.customerId,qaList:null},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.customer=new m.default,this.getData(this.state.customerId)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.customerId;e.customerId!==a&&this.setState({customerId:e.customerId},function(){t.getData(e.customerId)})}},{key:"getData",value:function(e){var t=this;this.customer.getRiskEvaluationResult(e).then(function(e){e.success&&t.setState({qaList:e.result})})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.customerId,t.qaList),n=this.props,l=n.data,r=n.mod;if(!l)return null;var o=l.info.permission.editPermission,i=l.info.permission.readPermission,s=(JSON.parse(JSON.stringify(l.info.data)),[]);return this.state.isEdit?(s.push(u.default.createElement("img",{className:"anticon",index:0,src:"/assets/images/icon/取消@1x.png",srcSet:"/assets/images/icon/取消@2x.png",onClick:function(t){e.setState({isEdit:!1})}})),s.push(u.default.createElement("img",{className:"anticon",index:1,src:"/assets/images/icon/确认@1x.png",srcSet:"/assets/images/icon/确认@2x.png",onClick:this.submit}))):i&&o&&s.push(u.default.createElement("img",{className:"anticon anticon-edit",index:2,src:"/assets/images/icon/编辑@1x.png",srcSet:"/assets/images/icon/编辑@2x.png",onClick:function(t){e.setState({isEdit:!0})}})),u.default.createElement(h.Row,null,u.default.createElement("div",{className:_.default.card},u.default.createElement("div",{className:_.default.header},u.default.createElement("div",{className:_.default.title},"风险偏好测评"),a&&a.riskValue?u.default.createElement("a",{onClick:this.showDetail,style:{cursor:"pointer"}},"查看详情>>>"):null),u.default.createElement("div",{className:_.default.content,style:{overflow:"hidden"}},a&&a.riskValue?u.default.createElement("div",{className:_.default.risk},u.default.createElement("div",{className:_.default.risk_head_noBefore},u.default.createElement("h1",{className:_.default.risk_head_title},"客户风险测评结果：",u.default.createElement("em",null,a.riskText)),u.default.createElement("p",{className:_.default.risk_head_caption},u.default.createElement("span",null,"分数：",a.grade," "),u.default.createElement("span",null,"测评时间：",a.evaluationTime&&(0,d.default)(a.evaluationTime).format("YYYY-MM-DD"))))):"客户尚未进行风险测评")),u.default.createElement(y.default,{data:l,mod:r}),u.default.createElement(v.default,{data:l,mod:r}),u.default.createElement(h.Modal,{visible:this.state.visible,title:"客户风险测评结果",width:500,maskClosable:!1,className:"vant-modal showfloat yundao-modal  "+_.default.modal+" ",wrapClassName:"vertical-center-modal",footer:[u.default.createElement(h.Button,{key:"close",onClick:function(t){e.setState({visible:!1})}},"关闭")],closable:!1},a&&a.riskValue?u.default.createElement("div",{className:_.default.customer_detail},u.default.createElement("div",{className:_.default.risk},u.default.createElement("div",{className:_.default.risk_head},u.default.createElement("h1",{className:_.default.risk_head_title},"客户风险测评结果：",u.default.createElement("em",null,a.riskText)),u.default.createElement("p",{className:_.default.risk_head_caption},u.default.createElement("span",null,"分数：",a.grade," "),u.default.createElement("span",null,"测评时间：",a.evaluationTime&&(0,d.default)(a.evaluationTime).format("YYYY-MM-DD")))),u.default.createElement("div",{className:_.default.risk_list},a.questionDtos&&a.questionDtos.map(function(e,t){return u.default.createElement("div",{className:_.default.risk_list_group,key:t},u.default.createElement("p",{className:_.default.risk_list_group_question},t+1+"、"+e.questionText),u.default.createElement("p",{className:_.default.risk_list_group_answer},e.optionText))})))):null))}}]),t}(u.default.Component);t.default=E},2042:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(95),d=n(c),f=a(1703),m=(n(f),a(1702)),p=n(m),_=a(1807),h=n(_),g=a(1808),v=n(g),b=a(1795),y=n(b),E=a(1700),k=n(E),w=a(1730),x=n(w),F=k.default.GridManager,C=(k.default.FilterBar,k.default.GridInputFilter,k.default.GridRangeFilter,k.default.GridSortFilter,k.default.GridDateFilter,k.default.GridCheckboxFilter,h.default.EnumAppointmentStatus),j=v.default.EnumDeclarationStatus,O=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getColumns=function(){return[{title:"预约编号",dataIndex:"number",fixed:"left",render:function(e,t){return u.default.createElement("a",{onClick:function(){return a.editAppointmentModal.show({id:t.number},!1)}},e)}},{title:"产品名称",dataIndex:"productName",width:200,className:"ant-table-col"},{title:"预约金额",dataIndex:"reservationAmount",render:function(e,t){return e+"万"}},{title:"预计打款时间",dataIndex:"estimatePayDate",render:function(e,t){return d.default.formatDate(e,"YYYY-MM-DD")}},{title:"预约时间",dataIndex:"reservationDate",render:function(e,t){return d.default.formatDate(e,"YYYY-MM-DD")}},{title:"创建人",dataIndex:"createRealName"},{title:"状态",dataIndex:"status",render:function(e,t){return t.status===C.enum.PASS?u.default.createElement("span",{className:"green"},t.statusText):t.status===C.enum.REJECT?u.default.createElement("span",{className:"red"},t.statusText):t.statusText}}]},a.getColumns1=function(){return[{title:"报单编号",dataIndex:"number",fixed:"left",render:function(e,t){return u.default.createElement("a",{href:"/declaration/detail/"+t.number,target:"_blank"},e)}},{title:"产品名称",dataIndex:"productName",width:200,className:"ant-table-col"},{title:"认购金额",dataIndex:"dealAmount",render:function(e,t){return e+"万"}},{title:"打款时间",dataIndex:"payDate",render:function(e,t){return d.default.formatDate(e,"YYYY-MM-DD")}},{title:"报单时间",dataIndex:"commitDate",render:function(e,t){return d.default.formatDate(e,"YYYY-MM-DD")}},{title:"创建人",dataIndex:"createUserName"},{title:"状态",dataIndex:"status",render:function(e,t){return t.status===j.enum.PASS?u.default.createElement("span",{className:"green"},t.statusName):t.status===j.enum.REJECT?u.default.createElement("span",{className:"red"},t.statusName):t.statusName}}]},a.state={customerId:a.props.customerId,count:{reservationCount:0,declarationCount:0}},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.customer=new p.default,this.getCount(this.props.customerId)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.customerId;e.customerId!==a&&this.setState({customerId:e.customerId},function(){t.getCount(e.customerId),t.grid.load(),t.grid1.load()})}},{key:"getCount",value:function(e){var t=this;this.customer.get_count(e).then(function(e){e.success&&t.setState({count:e.result})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.customerId,n=t.count;return u.default.createElement("div",{className:x.default.trading},u.default.createElement("div",{className:x.default.tags},u.default.createElement("span",null,"额度预约(",n.reservationCount,")"),u.default.createElement("span",null,"报单(",n.declarationCount,")")),u.default.createElement("div",{className:x.default.title,id:"reservationList"},"额度预约"),u.default.createElement(F,{url:"/customer/sale/gets_reservation?customerId="+a,noRowSelection:!0,columns:this.getColumns(),ref:function(t){t&&(e.grid=t)}}),u.default.createElement("div",{className:x.default.title,id:"declarationList"},"报单"),u.default.createElement(F,{url:"/customer/sale/gets_declaration?customerId="+a,noRowSelection:!0,columns:this.getColumns1(),ref:function(t){t&&(e.grid1=t)}}),u.default.createElement(y.default,{reload:this.reloadGrid,ref:function(t){return e.editAppointmentModal=t}}))}}]),t}(u.default.Component);t.default=O},2043:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(95),d=n(c),f=a(1703),m=(n(f),a(1730)),p=(n(m),a(1700)),_=n(p),h=_.default.GridManager,g=(_.default.FilterBar,_.default.GridInputFilter,_.default.GridRangeFilter,_.default.GridSortFilter,_.default.GridDateFilter,_.default.GridCheckboxFilter,function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getColumns=function(){return[{title:"回访时间",dataIndex:"visitDate",render:function(e,t){return d.default.formatDate(e,"YYYY-MM-DD HH:mm")}},{title:"回访事由",dataIndex:"matter",render:function(e,t){return t.matter}},{title:"回访方式",dataIndex:"typeText"},{title:"回访状态",dataIndex:"statusText"},{title:"回访内容",dataIndex:"content",render:function(e,t){return u.default.createElement("span",{title:t.content},t.content)}},{title:"回访人",dataIndex:"userName"}]},a.state={customerId:a.props.customerId},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.customerId;e.customerId!==a&&this.setState({customerId:e.customerId},function(){t.grid.load()})}},{key:"render",value:function(){var e=this;return u.default.createElement(h,{url:"/user/visit/get_page_for_customer_detail?customerId="+this.state.customerId,noRowSelection:!0,columns:this.getColumns(),ref:function(t){t&&(e.grid=t)}})}}]),t}(u.default.Component));t.default=g},2044:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(1730),m=n(f),p=a(1702),_=n(p),h=a(1698),g=n(h),v=a(357),b=n(v),y=a(84),E=n(y),k=a(33),w=n(k),x=a(242),F=n(x),C=a(1717),j=n(C),O=a(1701),D=n(O),S=a(1765),U=n(S),P=d.Form.Item,I=d.Select.Option,N=d.Radio.Group,T="CustomerBaseInfoForm",V=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formatData=function(e){return e},a.state={data:a.props.data,dic:{}},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),(new g.default).gets("dic_customer_level,dic_customer_invest_type,dic_customer_credentials,dic_sex,dic_customer_source,dic_customer_risk_rating").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e}),e.setState({dic:a})}});var t=this.props.data,a=t.cityCode,n=t.provinceCode,l=n&&a?D.default.filter(function(e){return e.value==n})[0].children:[];this.setState({provinceData:D.default,cityData:l})}},{key:"getDicSelections",value:function(e,t){return this.state.dic[t]&&this.state.dic[t].selections&&this.state.dic[t].selections.map(function(t){return c.default.createElement(e,{value:t.value,key:t.value},t.label)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.data!==this.state.data){var a=this.formatData(e.data);this.setState({data:a},function(){t.formUtils&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))})}}},{key:"render",value:function(){var e=this,t=this.props.data,a={labelCol:{span:24},wrapperCol:{span:24}},n=this.state.provinceData,l=function(t){if(t){var a=n.filter(function(e){return e.value==t})[0].children;e.setState({cityData:a}),e.formUtils.setFieldsValue({cityCode:a[0].value})}};return c.default.createElement("div",{id:"CustomerBaseInfoForm"},c.default.createElement(d.Form,null,c.default.createElement(P,i({label:"客户名称"},a),this.formUtils.getFieldDecorator("name",{initialValue:t.name})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"性别"},a),this.formUtils.getFieldDecorator("sex",{initialValue:t.sex&&t.sex.toString()})(c.default.createElement(N,null,this.getDicSelections(d.Radio,"dic_sex")))),c.default.createElement(P,i({label:"重要级别"},a),this.formUtils.getFieldDecorator("level",{initialValue:t.level?t.level.toString():null})(c.default.createElement(d.Select,{getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")},size:"large",allowClear:!0,placeholder:"请选择"},this.getDicSelections(I,"dic_customer_level")))),this.formUtils.getFieldDecorator("tags",{initialValue:t.tags})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(P,i({label:"标签"},a),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:20},this.formUtils.getFieldValue("tags")),c.default.createElement(d.Col,{span:4},c.default.createElement(d.Button,{className:m.default.ant_btn_plus,onClick:function(){return e.editCustomerTagModal.show({tags:e.formUtils.getFieldValue("tags")})}},c.default.createElement(d.Icon,{type:"plus"}))))),c.default.createElement(P,i({label:"出生日期"},a),this.formUtils.getFieldDecorator("birthday",{initialValue:t.birthday?(0,w.default)(t.birthday):null})(c.default.createElement(d.DatePicker,{style:{width:200},getCalendarContainer:function(){return document.getElementById("CustomerBaseInfoForm")},format:"YYYY-MM-DD"}))),c.default.createElement(P,i({label:"来源"},a),this.formUtils.getFieldDecorator("source",{initialValue:t.source?t.source.toString():null})(c.default.createElement(d.Select,{placeholder:"请选择客户来源",size:"large",allowClear:!0,getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")}},this.getDicSelections(I,"dic_customer_source")))),c.default.createElement(P,i({label:"证件类型"},a),this.formUtils.getFieldDecorator("certType",{initialValue:t.certType?t.certType.toString():null})(c.default.createElement(d.Select,{placeholder:"请选择证件类型",size:"large",allowClear:!0,getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")}},this.getDicSelections(I,"dic_customer_credentials")))),c.default.createElement(P,i({label:"证件号码"},a),this.formUtils.getFieldDecorator("certNo",{initialValue:t.certNo})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"证件正反面"},a),c.default.createElement("ul",{className:m.default.images},c.default.createElement("li",{className:m.default.image},this.formUtils.getFieldDecorator("certFront",{initialValue:t.certFront})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(j.default,{accept:"png,jpg,jpeg,gif",showUploadList:!1,max:1,onSave:function(t){e.formUtils.setFieldsValue({certFront:t.url})}},this.formUtils.getFieldValue("certFront")?c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("certFront"),alt:"证件正面"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({certFront:""})}}))):c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传正面")))),c.default.createElement("li",{className:m.default.image},this.formUtils.getFieldDecorator("certBack",{initialValue:t.certBack})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(j.default,{showUploadList:!1,accept:"png,jpg,jpeg,gif",max:1,onSave:function(t){e.formUtils.setFieldsValue({certBack:t.url})}},this.formUtils.getFieldValue("certBack")?c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("certBack"),alt:"证件反面"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({certFront:""})}}))):c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传反面")))))),c.default.createElement(P,i({label:"资产证明"},a),this.formUtils.getFieldDecorator("assets",{initialValue:t.assets||[]})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement("ul",{className:m.default.images},this.formUtils.getFieldValue("assets").map(function(t){return c.default.createElement("li",{className:m.default.image},c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:t.url,alt:"资产证明"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(a){a.preventDefault(),a.stopPropagation();var n=e.formUtils.getFieldValue("assets");e.formUtils.setFieldsValue({assets:n.filter(function(e){return e.url!=t.url})})}}))))}),this.formUtils.getFieldValue("assets").length<9?c.default.createElement("li",{className:m.default.image},c.default.createElement(j.default,{accept:"png,jpg,jpeg,gif",showUploadList:!1,max:1,onSave:function(t){var a=e.formUtils.getFieldValue("assets");a.push({url:t.url,name:t.name}),e.formUtils.setFieldsValue({assets:a})}},c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传照片")))):null)),c.default.createElement(P,i({label:"备注"},a),this.formUtils.getFieldDecorator("remark",{initialValue:t.remark,validateTrigger:["onChange","onBlur"],rules:[{type:"string",whitespace:!0,message:"请填写长度不超过200个字符",min:1,max:200}]})(c.default.createElement(d.Input,{type:"textarea",rows:3,size:"large"}))),c.default.createElement(P,i({label:"省份/城市"},a),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"12"},c.default.createElement(P,null,this.formUtils.getFieldDecorator("provinceCode",{initialValue:t.provinceCode||null})(c.default.createElement(d.Select,{onChange:l,placeholder:"请选择",getPopupContainer:function(){return document.getElementById(T)}},this.state.provinceData.map(function(e){return c.default.createElement(I,{key:e.value,value:e.value},e.label)}))))),c.default.createElement(d.Col,{span:"12"},c.default.createElement(P,null,this.formUtils.getFieldDecorator("cityCode",{initialValue:t.provinceCode&&t.cityCode?t.cityCode:null})(c.default.createElement(d.Select,{placeholder:"请选择",getPopupContainer:function(){return document.getElementById(T)}},this.state.cityData.map(function(e){return c.default.createElement(I,{key:e.value,value:e.value},e.label)}))))))),c.default.createElement(P,i({label:"地址"},a),this.formUtils.getFieldDecorator("address",{initialValue:t.address})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"行业"},a),this.formUtils.getFieldDecorator("trade",{initialValue:t.trade})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"机构"},a),this.formUtils.getFieldDecorator("organization",{initialValue:t.organization})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"职务"},a),this.formUtils.getFieldDecorator("position",{initialValue:t.position})(c.default.createElement(d.Input,null)))),c.default.createElement(U.default,{formUtils:this.formUtils,submit:function(t){e.formUtils.setFieldsValue(t)},ref:function(t){return e.editCustomerTagModal=t}}))}}]),t}(E.default);V=d.Form.create()(V);var M=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isEdit:!1},a.submit=function(){var e=a.props,t=e.data,n=e.mod,l=!1;a.formUtils.validateFields(function(e){if(!e){l=a.formUtils.getFieldsValue(),l=a.formatData(l),l.assets=JSON.stringify(l.assets),l.id=t.id;var r=JSON.parse(JSON.stringify(t.info.data));r.investTypes=r.investTypes&&r.investTypes.length?r.investTypes.map(function(e){return e.productTypeId.toString()}).join(","):null;var o=r&&r.banks&&r.banks[0];o&&(r.bankAccount=o.account,r.bankName=o.bankName,r.bankFront=o.front,r.bankBack=o.back),delete r.credential,delete r.attachDtos,delete r.banks,l=(0,F.default)(r,l),a.customer.update_info(l).then(function(e){e&&e.success&&(d.message.success("更新身份资料成功"),n.loadData(),n.refreshGrid&&n.refreshGrid(),a.setState({isEdit:!1}))})}})},a.genneratorFix=function(e){var t=a.props.mod;return t.state.visible?c.default.createElement(d.Affix,{target:function(){return t.affixContainer}},e):e},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.customer=new _.default,this.formUtils=new b.default(T)}},{key:"componentWillReceiveProps",value:function(e){e.data.id!=this.props.data.id&&this.setState({isEdit:!1})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,w.default)(a).format("YYYY-MM-DD"):a instanceof w.default&&(a=(0,w.default)(a).format("YYYY-MM-DD")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"render",value:function(){var e=this.props.data;if(!e)return null;var t=(e.info.permission.editPermission,e.info.permission.readPermission),a=JSON.parse(JSON.stringify(e.info.data)),n={labelCol:{span:24},wrapperCol:{span:24}},l=a.tags.map(function(e){return e.name}).join(",");a.certType=a.credential?a.credential.type:null,a.certNo=a.credential?a.credential.number:null,a.level=a.level?a.level.toString():null,a.source=a.source?a.source.toString():null,a.certType=a.certType?a.certType.toString():null,a.certFront=a.credential?a.credential.front:null,a.certBack=a.credential?a.credential.back:null,a.assets=a.attachDtos,a.tags=l,a.birthday=a.birthday?(0,w.default)(a.birthday):null;var r=[];if(a&&a.provinceCode){var o=D.default.filter(function(e){return e.value==a.provinceCode});if(o&&o.length>0&&(r.push(o[0].label),a.cityCode)){var s=o[0].children.filter(function(e){return e.value==a.cityCode});r.push(s&&s[0]&&s[0].label)}}return c.default.createElement("div",{className:m.default.card},this.genneratorFix(c.default.createElement("div",{className:m.default.header},c.default.createElement("div",{className:m.default.title},"法人信息"))),c.default.createElement("div",{className:m.default.content},t?this.state.isEdit?c.default.createElement(V,{data:a,formUtils:this.formUtils}):c.default.createElement(d.Form,null,c.default.createElement(P,i({label:"法人名称"},n),a.name),c.default.createElement(P,i({label:"手机号码"},n),contact.mobile),c.default.createElement(P,i({label:"座机号码"},n),contact.telephone),c.default.createElement(P,i({label:"微信"},n),contact.wechat),c.default.createElement(P,i({label:"性别"},n),a.sexText),c.default.createElement(P,i({label:"出生日期"},n),a.birthday?a.birthday.format("YYYY-MM-DD"):null),c.default.createElement(P,i({label:"职务"},n),a.position),c.default.createElement(P,i({label:"邮箱"},n),contact.email),c.default.createElement(P,i({label:"办公地址"},n),a.address),c.default.createElement(P,i({label:"办公邮编"},n),a.postcode),c.default.createElement(P,i({label:"国籍"},n),a.nationality),c.default.createElement(P,i({label:"证件类型"},n),a.credential&&a.credential.typeText),c.default.createElement(P,i({label:"证件号码"},n),a.certNo),c.default.createElement(P,i({label:"证件正反面"},n),c.default.createElement("ul",{className:m.default.images},a.certFront?c.default.createElement("li",{className:m.default.image},c.default.createElement("a",{href:a.certFront,target:"_blank"},c.default.createElement("img",{src:a.certFront,alt:"证件正面"}))):null,a.certBack?c.default.createElement("li",{className:m.default.image},c.default.createElement("a",{href:a.certBack,target:"_blank"},c.default.createElement("img",{src:a.certBack,alt:"证件反面"}))):null)),c.default.createElement(P,i({label:"证件有效期"},n)),c.default.createElement(P,i({label:"是否联系人"},n),a.isContact?"是":"否")):"暂无权限查看"))}}]),t}(E.default);t.default=M},2045:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(1730),m=n(f),p=a(1702),_=n(p),h=a(1698),g=n(h),v=a(357),b=n(v),y=a(84),E=n(y),k=a(33),w=n(k),x=a(242),F=n(x),C=a(1717),j=n(C),O=a(1701),D=n(O),S=a(1765),U=n(S),P=d.Form.Item,I=d.Select.Option,N=d.Radio.Group,T="CustomerBaseInfoForm",V=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formatData=function(e){return e},a.state={data:a.props.data,dic:{}},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),(new g.default).gets("dic_customer_level,dic_customer_invest_type,dic_customer_credentials,dic_sex,dic_customer_source,dic_customer_risk_rating").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e}),e.setState({dic:a})}});var t=this.props.data,a=t.cityCode,n=t.provinceCode,l=n&&a?D.default.filter(function(e){return e.value==n})[0].children:[];this.setState({provinceData:D.default,cityData:l})}},{key:"getDicSelections",value:function(e,t){return this.state.dic[t]&&this.state.dic[t].selections&&this.state.dic[t].selections.map(function(t){return c.default.createElement(e,{value:t.value,key:t.value},t.label)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.data!==this.state.data){var a=this.formatData(e.data);this.setState({data:a},function(){t.formUtils&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))})}}},{key:"render",value:function(){var e=this,t=this.props.data,a={labelCol:{span:24},wrapperCol:{span:24}},n=this.state.provinceData,l=function(t){if(t){var a=n.filter(function(e){return e.value==t})[0].children;e.setState({cityData:a}),e.formUtils.setFieldsValue({cityCode:a[0].value})}};return c.default.createElement("div",{id:"CustomerBaseInfoForm"},c.default.createElement(d.Form,null,c.default.createElement(P,i({label:"客户名称"},a),this.formUtils.getFieldDecorator("name",{initialValue:t.name})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"性别"},a),this.formUtils.getFieldDecorator("sex",{initialValue:t.sex&&t.sex.toString()})(c.default.createElement(N,null,this.getDicSelections(d.Radio,"dic_sex")))),c.default.createElement(P,i({label:"重要级别"},a),this.formUtils.getFieldDecorator("level",{initialValue:t.level?t.level.toString():null})(c.default.createElement(d.Select,{getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")},size:"large",allowClear:!0,placeholder:"请选择"},this.getDicSelections(I,"dic_customer_level")))),this.formUtils.getFieldDecorator("tags",{initialValue:t.tags})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(P,i({label:"标签"},a),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:20},this.formUtils.getFieldValue("tags")),c.default.createElement(d.Col,{span:4},c.default.createElement(d.Button,{className:m.default.ant_btn_plus,onClick:function(){return e.editCustomerTagModal.show({tags:e.formUtils.getFieldValue("tags")})}},c.default.createElement(d.Icon,{type:"plus"}))))),c.default.createElement(P,i({label:"来源"},a),this.formUtils.getFieldDecorator("source",{initialValue:t.source?t.source.toString():null})(c.default.createElement(d.Select,{placeholder:"请选择客户来源",size:"large",allowClear:!0,getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")}},this.getDicSelections(I,"dic_customer_source")))),c.default.createElement(P,i({label:"证件类型"},a),this.formUtils.getFieldDecorator("certType",{initialValue:t.certType?t.certType.toString():null})(c.default.createElement(d.Select,{placeholder:"请选择证件类型",size:"large",allowClear:!0,getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")}},this.getDicSelections(I,"dic_customer_credentials")))),c.default.createElement(P,i({label:"证件号码"},a),this.formUtils.getFieldDecorator("certNo",{initialValue:t.certNo})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"证件正反面"},a),c.default.createElement("ul",{className:m.default.images},c.default.createElement("li",{className:m.default.image},this.formUtils.getFieldDecorator("certFront",{initialValue:t.certFront})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(j.default,{accept:"png,jpg,jpeg,gif",showUploadList:!1,max:1,onSave:function(t){e.formUtils.setFieldsValue({certFront:t.url})}},this.formUtils.getFieldValue("certFront")?c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("certFront"),alt:"证件正面"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({certFront:""})}}))):c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传正面")))),c.default.createElement("li",{className:m.default.image},this.formUtils.getFieldDecorator("certBack",{initialValue:t.certBack})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(j.default,{showUploadList:!1,accept:"png,jpg,jpeg,gif",max:1,onSave:function(t){e.formUtils.setFieldsValue({certBack:t.url})}},this.formUtils.getFieldValue("certBack")?c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("certBack"),alt:"证件反面"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({certFront:""})}}))):c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传反面")))))),c.default.createElement(P,i({label:"资产证明"},a),this.formUtils.getFieldDecorator("assets",{initialValue:t.assets||[]})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement("ul",{className:m.default.images},this.formUtils.getFieldValue("assets").map(function(t){return c.default.createElement("li",{className:m.default.image},c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:t.url,alt:"资产证明"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(a){a.preventDefault(),a.stopPropagation();var n=e.formUtils.getFieldValue("assets");e.formUtils.setFieldsValue({assets:n.filter(function(e){return e.url!=t.url})})}}))))}),this.formUtils.getFieldValue("assets").length<9?c.default.createElement("li",{className:m.default.image},c.default.createElement(j.default,{accept:"png,jpg,jpeg,gif",showUploadList:!1,max:1,onSave:function(t){var a=e.formUtils.getFieldValue("assets");a.push({url:t.url,name:t.name}),e.formUtils.setFieldsValue({assets:a})}},c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传照片")))):null)),c.default.createElement(P,i({label:"备注"},a),this.formUtils.getFieldDecorator("remark",{initialValue:t.remark,validateTrigger:["onChange","onBlur"],rules:[{type:"string",whitespace:!0,message:"请填写长度不超过200个字符",min:1,max:200}]})(c.default.createElement(d.Input,{type:"textarea",rows:3,size:"large"}))),c.default.createElement(P,i({label:"省份/城市"},a),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"12"},c.default.createElement(P,null,this.formUtils.getFieldDecorator("provinceCode",{initialValue:t.provinceCode||null})(c.default.createElement(d.Select,{onChange:l,placeholder:"请选择",getPopupContainer:function(){return document.getElementById(T)}},this.state.provinceData.map(function(e){return c.default.createElement(I,{key:e.value,value:e.value},e.label)}))))),c.default.createElement(d.Col,{span:"12"},c.default.createElement(P,null,this.formUtils.getFieldDecorator("cityCode",{initialValue:t.provinceCode&&t.cityCode?t.cityCode:null})(c.default.createElement(d.Select,{placeholder:"请选择",getPopupContainer:function(){return document.getElementById(T)}},this.state.cityData.map(function(e){return c.default.createElement(I,{key:e.value,value:e.value},e.label)}))))))),c.default.createElement(P,i({label:"地址"},a),this.formUtils.getFieldDecorator("address",{initialValue:t.address})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"行业"},a),this.formUtils.getFieldDecorator("trade",{initialValue:t.trade})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"机构"},a),this.formUtils.getFieldDecorator("organization",{initialValue:t.organization})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"职务"},a),this.formUtils.getFieldDecorator("position",{initialValue:t.position})(c.default.createElement(d.Input,null)))),c.default.createElement(U.default,{formUtils:this.formUtils,submit:function(t){e.formUtils.setFieldsValue(t)},ref:function(t){return e.editCustomerTagModal=t}}))}}]),t}(E.default);V=d.Form.create()(V);var M=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isEdit:!1},a.submit=function(){var e=a.props,t=e.data,n=e.mod,l=!1;a.formUtils.validateFields(function(e){if(!e){l=a.formUtils.getFieldsValue(),l=a.formatData(l),l.assets=JSON.stringify(l.assets),l.id=t.id;var r=JSON.parse(JSON.stringify(t.info.data));r.investTypes=r.investTypes&&r.investTypes.length?r.investTypes.map(function(e){return e.productTypeId.toString()}).join(","):null;var o=r&&r.banks&&r.banks[0];o&&(r.bankAccount=o.account,r.bankName=o.bankName,r.bankFront=o.front,r.bankBack=o.back),delete r.credential,delete r.attachDtos,delete r.banks,l=(0,F.default)(r,l),a.customer.update_info(l).then(function(e){e&&e.success&&(d.message.success("更新身份资料成功"),n.loadData(),n.refreshGrid&&n.refreshGrid(),a.setState({isEdit:!1}))})}})},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.customer=new _.default,this.formUtils=new b.default(T)}},{key:"componentWillReceiveProps",value:function(e){e.data.id!=this.props.data.id&&this.setState({isEdit:!1})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,w.default)(a).format("YYYY-MM-DD"):a instanceof w.default&&(a=(0,w.default)(a).format("YYYY-MM-DD")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"render",value:function(){var e=this.props.data;if(!e)return null;var t=(e.info.permission.editPermission,e.info.permission.readPermission),a=JSON.parse(JSON.stringify(e.info.data)),n={labelCol:{span:24},wrapperCol:{span:24}},l=a.tags.map(function(e){return e.name}).join(",");return a.certType=a.credential?a.credential.type:null,a.certNo=a.credential?a.credential.number:null,a.level=a.level?a.level.toString():null,a.source=a.source?a.source.toString():null,a.certType=a.certType?a.certType.toString():null,a.certFront=a.credential?a.credential.front:null,a.certBack=a.credential?a.credential.back:null,a.assets=a.attachDtos,a.tags=l,a.birthday=a.birthday?(0,w.default)(a.birthday):null,c.default.createElement("div",{className:m.default.card},c.default.createElement("div",{className:m.default.header},c.default.createElement("div",{className:m.default.title},"基本资料")),c.default.createElement("div",{className:m.default.content},t?this.state.isEdit?c.default.createElement(V,{data:a,formUtils:this.formUtils}):c.default.createElement(d.Form,null,c.default.createElement(P,i({label:"客户名称"},n),a.name),c.default.createElement(P,i({label:"电话号码"},n),a.telephone),c.default.createElement(P,i({label:"机构类型"},n),a.orgTypeText),c.default.createElement(P,i({label:"重要级别"},n),a.levelText),c.default.createElement(P,i({label:"标签"},n),a.tags),c.default.createElement(P,i({label:"来源"},n),a.sourceText),c.default.createElement(P,i({label:"网址"},n),a.website),c.default.createElement(P,i({label:"经营范围"},n),a.business),c.default.createElement(P,i({label:"注册地址"},n),a.registeredAddress),c.default.createElement(P,i({label:"办公地址"},n),a.officeAddress),c.default.createElement(P,i({label:"注册资本"},n),a.registeredCapital),c.default.createElement(P,i({label:"实际控制人"},n),a.personInCharge),c.default.createElement(P,i({label:"机构规模"},n),a.scaleText),c.default.createElement(P,i({label:"备注"},n),a.remark)):"暂无权限查看"))}}]),t}(E.default);t.default=M},2046:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(1730),m=n(f),p=a(1702),_=n(p),h=a(1698),g=n(h),v=a(357),b=n(v),y=a(84),E=n(y),k=a(33),w=n(k),x=a(242),F=n(x),C=a(1717),j=n(C),O=a(1701),D=n(O),S=a(1765),U=n(S),P=d.Form.Item,I=d.Select.Option,N=d.Radio.Group,T="CustomerBaseInfoForm",V=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formatData=function(e){return e},a.state={data:a.props.data,dic:{}},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),(new g.default).gets("dic_customer_level,dic_customer_invest_type,dic_customer_credentials,dic_sex,dic_customer_source,dic_customer_risk_rating").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e}),e.setState({dic:a})}});var t=this.props.data,a=t.cityCode,n=t.provinceCode,l=n&&a?D.default.filter(function(e){return e.value==n})[0].children:[];this.setState({provinceData:D.default,cityData:l})}},{key:"getDicSelections",value:function(e,t){return this.state.dic[t]&&this.state.dic[t].selections&&this.state.dic[t].selections.map(function(t){return c.default.createElement(e,{value:t.value,key:t.value},t.label)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.data!==this.state.data){var a=this.formatData(e.data);this.setState({data:a},function(){t.formUtils&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))})}}},{key:"render",value:function(){var e=this,t=this.props.data,a={labelCol:{span:24},wrapperCol:{span:24}},n=this.state.provinceData,l=function(t){if(t){var a=n.filter(function(e){return e.value==t})[0].children;e.setState({cityData:a}),e.formUtils.setFieldsValue({cityCode:a[0].value})}};return c.default.createElement("div",{id:"CustomerBaseInfoForm"},c.default.createElement(d.Form,null,c.default.createElement(P,i({label:"客户名称"},a),this.formUtils.getFieldDecorator("name",{initialValue:t.name})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"性别"},a),this.formUtils.getFieldDecorator("sex",{initialValue:t.sex&&t.sex.toString()})(c.default.createElement(N,null,this.getDicSelections(d.Radio,"dic_sex")))),c.default.createElement(P,i({label:"重要级别"},a),this.formUtils.getFieldDecorator("level",{initialValue:t.level?t.level.toString():null})(c.default.createElement(d.Select,{getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")},size:"large",allowClear:!0,placeholder:"请选择"},this.getDicSelections(I,"dic_customer_level")))),this.formUtils.getFieldDecorator("tags",{initialValue:t.tags})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(P,i({label:"标签"},a),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:20},this.formUtils.getFieldValue("tags")),c.default.createElement(d.Col,{span:4},c.default.createElement(d.Button,{className:m.default.ant_btn_plus,onClick:function(){return e.editCustomerTagModal.show({tags:e.formUtils.getFieldValue("tags")})}},c.default.createElement(d.Icon,{type:"plus"}))))),c.default.createElement(P,i({label:"出生日期"},a),this.formUtils.getFieldDecorator("birthday",{initialValue:t.birthday?(0,w.default)(t.birthday):null})(c.default.createElement(d.DatePicker,{style:{width:200},getCalendarContainer:function(){return document.getElementById("CustomerBaseInfoForm")},format:"YYYY-MM-DD"}))),c.default.createElement(P,i({label:"来源"},a),this.formUtils.getFieldDecorator("source",{initialValue:t.source?t.source.toString():null})(c.default.createElement(d.Select,{placeholder:"请选择客户来源",size:"large",allowClear:!0,getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")}},this.getDicSelections(I,"dic_customer_source")))),c.default.createElement(P,i({label:"证件类型"},a),this.formUtils.getFieldDecorator("certType",{initialValue:t.certType?t.certType.toString():null})(c.default.createElement(d.Select,{placeholder:"请选择证件类型",size:"large",allowClear:!0,getPopupContainer:function(){return document.getElementById("CustomerBaseInfoForm")}},this.getDicSelections(I,"dic_customer_credentials")))),c.default.createElement(P,i({label:"证件号码"},a),this.formUtils.getFieldDecorator("certNo",{initialValue:t.certNo})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"证件正反面"},a),c.default.createElement("ul",{className:m.default.images},c.default.createElement("li",{className:m.default.image},this.formUtils.getFieldDecorator("certFront",{initialValue:t.certFront})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(j.default,{accept:"png,jpg,jpeg,gif",showUploadList:!1,max:1,onSave:function(t){e.formUtils.setFieldsValue({certFront:t.url})}},this.formUtils.getFieldValue("certFront")?c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("certFront"),alt:"证件正面"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({certFront:""})}}))):c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传正面")))),c.default.createElement("li",{className:m.default.image},this.formUtils.getFieldDecorator("certBack",{initialValue:t.certBack})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement(j.default,{showUploadList:!1,accept:"png,jpg,jpeg,gif",max:1,onSave:function(t){e.formUtils.setFieldsValue({certBack:t.url})}},this.formUtils.getFieldValue("certBack")?c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:this.formUtils.getFieldValue("certBack"),alt:"证件反面"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.formUtils.setFieldsValue({certFront:""})}}))):c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传反面")))))),c.default.createElement(P,i({label:"资产证明"},a),this.formUtils.getFieldDecorator("assets",{initialValue:t.assets||[]})(c.default.createElement(d.Input,{type:"hidden"})),c.default.createElement("ul",{className:m.default.images},this.formUtils.getFieldValue("assets").map(function(t){return c.default.createElement("li",{className:m.default.image},c.default.createElement("div",{className:m.default.uploaded},c.default.createElement("img",{src:t.url,alt:"资产证明"}),c.default.createElement("div",{className:m.default.btns},c.default.createElement(d.Icon,{type:"close",onClick:function(a){a.preventDefault(),a.stopPropagation();var n=e.formUtils.getFieldValue("assets");e.formUtils.setFieldsValue({assets:n.filter(function(e){return e.url!=t.url})})}}))))}),this.formUtils.getFieldValue("assets").length<9?c.default.createElement("li",{className:m.default.image},c.default.createElement(j.default,{accept:"png,jpg,jpeg,gif",showUploadList:!1,max:1,onSave:function(t){var a=e.formUtils.getFieldValue("assets");a.push({url:t.url,name:t.name}),e.formUtils.setFieldsValue({assets:a})}},c.default.createElement("div",{className:m.default.upload_btn},c.default.createElement(d.Icon,{type:"plus"}),c.default.createElement("p",null,"上传照片")))):null)),c.default.createElement(P,i({label:"备注"},a),this.formUtils.getFieldDecorator("remark",{initialValue:t.remark,validateTrigger:["onChange","onBlur"],rules:[{type:"string",whitespace:!0,message:"请填写长度不超过200个字符",min:1,max:200}]})(c.default.createElement(d.Input,{type:"textarea",rows:3,size:"large"}))),c.default.createElement(P,i({label:"省份/城市"},a),c.default.createElement(d.Row,null,c.default.createElement(d.Col,{span:"12"},c.default.createElement(P,null,this.formUtils.getFieldDecorator("provinceCode",{initialValue:t.provinceCode||null})(c.default.createElement(d.Select,{onChange:l,placeholder:"请选择",getPopupContainer:function(){return document.getElementById(T)}},this.state.provinceData.map(function(e){return c.default.createElement(I,{key:e.value,value:e.value},e.label)}))))),c.default.createElement(d.Col,{span:"12"},c.default.createElement(P,null,this.formUtils.getFieldDecorator("cityCode",{initialValue:t.provinceCode&&t.cityCode?t.cityCode:null})(c.default.createElement(d.Select,{placeholder:"请选择",getPopupContainer:function(){return document.getElementById(T)}},this.state.cityData.map(function(e){return c.default.createElement(I,{key:e.value,value:e.value},e.label)}))))))),c.default.createElement(P,i({label:"地址"},a),this.formUtils.getFieldDecorator("address",{initialValue:t.address})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"行业"},a),this.formUtils.getFieldDecorator("trade",{initialValue:t.trade})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"机构"},a),this.formUtils.getFieldDecorator("organization",{initialValue:t.organization})(c.default.createElement(d.Input,null))),c.default.createElement(P,i({label:"职务"},a),this.formUtils.getFieldDecorator("position",{initialValue:t.position})(c.default.createElement(d.Input,null)))),c.default.createElement(U.default,{formUtils:this.formUtils,submit:function(t){e.formUtils.setFieldsValue(t)},ref:function(t){return e.editCustomerTagModal=t}}))}}]),t}(E.default);V=d.Form.create()(V);var M=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isEdit:!1},a.submit=function(){var e=a.props,t=e.data,n=e.mod,l=!1;a.formUtils.validateFields(function(e){if(!e){l=a.formUtils.getFieldsValue(),l=a.formatData(l),l.assets=JSON.stringify(l.assets),l.id=t.id;var r=JSON.parse(JSON.stringify(t.info.data));r.investTypes=r.investTypes&&r.investTypes.length?r.investTypes.map(function(e){return e.productTypeId.toString()}).join(","):null;var o=r&&r.banks&&r.banks[0];o&&(r.bankAccount=o.account,r.bankName=o.bankName,r.bankFront=o.front,r.bankBack=o.back),delete r.credential,delete r.attachDtos,delete r.banks,l=(0,F.default)(r,l),a.customer.update_info(l).then(function(e){e&&e.success&&(d.message.success("更新身份资料成功"),n.loadData(),n.refreshGrid&&n.refreshGrid(),a.setState({isEdit:!1}))})}})},a.genneratorFix=function(e){var t=a.props.mod;return t.state.visible?c.default.createElement(d.Affix,{target:function(){return t.affixContainer}},e):e},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.customer=new _.default,this.formUtils=new b.default(T)}},{key:"componentWillReceiveProps",value:function(e){e.data.id!=this.props.data.id&&this.setState({isEdit:!1})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,w.default)(a).format("YYYY-MM-DD"):a instanceof w.default&&(a=(0,w.default)(a).format("YYYY-MM-DD")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"render",value:function(){var e=this.props.data;if(!e)return null;var t=(e.info.permission.editPermission,e.info.permission.readPermission),a=JSON.parse(JSON.stringify(e.info.data)),n={labelCol:{span:24},wrapperCol:{span:24}},l=a.tags.map(function(e){return e.name}).join(",");a.certType=a.credential?a.credential.type:null,a.certNo=a.credential?a.credential.number:null,a.level=a.level?a.level.toString():null,a.source=a.source?a.source.toString():null,a.certType=a.certType?a.certType.toString():null,a.certFront=a.credential?a.credential.front:null,a.certBack=a.credential?a.credential.back:null,a.assets=a.attachDtos,a.tags=l,a.birthday=a.birthday?(0,w.default)(a.birthday):null;var r=[];if(a&&a.provinceCode){var o=D.default.filter(function(e){return e.value==a.provinceCode});if(o&&o.length>0&&(r.push(o[0].label),a.cityCode)){var s=o[0].children.filter(function(e){return e.value==a.cityCode});r.push(s&&s[0]&&s[0].label)}}return c.default.createElement("div",{className:m.default.card},this.genneratorFix(c.default.createElement("div",{className:m.default.header},c.default.createElement("div",{className:m.default.title},"基本资料"))),c.default.createElement("div",{className:m.default.content},t?this.state.isEdit?c.default.createElement(V,{data:a,formUtils:this.formUtils}):c.default.createElement(d.Form,null,c.default.createElement(P,i({label:"客户名称"},n),a.name),c.default.createElement(P,i({label:"性别"},n),a.sexText),c.default.createElement(P,i({label:"重要级别"},n),a.levelText),c.default.createElement(P,i({label:"标签"},n),a.tags),c.default.createElement(P,i({label:"出生日期"},n),a.birthday?a.birthday.format("YYYY-MM-DD"):null),c.default.createElement(P,i({label:"来源"},n),a.sourceText),c.default.createElement(P,i({label:"国籍"},n),a.nationality),c.default.createElement(P,i({label:"邮编"},n),a.postcode),c.default.createElement(P,i({label:"省份/城市"},n),r.join("/")),c.default.createElement(P,i({label:"地址"},n),a.address),c.default.createElement(P,i({label:"职业"},n),a.profession),c.default.createElement(P,i({label:"行业"},n),a.trade),c.default.createElement(P,i({label:"机构"},n),a.organization),c.default.createElement(P,i({label:"职务"},n),a.position),c.default.createElement(P,i({label:"备注"},n),a.remark)):"暂无权限查看"))}}]),t}(E.default);t.default=M},2047:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(1730),m=n(f),p=a(1702),_=n(p),h=a(1727),g=(n(h),a(357)),v=n(g),b=a(84),y=n(b),E=a(33),k=n(E),w=a(1765),x=(n(w),d.Form.Item),F=(d.Select.Option,d.Radio.Group,"CustomerContactInfoForm"),C=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.formatData=function(e){return e.birthday=e.birthday?(0,k.default)(e.birthday):null,e},a.state={data:a.props.data,dic:{},category:[]},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.data!==this.state.data){var a=this.formatData(e.data);this.setState({data:a},function(){t.formUtils&&(t.formUtils.resetFields(),t.formUtils.setFieldsValue(a))})}}},{key:"render",value:function(){var e=this.props.data,t={labelCol:{span:24},wrapperCol:{span:24}};this.state.provinceData;return c.default.createElement("div",{id:F},c.default.createElement(d.Form,null,c.default.createElement(x,i({label:"手机号码"},t),this.formUtils.getFieldDecorator("mobile",{initialValue:e.mobile,rules:[{min:6,max:20,message:"长度为6-20"}]})(c.default.createElement(d.Input,null))),c.default.createElement(x,i({label:"微信"},t),this.formUtils.getFieldDecorator("wechat",{initialValue:e.wechat,rules:[{min:6,max:20,message:"长度为6-20"}]})(c.default.createElement(d.Input,null))),c.default.createElement(x,i({label:"QQ"},t),this.formUtils.getFieldDecorator("qq",{initialValue:e.qq,rules:[{min:6,max:20,message:"长度为6-20"}]})(c.default.createElement(d.Input,null))),c.default.createElement(x,i({label:"邮箱"},t),this.formUtils.getFieldDecorator("email",{initialValue:e.email,rules:[{min:6,max:20,message:"长度为6-20"}]})(c.default.createElement(d.Input,null)))))}}]),t}(y.default);C=d.Form.create()(C);var j=function(e){function t(e){l(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isEdit:!1},a.submit=function(){var e=a.props,t=e.data,n=e.mod,l=!1;a.formUtils.validateFields(function(e){console.log(e),e||(l=a.formUtils.getFieldsValue(),l=a.formatData(l),console.log(l),l.id=t.id,a.customer.update_contact(l).then(function(e){e&&e.success&&(d.message.success("更新联系资料成功"),n.loadData(),n.refreshGrid&&n.refreshGrid(),a.setState({isEdit:!1}))}))})},a.genneratorFix=function(e){var t=a.props.mod;return t.state.visible?c.default.createElement(d.Affix,{target:function(){return t.affixContainer}},e):e},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.customer=new _.default,this.formUtils=new v.default(F)}},{key:"componentWillReceiveProps",value:function(e){e.data.id!=this.props.data.id&&this.setState({isEdit:!1})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,k.default)(a).format("YYYY-MM-DD"):a instanceof k.default&&(a=(0,k.default)(a).format("YYYY-MM-DD")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"render",value:function(){var e=this.props.data;if(!e)return null;e=JSON.parse(JSON.stringify(e));var t=(e.contact.permission.editPermission,e.contact.permission.readPermission),a=e.contact.data,n={labelCol:{span:24},wrapperCol:{span:24}};return c.default.createElement("div",{className:m.default.card},this.genneratorFix(c.default.createElement("div",{className:m.default.header},c.default.createElement("div",{className:m.default.title},"联系信息"))),c.default.createElement("div",{className:m.default.content},t?this.state.isEdit?c.default.createElement(C,{formUtils:this.formUtils,data:a}):c.default.createElement(d.Form,null,c.default.createElement(x,i({label:"手机号码"},n),a.mobile),c.default.createElement(x,i({label:"微信"},n),a.wechat),c.default.createElement(x,i({label:"座机号码"},n),a.qq),c.default.createElement(x,i({label:"QQ"},n),a.qq),c.default.createElement(x,i({label:"邮箱"},n),a.email)):"暂无权限查看"))}}]),t}(u.Component);t.default=j},2048:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),c=n(u),d=a(42),f=a(84),m=n(f),p=a(357),_=n(p),h=a(1702),g=n(h),v=a(1698),b=n(v),y=a(1769),E=(n(y),d.Form.Item),k=d.Select.Option,w=(d.Input.Textarea,d.Radio.Group),x=d.DatePicker.RangePicker,F=function(e){function t(){l(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={loading:!1,noticeType:[],showExtra:!1,dic:{},category:[]},e.formUtils=new _.default("EditContactForm"),e}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.notice=new Notice,this.customer=new g.default,this.setState({noticeType:this.props.noticeType}),this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this),(new b.default).gets("dic_sex,dic_org_credentials_type,dic_nationality").then(function(t){if(t.success&&t.result){var a={};t.result.map(function(e){a[e.value]=e}),e.setState({dic:a})}})}},{key:"getDicSelections",value:function(e,t){return this.state.dic[t]&&this.state.dic[t].selections&&this.state.dic[t].selections.map(function(t){return c.default.createElement(e,{value:t.value,key:t.value},t.label)})}},{key:"getFormClassName",value:function(){var e=void 0;return e=["float-slide-form","vant-spin","follow-form"],this.state.loading&&e.push("loading"),e.join(" ")}},{key:"render",value:function(){var e=this,t={labelCol:{span:6},wrapperCol:{span:17}};return c.default.createElement("div",{id:"customer_form",style:{position:"relative"}},c.default.createElement(d.Form,{className:this.getFormClassName()},c.default.createElement(E,i({label:"名称"},t),this.formUtils.getFieldDecorator("name",{initialValue:null,validateTrigger:["onChange","onBlur"],rules:[{required:!0,type:"string",whitespace:!0,message:"请输入1-10长度的名称",min:1,max:10}]})(c.default.createElement(d.Input,{placeholder:"请输入名称"}))),c.default.createElement(E,i({label:"手机号码"},t),this.formUtils.getFieldDecorator("mobile",{rules:[{whitespace:!0,message:"请填写长度为6-20位",min:6,max:20}],validateTrigger:"onBlur"})(c.default.createElement(d.Input,{placeholder:"请输入手机号码"}))),c.default.createElement(E,i({label:"性别"},t),this.formUtils.getFieldDecorator("sex",{initialValue:0})(c.default.createElement(w,null,this.getDicSelections(d.Radio,"dic_sex")))),c.default.createElement(E,i({label:"职务"},t),this.formUtils.getFieldDecorator("position",{initialValue:null,rules:[{whitespace:!0,message:"长度不能超过20个字符",max:20}]})(c.default.createElement(d.Input,null))),c.default.createElement(E,i({label:c.default.createElement("a",{style:{cursor:"pointer",display:"inline"},onClick:function(t){e.setState({showExtra:!e.state.showExtra})}},this.state.showExtra?"收起":"填写更多信息>>")},t)),this.state.showExtra?c.default.createElement("div",{style:{display:this.state.showExtra?"block":"none"}},c.default.createElement(E,i({label:"微信"},t),this.formUtils.getFieldDecorator("wechat",{initialValue:null,rules:[{whitespace:!0,message:"输入长度范围限制6-20位",min:6,max:20}]})(c.default.createElement(d.Input,null))),c.default.createElement(E,i({label:"邮箱"},t),this.formUtils.getFieldDecorator("email",{initialValue:null,rules:[{type:"email",whitespace:!0,message:"邮箱格式不正确"},{message:"长度不能超过50个字符",max:50}]})(c.default.createElement(d.Input,null))),c.default.createElement(E,i({label:"座机号码"},t),this.formUtils.getFieldDecorator("telephone",{initialValue:null,rules:[{whitespace:!0,message:"请填写长度为6-20位",min:6,max:20}]})(c.default.createElement(d.Input,null))),c.default.createElement(E,i({label:"出生日期"},t),this.formUtils.getFieldDecorator("birthday")(c.default.createElement(d.DatePicker,{style:{width:200},format:"YYYY-MM-DD"}))),c.default.createElement(E,i({label:"办公地址"},t),this.formUtils.getFieldDecorator("officeAddress",{initialValue:null,rules:[{whitespace:!0,message:"长度不能超过100个字符",max:100}]})(c.default.createElement(d.Input,null))),c.default.createElement(E,i({label:"办公邮编"},t),this.formUtils.getFieldDecorator("sadf",{initialValue:null})(c.default.createElement(d.Input,null))),c.default.createElement(E,i({label:"国籍"},t),this.formUtils.getFieldDecorator("nationality",{initialValue:null})(c.default.createElement(d.Select,{getPopupContainer:function(){return document.getElementById("customer_form")},placeholder:"请选择国籍",allowClear:!0,size:"large"},this.getDicSelections(k,"dic_nationality")))),c.default.createElement(E,i({label:"证件类型"},t),this.formUtils.getFieldDecorator("card")(c.default.createElement(d.Select,{getPopupContainer:function(){return document.getElementById("customer_form")},placeholder:"请选择证件类型",allowClear:!0,size:"large"},this.getDicSelections(k,"dic_org_credentials_type")))),c.default.createElement(E,i({label:"证件号码"},t),this.formUtils.getFieldDecorator("cardId",{initialValue:null,rules:[{whitespace:!0,message:"输入长度限制6-20位",min:6,max:20}]})(c.default.createElement(d.Input,null))),c.default.createElement(E,i({label:"证件有效期"},t),this.formUtils.getFieldDecorator("expireDate",{initialValue:null})(c.default.createElement(x,{format:"YYYY-MM-DD"}))),c.default.createElement(E,i({label:"与该机构关系"},t),this.formUtils.getFieldDecorator("qualificationCertificateNumber",{initialValue:null,rules:[{whitespace:!0,message:"长度不能超过50个字符",max:50}]})(c.default.createElement(d.Input,null)))):null))}}]),t}(m.default);F=d.Form.create()(F),t.default=F},2049:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),c=a(42),d=a(33),f=n(d),m=a(84),p=n(m),_=a(357),h=n(_),g=a(1702),v=n(g),b=a(2048),y=n(b),E=a(1769),k=n(E),w=function(e){function t(){l(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleClose=function(){e.setState({visible:!1})},e.handleSubmit=function(t){t&&t.preventDefault(),e.formUtils.validateFields(function(t){if(!t){var a=e.formUtils.getFieldsValue();a=e.formatData(a),e.request(a).then(function(t){t.success&&(e.setState({visible:!1}),c.message.success("新增联系人成功."),e.props.reload())})}})},e.state={loading:!1,visible:!1,formData:{}},e.formUtils=new h.default("editCustomerModal"),e}return o(t,e),i(t,[{key:"componentWillMount",value:function(){this.customer=new v.default}},{key:"componentDidMount",value:function(){}},{key:"show",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({formData:formData,visible:!0},function(){e.formUtils.resetFields(),e.formUtils.setFieldsValue(formData)})}},{key:"formatData",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];"string"==typeof a&&(a=a.replace(/^\s*|\s*$/g,"")),a instanceof Date?a=(0,f.default)(a).format("YYYY-MM-DD"):a instanceof f.default&&(a=a.format("YYYY-MM-DD")),a instanceof Array&&(a=a.length>0&&a[0]instanceof f.default?a.map(function(e){return e.format("YYYY-MM-DD")}):a.join(",")),a instanceof Object&&a._isAMomentObject&&(a=a.format("YYYY-MM-DD")),e[t]=a}return e}},{key:"render",value:function(){var e=this,t=this.state.visible;return u.default.createElement(c.Modal,{visible:t,title:"新增联系人",width:680,className:"vant-modal yundao-modal "+k.default.modal,wrapClassName:"showFloat vertical-center-modal",onCancel:this.handleClose,onOk:this.handleSubmit},u.default.createElement(y.default,{ref:function(t){return e.customerForm=t},formUtils:this.formUtils,visible:t,setForm:function(t){return e.form=t}}))}}]),t}(p.default);t.default=w},2064:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),d=n(c),f=a(12),m=n(f),p=a(42),_=a(84),h=n(_),g=a(357),v=n(g),b=a(1779),y=n(b),E=a(1698),k=n(E),w=a(1780),x=n(w),F=p.Form.Item,C=p.Radio.Group,j=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return d.default.createElement(p.Checkbox,{checked:this.props.value,onChange:this.props.onChange},this.props.children)}}]),t}(d.default.Component),O=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.getOptions=function(e){return e.map(function(e){return d.default.createElement(Option,{key:e.value,value:e.value.toString()},e.label)})},e.formUtils=new v.default("clueDealForm"),e.radioOptions=[{label:"已跟进",value:"1"},{label:"作废",value:"2"}],e.state={dic_follow_up_type:[]},e}return i(t,e),u(t,[{key:"componentWillMount",value:function(){this.clue=new y.default,this.formUtils=this.props.formUtils||this.formUtils,this.formUtils.setForm(this.props.form),this.props.setForm&&this.props.setForm.call(this,this),this.getDictionary()}},{key:"getDictionary",value:function(){var e=this;(new k.default).gets("dic_follow_up_type").then(function(t){t.success&&t.result&&t.result.map(function(t){e.setState(l({},t.value,t.selections))})})}},{key:"render",value:function(){var e=this,t={labelCol:{span:7},wrapperCol:{span:17}},a=this.state.dic_follow_up_type,n="1"===this.formUtils.getFieldValue("status"),l=!0;return void 0!==this.formUtils.getFieldValue("isSyncToFollow")&&(l=this.formUtils.getFieldValue("isSyncToFollow")),d.default.createElement(p.Form,{ref:function(t){return e.container=m.default.findDOMNode(t)}},d.default.createElement(F,{style:{display:"none"}},this.props.formUtils.getFieldDecorator("id",{initialValue:""})(d.default.createElement(p.Input,{type:"hidden"}))),d.default.createElement(F,s({label:"处理情况"},t),this.props.formUtils.getFieldDecorator("status",{initialValue:"1",rules:[{required:!0,type:"string",message:"请选择一项"}]})(d.default.createElement(C,{options:this.radioOptions}))),n&&l?d.default.createElement(F,s({label:"备注"},t),this.props.formUtils.getFieldDecorator("followRemark",{initialValue:"",rules:[{required:!0,type:"string",whitespace:!0,message:"请输入备注"}]})(d.default.createElement(p.Input,{type:"textarea",rows:3}))):d.default.createElement(F,s({label:"备注"},t),this.props.formUtils.getFieldDecorator("followRemark",{initialValue:"",rules:[{type:"string",whitespace:!0}]})(d.default.createElement(p.Input,{type:"textarea",rows:3}))),d.default.createElement(F,s({label:"   "},t,{style:{display:n?"block":"none"}}),this.props.formUtils.getFieldDecorator("isSyncToFollow",{initialValue:!0})(d.default.createElement(j,null,"同步到跟进记录"))),n&&l?d.default.createElement(F,s({label:"跟进方式"},t),this.props.formUtils.getFieldDecorator("type",{initialValue:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,type:"string",whitespace:!0,message:"请选择跟进方式"}]})(d.default.createElement(p.Select,{size:"large",getPopupContainer:function(){return e.container}},this.getOptions(a)))):null)}}]),t}(h.default),D=p.Form.create()(O),S=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleCancel=function(){e.setState({visible:!1},function(){e.formUtils.resetFields()})},e.handleOk=function(t){t&&t.preventDefault(),e.formUtils.validateFields(function(t,a){if(!t){var n=e.formUtils.getFieldsValue();n.isSyncToFollow=n.isSyncToFollow?1:0,e.clue.process(n).then(function(t){if(t.success){p.message.success("跟进成功"),e.setState({visible:!1},function(){setTimeout(function(){e.formUtils.resetFields()},1e3)});var a=e.props.reload;a&&a()}})}})},e.state={loading:!1,visible:!1},e.formUtils=new v.default("clueDealModal"),e}return i(t,e),u(t,[{key:"componentWillMount",value:function(){this.clue=new y.default}},{key:"componentDidMount",value:function(){}},{key:"show",value:function(e){var t=this;this.setState({visible:!0},function(){t.formUtils.setFieldsValue(e)})}},{key:"render",value:function(){var e=this,t=this.state.visible;return d.default.createElement(p.Modal,{visible:t,title:"处理线索",width:450,className:"vant-modal yundao-modal "+x.default.modal,wrapClassName:"vertical-center-modal",getContainer:function(){return e.props.container},onOk:this.handleOk,onCancel:this.handleCancel},d.default.createElement(D,{ref:function(t){return e.customerDeployForm=t},formUtils:this.formUtils,setForm:function(t){return e.form=t}}))}}]),t}(h.default);t.default=S}});